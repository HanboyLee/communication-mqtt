var kl=Object.defineProperty;var Lo=s=>{throw TypeError(s)};var Ol=(s,l,o)=>l in s?kl(s,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[l]=o;var Ie=(s,l,o)=>Ol(s,typeof l!="symbol"?l+"":l,o),dn=(s,l,o)=>l.has(s)||Lo("Cannot "+o);var L=(s,l,o)=>(dn(s,l,"read from private field"),o?o.call(s):l.get(s)),De=(s,l,o)=>l.has(s)?Lo("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(s):l.set(s,o),Me=(s,l,o,a)=>(dn(s,l,"write to private field"),a?a.call(s,o):l.set(s,o),o),Pe=(s,l,o)=>(dn(s,l,"access private method"),o);var Ir=(s,l,o,a)=>({set _(f){Me(s,l,f,o)},get _(){return L(s,l,a)}});(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))a(f);new MutationObserver(f=>{for(const r of f)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&a(t)}).observe(document,{childList:!0,subtree:!0});function o(f){const r={};return f.integrity&&(r.integrity=f.integrity),f.referrerPolicy&&(r.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?r.credentials="include":f.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(f){if(f.ep)return;f.ep=!0;const r=o(f);fetch(f.href,r)}})();const Pl=globalThis||void 0||self;var vo=Object.defineProperty,Cl=Object.getOwnPropertyDescriptor,Rl=Object.getOwnPropertyNames,Ml=Object.prototype.hasOwnProperty,ft=(s,l)=>()=>(s&&(l=s(s=0)),l),be=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports),ir=(s,l)=>{for(var o in l)vo(s,o,{get:l[o],enumerable:!0})},jl=(s,l,o,a)=>{if(l&&typeof l=="object"||typeof l=="function")for(let f of Rl(l))!Ml.call(s,f)&&f!==o&&vo(s,f,{get:()=>l[f],enumerable:!(a=Cl(l,f))||a.enumerable});return s},qe=s=>jl(vo({},"__esModule",{value:!0}),s),he=ft(()=>{}),Fe={};ir(Fe,{_debugEnd:()=>Jn,_debugProcess:()=>Yn,_events:()=>hi,_eventsCount:()=>pi,_exiting:()=>Nn,_fatalExceptions:()=>Vn,_getActiveHandles:()=>ea,_getActiveRequests:()=>Zs,_kill:()=>Dn,_linkedBinding:()=>Js,_maxListeners:()=>fi,_preload_modules:()=>ui,_rawDebug:()=>Mn,_startProfilerIdleNotifier:()=>Xn,_stopProfilerIdleNotifier:()=>Zn,_tickCallback:()=>Qn,abort:()=>ni,addListener:()=>di,allowedNodeEnvironmentFlags:()=>Hn,arch:()=>vn,argv:()=>En,argv0:()=>li,assert:()=>ta,binding:()=>Tn,browser:()=>Rn,chdir:()=>Pn,config:()=>Ln,cpuUsage:()=>fr,cwd:()=>On,debugPort:()=>ai,default:()=>_o,dlopen:()=>Xs,domain:()=>Bn,emit:()=>vi,emitWarning:()=>xn,env:()=>_n,execArgv:()=>Sn,execPath:()=>si,exit:()=>$n,features:()=>Kn,hasUncaughtExceptionCaptureCallback:()=>ra,hrtime:()=>Or,kill:()=>qn,listeners:()=>ia,memoryUsage:()=>Wn,moduleLoadList:()=>jn,nextTick:()=>Qs,off:()=>yi,on:()=>vt,once:()=>gi,openStdin:()=>zn,pid:()=>ii,platform:()=>wn,ppid:()=>oi,prependListener:()=>wi,prependOnceListener:()=>_i,reallyExit:()=>Un,release:()=>Cn,removeAllListeners:()=>bi,removeListener:()=>mi,resourceUsage:()=>Fn,setSourceMapsEnabled:()=>ci,setUncaughtExceptionCaptureCallback:()=>Gn,stderr:()=>ti,stdin:()=>ri,stdout:()=>ei,title:()=>bn,umask:()=>kn,uptime:()=>na,version:()=>An,versions:()=>In});function wo(s){throw new Error("Node.js process "+s+" is not supported by JSPM core outside of Node.js")}function Bl(){!Ht||!$t||(Ht=!1,$t.length?yt=$t.concat(yt):yr=-1,yt.length&&Gs())}function Gs(){if(!Ht){var s=setTimeout(Bl,0);Ht=!0;for(var l=yt.length;l;){for($t=yt,yt=[];++yr<l;)$t&&$t[yr].run();yr=-1,l=yt.length}$t=null,Ht=!1,clearTimeout(s)}}function Qs(s){var l=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)l[o-1]=arguments[o];yt.push(new Ys(s,l)),yt.length===1&&!Ht&&setTimeout(Gs,0)}function Ys(s,l){this.fun=s,this.array=l}function it(){}function Js(s){wo("_linkedBinding")}function Xs(s){wo("dlopen")}function Zs(){return[]}function ea(){return[]}function ta(s,l){if(!s)throw new Error(l||"assertion error")}function ra(){return!1}function na(){return _t.now()/1e3}function Or(s){var l=Math.floor((Date.now()-_t.now())*.001),o=_t.now()*.001,a=Math.floor(o)+l,f=Math.floor(o%1*1e9);return s&&(a=a-s[0],f=f-s[1],f<0&&(a--,f+=Pr)),[a,f]}function vt(){return _o}function ia(s){return[]}var yt,Ht,$t,yr,bn,vn,wn,_n,En,Sn,An,In,xn,Tn,kn,On,Pn,Cn,Rn,Mn,jn,Bn,Nn,Ln,Un,Dn,fr,Fn,Wn,qn,$n,zn,Hn,Kn,Vn,Gn,Qn,Yn,Jn,Xn,Zn,ei,ti,ri,ni,ii,oi,si,ai,li,ui,ci,_t,gn,Pr,fi,hi,pi,di,gi,yi,mi,bi,vi,wi,_i,_o,Nl=ft(()=>{he(),de(),pe(),yt=[],Ht=!1,yr=-1,Ys.prototype.run=function(){this.fun.apply(null,this.array)},bn="browser",vn="x64",wn="browser",_n={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},En=["/usr/bin/node"],Sn=[],An="v16.8.0",In={},xn=function(s,l){console.warn((l?l+": ":"")+s)},Tn=function(s){wo("binding")},kn=function(s){return 0},On=function(){return"/"},Pn=function(s){},Cn={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Rn=!0,Mn=it,jn=[],Bn={},Nn=!1,Ln={},Un=it,Dn=it,fr=function(){return{}},Fn=fr,Wn=fr,qn=it,$n=it,zn=it,Hn={},Kn={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Vn=it,Gn=it,Qn=it,Yn=it,Jn=it,Xn=it,Zn=it,ei=void 0,ti=void 0,ri=void 0,ni=it,ii=2,oi=1,si="/bin/usr/node",ai=9229,li="node",ui=[],ci=it,_t={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},_t.now===void 0&&(gn=Date.now(),_t.timing&&_t.timing.navigationStart&&(gn=_t.timing.navigationStart),_t.now=()=>Date.now()-gn),Pr=1e9,Or.bigint=function(s){var l=Or(s);return typeof BigInt>"u"?l[0]*Pr+l[1]:BigInt(l[0]*Pr)+BigInt(l[1])},fi=10,hi={},pi=0,di=vt,gi=vt,yi=vt,mi=vt,bi=vt,vi=it,wi=vt,_i=vt,_o={version:An,versions:In,arch:vn,platform:wn,browser:Rn,release:Cn,_rawDebug:Mn,moduleLoadList:jn,binding:Tn,_linkedBinding:Js,_events:hi,_eventsCount:pi,_maxListeners:fi,on:vt,addListener:di,once:gi,off:yi,removeListener:mi,removeAllListeners:bi,emit:vi,prependListener:wi,prependOnceListener:_i,listeners:ia,domain:Bn,_exiting:Nn,config:Ln,dlopen:Xs,uptime:na,_getActiveRequests:Zs,_getActiveHandles:ea,reallyExit:Un,_kill:Dn,cpuUsage:fr,resourceUsage:Fn,memoryUsage:Wn,kill:qn,exit:$n,openStdin:zn,allowedNodeEnvironmentFlags:Hn,assert:ta,features:Kn,_fatalExceptions:Vn,setUncaughtExceptionCaptureCallback:Gn,hasUncaughtExceptionCaptureCallback:ra,emitWarning:xn,nextTick:Qs,_tickCallback:Qn,_debugProcess:Yn,_debugEnd:Jn,_startProfilerIdleNotifier:Xn,_stopProfilerIdleNotifier:Zn,stdout:ei,stdin:ri,stderr:ti,abort:ni,umask:kn,chdir:Pn,cwd:On,env:_n,title:bn,argv:En,execArgv:Sn,pid:ii,ppid:oi,execPath:si,debugPort:ai,hrtime:Or,argv0:li,_preload_modules:ui,setSourceMapsEnabled:ci}}),pe=ft(()=>{Nl()});function Ll(){if(Ei)return er;Ei=!0,er.byteLength=n,er.toByteArray=i,er.fromByteArray=p;for(var s=[],l=[],o=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,r=a.length;f<r;++f)s[f]=a[f],l[a.charCodeAt(f)]=f;l[45]=62,l[95]=63;function t(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=m.indexOf("=");E===-1&&(E=b);var w=E===b?0:4-E%4;return[E,w]}function n(m){var b=t(m),E=b[0],w=b[1];return(E+w)*3/4-w}function e(m,b,E){return(b+E)*3/4-E}function i(m){var b,E=t(m),w=E[0],A=E[1],g=new o(e(m,w,A)),_=0,S=A>0?w-4:w,v;for(v=0;v<S;v+=4)b=l[m.charCodeAt(v)]<<18|l[m.charCodeAt(v+1)]<<12|l[m.charCodeAt(v+2)]<<6|l[m.charCodeAt(v+3)],g[_++]=b>>16&255,g[_++]=b>>8&255,g[_++]=b&255;return A===2&&(b=l[m.charCodeAt(v)]<<2|l[m.charCodeAt(v+1)]>>4,g[_++]=b&255),A===1&&(b=l[m.charCodeAt(v)]<<10|l[m.charCodeAt(v+1)]<<4|l[m.charCodeAt(v+2)]>>2,g[_++]=b>>8&255,g[_++]=b&255),g}function c(m){return s[m>>18&63]+s[m>>12&63]+s[m>>6&63]+s[m&63]}function d(m,b,E){for(var w,A=[],g=b;g<E;g+=3)w=(m[g]<<16&16711680)+(m[g+1]<<8&65280)+(m[g+2]&255),A.push(c(w));return A.join("")}function p(m){for(var b,E=m.length,w=E%3,A=[],g=16383,_=0,S=E-w;_<S;_+=g)A.push(d(m,_,_+g>S?S:_+g));return w===1?(b=m[E-1],A.push(s[b>>2]+s[b<<4&63]+"==")):w===2&&(b=(m[E-2]<<8)+m[E-1],A.push(s[b>>10]+s[b>>4&63]+s[b<<2&63]+"=")),A.join("")}return er}function Ul(){return Si?hr:(Si=!0,hr.read=function(s,l,o,a,f){var r,t,n=f*8-a-1,e=(1<<n)-1,i=e>>1,c=-7,d=o?f-1:0,p=o?-1:1,m=s[l+d];for(d+=p,r=m&(1<<-c)-1,m>>=-c,c+=n;c>0;r=r*256+s[l+d],d+=p,c-=8);for(t=r&(1<<-c)-1,r>>=-c,c+=a;c>0;t=t*256+s[l+d],d+=p,c-=8);if(r===0)r=1-i;else{if(r===e)return t?NaN:(m?-1:1)*(1/0);t=t+Math.pow(2,a),r=r-i}return(m?-1:1)*t*Math.pow(2,r-a)},hr.write=function(s,l,o,a,f,r){var t,n,e,i=r*8-f-1,c=(1<<i)-1,d=c>>1,p=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=a?0:r-1,b=a?1:-1,E=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(n=isNaN(l)?1:0,t=c):(t=Math.floor(Math.log(l)/Math.LN2),l*(e=Math.pow(2,-t))<1&&(t--,e*=2),t+d>=1?l+=p/e:l+=p*Math.pow(2,1-d),l*e>=2&&(t++,e/=2),t+d>=c?(n=0,t=c):t+d>=1?(n=(l*e-1)*Math.pow(2,f),t=t+d):(n=l*Math.pow(2,d-1)*Math.pow(2,f),t=0));f>=8;s[o+m]=n&255,m+=b,n/=256,f-=8);for(t=t<<f|n,i+=f;i>0;s[o+m]=t&255,m+=b,t/=256,i-=8);s[o+m-b]|=E*128},hr)}function Dl(){if(Ai)return Mt;Ai=!0;let s=Ll(),l=Ul(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Mt.Buffer=t,Mt.SlowBuffer=A,Mt.INSPECT_MAX_BYTES=50;let a=2147483647;Mt.kMaxLength=a,t.TYPED_ARRAY_SUPPORT=f(),!t.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{let u=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(u,h),u.foo()===42}catch{return!1}}Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}});function r(u){if(u>a)throw new RangeError('The value "'+u+'" is invalid for option "size"');let h=new Uint8Array(u);return Object.setPrototypeOf(h,t.prototype),h}function t(u,h,y){if(typeof u=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(u)}return n(u,h,y)}t.poolSize=8192;function n(u,h,y){if(typeof u=="string")return d(u,h);if(ArrayBuffer.isView(u))return m(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(J(u,ArrayBuffer)||u&&J(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(u,SharedArrayBuffer)||u&&J(u.buffer,SharedArrayBuffer)))return b(u,h,y);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let k=u.valueOf&&u.valueOf();if(k!=null&&k!==u)return t.from(k,h,y);let j=E(u);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return t.from(u[Symbol.toPrimitive]("string"),h,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}t.from=function(u,h,y){return n(u,h,y)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array);function e(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function i(u,h,y){return e(u),u<=0?r(u):h!==void 0?typeof y=="string"?r(u).fill(h,y):r(u).fill(h):r(u)}t.alloc=function(u,h,y){return i(u,h,y)};function c(u){return e(u),r(u<0?0:w(u)|0)}t.allocUnsafe=function(u){return c(u)},t.allocUnsafeSlow=function(u){return c(u)};function d(u,h){if((typeof h!="string"||h==="")&&(h="utf8"),!t.isEncoding(h))throw new TypeError("Unknown encoding: "+h);let y=g(u,h)|0,k=r(y),j=k.write(u,h);return j!==y&&(k=k.slice(0,j)),k}function p(u){let h=u.length<0?0:w(u.length)|0,y=r(h);for(let k=0;k<h;k+=1)y[k]=u[k]&255;return y}function m(u){if(J(u,Uint8Array)){let h=new Uint8Array(u);return b(h.buffer,h.byteOffset,h.byteLength)}return p(u)}function b(u,h,y){if(h<0||u.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<h+(y||0))throw new RangeError('"length" is outside of buffer bounds');let k;return h===void 0&&y===void 0?k=new Uint8Array(u):y===void 0?k=new Uint8Array(u,h):k=new Uint8Array(u,h,y),Object.setPrototypeOf(k,t.prototype),k}function E(u){if(t.isBuffer(u)){let h=w(u.length)|0,y=r(h);return y.length===0||u.copy(y,0,0,h),y}if(u.length!==void 0)return typeof u.length!="number"||ve(u.length)?r(0):p(u);if(u.type==="Buffer"&&Array.isArray(u.data))return p(u.data)}function w(u){if(u>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return u|0}function A(u){return+u!=u&&(u=0),t.alloc(+u)}t.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==t.prototype},t.compare=function(u,h){if(J(u,Uint8Array)&&(u=t.from(u,u.offset,u.byteLength)),J(h,Uint8Array)&&(h=t.from(h,h.offset,h.byteLength)),!t.isBuffer(u)||!t.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===h)return 0;let y=u.length,k=h.length;for(let j=0,z=Math.min(y,k);j<z;++j)if(u[j]!==h[j]){y=u[j],k=h[j];break}return y<k?-1:k<y?1:0},t.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(u,h){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return t.alloc(0);let y;if(h===void 0)for(h=0,y=0;y<u.length;++y)h+=u[y].length;let k=t.allocUnsafe(h),j=0;for(y=0;y<u.length;++y){let z=u[y];if(J(z,Uint8Array))j+z.length>k.length?(t.isBuffer(z)||(z=t.from(z)),z.copy(k,j)):Uint8Array.prototype.set.call(k,z,j);else if(t.isBuffer(z))z.copy(k,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=z.length}return k};function g(u,h){if(t.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||J(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);let y=u.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&y===0)return 0;let j=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Q(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return ge(u).length;default:if(j)return k?-1:Q(u).length;h=(""+h).toLowerCase(),j=!0}}t.byteLength=g;function _(u,h,y){let k=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,h>>>=0,y<=h))return"";for(u||(u="utf8");;)switch(u){case"hex":return Z(this,h,y);case"utf8":case"utf-8":return q(this,h,y);case"ascii":return ae(this,h,y);case"latin1":case"binary":return te(this,h,y);case"base64":return x(this,h,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,h,y);default:if(k)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),k=!0}}t.prototype._isBuffer=!0;function S(u,h,y){let k=u[h];u[h]=u[y],u[y]=k}t.prototype.swap16=function(){let u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<u;h+=2)S(this,h,h+1);return this},t.prototype.swap32=function(){let u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<u;h+=4)S(this,h,h+3),S(this,h+1,h+2);return this},t.prototype.swap64=function(){let u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<u;h+=8)S(this,h,h+7),S(this,h+1,h+6),S(this,h+2,h+5),S(this,h+3,h+4);return this},t.prototype.toString=function(){let u=this.length;return u===0?"":arguments.length===0?q(this,0,u):_.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(u){if(!t.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:t.compare(this,u)===0},t.prototype.inspect=function(){let u="",h=Mt.INSPECT_MAX_BYTES;return u=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(u+=" ... "),"<Buffer "+u+">"},o&&(t.prototype[o]=t.prototype.inspect),t.prototype.compare=function(u,h,y,k,j){if(J(u,Uint8Array)&&(u=t.from(u,u.offset,u.byteLength)),!t.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(h===void 0&&(h=0),y===void 0&&(y=u?u.length:0),k===void 0&&(k=0),j===void 0&&(j=this.length),h<0||y>u.length||k<0||j>this.length)throw new RangeError("out of range index");if(k>=j&&h>=y)return 0;if(k>=j)return-1;if(h>=y)return 1;if(h>>>=0,y>>>=0,k>>>=0,j>>>=0,this===u)return 0;let z=j-k,ne=y-h,W=Math.min(z,ne),Y=this.slice(k,j),Ae=u.slice(h,y);for(let Te=0;Te<W;++Te)if(Y[Te]!==Ae[Te]){z=Y[Te],ne=Ae[Te];break}return z<ne?-1:ne<z?1:0};function v(u,h,y,k,j){if(u.length===0)return-1;if(typeof y=="string"?(k=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,ve(y)&&(y=j?0:u.length-1),y<0&&(y=u.length+y),y>=u.length){if(j)return-1;y=u.length-1}else if(y<0)if(j)y=0;else return-1;if(typeof h=="string"&&(h=t.from(h,k)),t.isBuffer(h))return h.length===0?-1:R(u,h,y,k,j);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(u,h,y):Uint8Array.prototype.lastIndexOf.call(u,h,y):R(u,[h],y,k,j);throw new TypeError("val must be string, number or Buffer")}function R(u,h,y,k,j){let z=1,ne=u.length,W=h.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(u.length<2||h.length<2)return-1;z=2,ne/=2,W/=2,y/=2}function Y(Te,ke){return z===1?Te[ke]:Te.readUInt16BE(ke*z)}let Ae;if(j){let Te=-1;for(Ae=y;Ae<ne;Ae++)if(Y(u,Ae)===Y(h,Te===-1?0:Ae-Te)){if(Te===-1&&(Te=Ae),Ae-Te+1===W)return Te*z}else Te!==-1&&(Ae-=Ae-Te),Te=-1}else for(y+W>ne&&(y=ne-W),Ae=y;Ae>=0;Ae--){let Te=!0;for(let ke=0;ke<W;ke++)if(Y(u,Ae+ke)!==Y(h,ke)){Te=!1;break}if(Te)return Ae}return-1}t.prototype.includes=function(u,h,y){return this.indexOf(u,h,y)!==-1},t.prototype.indexOf=function(u,h,y){return v(this,u,h,y,!0)},t.prototype.lastIndexOf=function(u,h,y){return v(this,u,h,y,!1)};function P(u,h,y,k){y=Number(y)||0;let j=u.length-y;k?(k=Number(k),k>j&&(k=j)):k=j;let z=h.length;k>z/2&&(k=z/2);let ne;for(ne=0;ne<k;++ne){let W=parseInt(h.substr(ne*2,2),16);if(ve(W))return ne;u[y+ne]=W}return ne}function I(u,h,y,k){return we(Q(h,u.length-y),u,y,k)}function O(u,h,y,k){return we(oe(h),u,y,k)}function T(u,h,y,k){return we(ge(h),u,y,k)}function F(u,h,y,k){return we(ye(h,u.length-y),u,y,k)}t.prototype.write=function(u,h,y,k){if(h===void 0)k="utf8",y=this.length,h=0;else if(y===void 0&&typeof h=="string")k=h,y=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(y)?(y=y>>>0,k===void 0&&(k="utf8")):(k=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let j=this.length-h;if((y===void 0||y>j)&&(y=j),u.length>0&&(y<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let z=!1;for(;;)switch(k){case"hex":return P(this,u,h,y);case"utf8":case"utf-8":return I(this,u,h,y);case"ascii":case"latin1":case"binary":return O(this,u,h,y);case"base64":return T(this,u,h,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,u,h,y);default:if(z)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),z=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(u,h,y){return h===0&&y===u.length?s.fromByteArray(u):s.fromByteArray(u.slice(h,y))}function q(u,h,y){y=Math.min(u.length,y);let k=[],j=h;for(;j<y;){let z=u[j],ne=null,W=z>239?4:z>223?3:z>191?2:1;if(j+W<=y){let Y,Ae,Te,ke;switch(W){case 1:z<128&&(ne=z);break;case 2:Y=u[j+1],(Y&192)===128&&(ke=(z&31)<<6|Y&63,ke>127&&(ne=ke));break;case 3:Y=u[j+1],Ae=u[j+2],(Y&192)===128&&(Ae&192)===128&&(ke=(z&15)<<12|(Y&63)<<6|Ae&63,ke>2047&&(ke<55296||ke>57343)&&(ne=ke));break;case 4:Y=u[j+1],Ae=u[j+2],Te=u[j+3],(Y&192)===128&&(Ae&192)===128&&(Te&192)===128&&(ke=(z&15)<<18|(Y&63)<<12|(Ae&63)<<6|Te&63,ke>65535&&ke<1114112&&(ne=ke))}}ne===null?(ne=65533,W=1):ne>65535&&(ne-=65536,k.push(ne>>>10&1023|55296),ne=56320|ne&1023),k.push(ne),j+=W}return U(k)}let H=4096;function U(u){let h=u.length;if(h<=H)return String.fromCharCode.apply(String,u);let y="",k=0;for(;k<h;)y+=String.fromCharCode.apply(String,u.slice(k,k+=H));return y}function ae(u,h,y){let k="";y=Math.min(u.length,y);for(let j=h;j<y;++j)k+=String.fromCharCode(u[j]&127);return k}function te(u,h,y){let k="";y=Math.min(u.length,y);for(let j=h;j<y;++j)k+=String.fromCharCode(u[j]);return k}function Z(u,h,y){let k=u.length;(!h||h<0)&&(h=0),(!y||y<0||y>k)&&(y=k);let j="";for(let z=h;z<y;++z)j+=Se[u[z]];return j}function le(u,h,y){let k=u.slice(h,y),j="";for(let z=0;z<k.length-1;z+=2)j+=String.fromCharCode(k[z]+k[z+1]*256);return j}t.prototype.slice=function(u,h){let y=this.length;u=~~u,h=h===void 0?y:~~h,u<0?(u+=y,u<0&&(u=0)):u>y&&(u=y),h<0?(h+=y,h<0&&(h=0)):h>y&&(h=y),h<u&&(h=u);let k=this.subarray(u,h);return Object.setPrototypeOf(k,t.prototype),k};function K(u,h,y){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+h>y)throw new RangeError("Trying to access beyond buffer length")}t.prototype.readUintLE=t.prototype.readUIntLE=function(u,h,y){u=u>>>0,h=h>>>0,y||K(u,h,this.length);let k=this[u],j=1,z=0;for(;++z<h&&(j*=256);)k+=this[u+z]*j;return k},t.prototype.readUintBE=t.prototype.readUIntBE=function(u,h,y){u=u>>>0,h=h>>>0,y||K(u,h,this.length);let k=this[u+--h],j=1;for(;h>0&&(j*=256);)k+=this[u+--h]*j;return k},t.prototype.readUint8=t.prototype.readUInt8=function(u,h){return u=u>>>0,h||K(u,1,this.length),this[u]},t.prototype.readUint16LE=t.prototype.readUInt16LE=function(u,h){return u=u>>>0,h||K(u,2,this.length),this[u]|this[u+1]<<8},t.prototype.readUint16BE=t.prototype.readUInt16BE=function(u,h){return u=u>>>0,h||K(u,2,this.length),this[u]<<8|this[u+1]},t.prototype.readUint32LE=t.prototype.readUInt32LE=function(u,h){return u=u>>>0,h||K(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},t.prototype.readUint32BE=t.prototype.readUInt32BE=function(u,h){return u=u>>>0,h||K(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},t.prototype.readBigUInt64LE=ce(function(u){u=u>>>0,re(u,"offset");let h=this[u],y=this[u+7];(h===void 0||y===void 0)&&me(u,this.length-8);let k=h+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,j=this[++u]+this[++u]*2**8+this[++u]*2**16+y*2**24;return BigInt(k)+(BigInt(j)<<BigInt(32))}),t.prototype.readBigUInt64BE=ce(function(u){u=u>>>0,re(u,"offset");let h=this[u],y=this[u+7];(h===void 0||y===void 0)&&me(u,this.length-8);let k=h*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],j=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+y;return(BigInt(k)<<BigInt(32))+BigInt(j)}),t.prototype.readIntLE=function(u,h,y){u=u>>>0,h=h>>>0,y||K(u,h,this.length);let k=this[u],j=1,z=0;for(;++z<h&&(j*=256);)k+=this[u+z]*j;return j*=128,k>=j&&(k-=Math.pow(2,8*h)),k},t.prototype.readIntBE=function(u,h,y){u=u>>>0,h=h>>>0,y||K(u,h,this.length);let k=h,j=1,z=this[u+--k];for(;k>0&&(j*=256);)z+=this[u+--k]*j;return j*=128,z>=j&&(z-=Math.pow(2,8*h)),z},t.prototype.readInt8=function(u,h){return u=u>>>0,h||K(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},t.prototype.readInt16LE=function(u,h){u=u>>>0,h||K(u,2,this.length);let y=this[u]|this[u+1]<<8;return y&32768?y|4294901760:y},t.prototype.readInt16BE=function(u,h){u=u>>>0,h||K(u,2,this.length);let y=this[u+1]|this[u]<<8;return y&32768?y|4294901760:y},t.prototype.readInt32LE=function(u,h){return u=u>>>0,h||K(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},t.prototype.readInt32BE=function(u,h){return u=u>>>0,h||K(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},t.prototype.readBigInt64LE=ce(function(u){u=u>>>0,re(u,"offset");let h=this[u],y=this[u+7];(h===void 0||y===void 0)&&me(u,this.length-8);let k=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(y<<24);return(BigInt(k)<<BigInt(32))+BigInt(h+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),t.prototype.readBigInt64BE=ce(function(u){u=u>>>0,re(u,"offset");let h=this[u],y=this[u+7];(h===void 0||y===void 0)&&me(u,this.length-8);let k=(h<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(k)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+y)}),t.prototype.readFloatLE=function(u,h){return u=u>>>0,h||K(u,4,this.length),l.read(this,u,!0,23,4)},t.prototype.readFloatBE=function(u,h){return u=u>>>0,h||K(u,4,this.length),l.read(this,u,!1,23,4)},t.prototype.readDoubleLE=function(u,h){return u=u>>>0,h||K(u,8,this.length),l.read(this,u,!0,52,8)},t.prototype.readDoubleBE=function(u,h){return u=u>>>0,h||K(u,8,this.length),l.read(this,u,!1,52,8)};function ie(u,h,y,k,j,z){if(!t.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>j||h<z)throw new RangeError('"value" argument is out of bounds');if(y+k>u.length)throw new RangeError("Index out of range")}t.prototype.writeUintLE=t.prototype.writeUIntLE=function(u,h,y,k){if(u=+u,h=h>>>0,y=y>>>0,!k){let ne=Math.pow(2,8*y)-1;ie(this,u,h,y,ne,0)}let j=1,z=0;for(this[h]=u&255;++z<y&&(j*=256);)this[h+z]=u/j&255;return h+y},t.prototype.writeUintBE=t.prototype.writeUIntBE=function(u,h,y,k){if(u=+u,h=h>>>0,y=y>>>0,!k){let ne=Math.pow(2,8*y)-1;ie(this,u,h,y,ne,0)}let j=y-1,z=1;for(this[h+j]=u&255;--j>=0&&(z*=256);)this[h+j]=u/z&255;return h+y},t.prototype.writeUint8=t.prototype.writeUInt8=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,1,255,0),this[h]=u&255,h+1},t.prototype.writeUint16LE=t.prototype.writeUInt16LE=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,2,65535,0),this[h]=u&255,this[h+1]=u>>>8,h+2},t.prototype.writeUint16BE=t.prototype.writeUInt16BE=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,2,65535,0),this[h]=u>>>8,this[h+1]=u&255,h+2},t.prototype.writeUint32LE=t.prototype.writeUInt32LE=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,4,4294967295,0),this[h+3]=u>>>24,this[h+2]=u>>>16,this[h+1]=u>>>8,this[h]=u&255,h+4},t.prototype.writeUint32BE=t.prototype.writeUInt32BE=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,4,4294967295,0),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4};function M(u,h,y,k,j){ee(h,k,j,u,y,7);let z=Number(h&BigInt(4294967295));u[y++]=z,z=z>>8,u[y++]=z,z=z>>8,u[y++]=z,z=z>>8,u[y++]=z;let ne=Number(h>>BigInt(32)&BigInt(4294967295));return u[y++]=ne,ne=ne>>8,u[y++]=ne,ne=ne>>8,u[y++]=ne,ne=ne>>8,u[y++]=ne,y}function G(u,h,y,k,j){ee(h,k,j,u,y,7);let z=Number(h&BigInt(4294967295));u[y+7]=z,z=z>>8,u[y+6]=z,z=z>>8,u[y+5]=z,z=z>>8,u[y+4]=z;let ne=Number(h>>BigInt(32)&BigInt(4294967295));return u[y+3]=ne,ne=ne>>8,u[y+2]=ne,ne=ne>>8,u[y+1]=ne,ne=ne>>8,u[y]=ne,y+8}t.prototype.writeBigUInt64LE=ce(function(u,h=0){return M(this,u,h,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeBigUInt64BE=ce(function(u,h=0){return G(this,u,h,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeIntLE=function(u,h,y,k){if(u=+u,h=h>>>0,!k){let W=Math.pow(2,8*y-1);ie(this,u,h,y,W-1,-W)}let j=0,z=1,ne=0;for(this[h]=u&255;++j<y&&(z*=256);)u<0&&ne===0&&this[h+j-1]!==0&&(ne=1),this[h+j]=(u/z>>0)-ne&255;return h+y},t.prototype.writeIntBE=function(u,h,y,k){if(u=+u,h=h>>>0,!k){let W=Math.pow(2,8*y-1);ie(this,u,h,y,W-1,-W)}let j=y-1,z=1,ne=0;for(this[h+j]=u&255;--j>=0&&(z*=256);)u<0&&ne===0&&this[h+j+1]!==0&&(ne=1),this[h+j]=(u/z>>0)-ne&255;return h+y},t.prototype.writeInt8=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,1,127,-128),u<0&&(u=255+u+1),this[h]=u&255,h+1},t.prototype.writeInt16LE=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,2,32767,-32768),this[h]=u&255,this[h+1]=u>>>8,h+2},t.prototype.writeInt16BE=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,2,32767,-32768),this[h]=u>>>8,this[h+1]=u&255,h+2},t.prototype.writeInt32LE=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,4,2147483647,-2147483648),this[h]=u&255,this[h+1]=u>>>8,this[h+2]=u>>>16,this[h+3]=u>>>24,h+4},t.prototype.writeInt32BE=function(u,h,y){return u=+u,h=h>>>0,y||ie(this,u,h,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4},t.prototype.writeBigInt64LE=ce(function(u,h=0){return M(this,u,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),t.prototype.writeBigInt64BE=ce(function(u,h=0){return G(this,u,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(u,h,y,k,j,z){if(y+k>u.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function $(u,h,y,k,j){return h=+h,y=y>>>0,j||fe(u,h,y,4),l.write(u,h,y,k,23,4),y+4}t.prototype.writeFloatLE=function(u,h,y){return $(this,u,h,!0,y)},t.prototype.writeFloatBE=function(u,h,y){return $(this,u,h,!1,y)};function _e(u,h,y,k,j){return h=+h,y=y>>>0,j||fe(u,h,y,8),l.write(u,h,y,k,52,8),y+8}t.prototype.writeDoubleLE=function(u,h,y){return _e(this,u,h,!0,y)},t.prototype.writeDoubleBE=function(u,h,y){return _e(this,u,h,!1,y)},t.prototype.copy=function(u,h,y,k){if(!t.isBuffer(u))throw new TypeError("argument should be a Buffer");if(y||(y=0),!k&&k!==0&&(k=this.length),h>=u.length&&(h=u.length),h||(h=0),k>0&&k<y&&(k=y),k===y||u.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),u.length-h<k-y&&(k=u.length-h+y);let j=k-y;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,y,k):Uint8Array.prototype.set.call(u,this.subarray(y,k),h),j},t.prototype.fill=function(u,h,y,k){if(typeof u=="string"){if(typeof h=="string"?(k=h,h=0,y=this.length):typeof y=="string"&&(k=y,y=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!t.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(u.length===1){let z=u.charCodeAt(0);(k==="utf8"&&z<128||k==="latin1")&&(u=z)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(h<0||this.length<h||this.length<y)throw new RangeError("Out of range index");if(y<=h)return this;h=h>>>0,y=y===void 0?this.length:y>>>0,u||(u=0);let j;if(typeof u=="number")for(j=h;j<y;++j)this[j]=u;else{let z=t.isBuffer(u)?u:t.from(u,k),ne=z.length;if(ne===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(j=0;j<y-h;++j)this[j+h]=z[j%ne]}return this};let X={};function D(u,h,y){X[u]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}}}D("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(u,h){return`The "${u}" argument must be of type number. Received type ${typeof h}`},TypeError),D("ERR_OUT_OF_RANGE",function(u,h,y){let k=`The value of "${u}" is out of range.`,j=y;return Number.isInteger(y)&&Math.abs(y)>2**32?j=se(String(y)):typeof y=="bigint"&&(j=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(j=se(j)),j+="n"),k+=` It must be ${h}. Received ${j}`,k},RangeError);function se(u){let h="",y=u.length,k=u[0]==="-"?1:0;for(;y>=k+4;y-=3)h=`_${u.slice(y-3,y)}${h}`;return`${u.slice(0,y)}${h}`}function V(u,h,y){re(h,"offset"),(u[h]===void 0||u[h+y]===void 0)&&me(h,u.length-(y+1))}function ee(u,h,y,k,j,z){if(u>y||u<h){let ne=typeof h=="bigint"?"n":"",W;throw h===0||h===BigInt(0)?W=`>= 0${ne} and < 2${ne} ** ${(z+1)*8}${ne}`:W=`>= -(2${ne} ** ${(z+1)*8-1}${ne}) and < 2 ** ${(z+1)*8-1}${ne}`,new X.ERR_OUT_OF_RANGE("value",W,u)}V(k,j,z)}function re(u,h){if(typeof u!="number")throw new X.ERR_INVALID_ARG_TYPE(h,"number",u)}function me(u,h,y){throw Math.floor(u)!==u?(re(u,y),new X.ERR_OUT_OF_RANGE("offset","an integer",u)):h<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,u)}let ue=/[^+/0-9A-Za-z-_]/g;function B(u){if(u=u.split("=")[0],u=u.trim().replace(ue,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function Q(u,h){h=h||1/0;let y,k=u.length,j=null,z=[];for(let ne=0;ne<k;++ne){if(y=u.charCodeAt(ne),y>55295&&y<57344){if(!j){if(y>56319){(h-=3)>-1&&z.push(239,191,189);continue}else if(ne+1===k){(h-=3)>-1&&z.push(239,191,189);continue}j=y;continue}if(y<56320){(h-=3)>-1&&z.push(239,191,189),j=y;continue}y=(j-55296<<10|y-56320)+65536}else j&&(h-=3)>-1&&z.push(239,191,189);if(j=null,y<128){if((h-=1)<0)break;z.push(y)}else if(y<2048){if((h-=2)<0)break;z.push(y>>6|192,y&63|128)}else if(y<65536){if((h-=3)<0)break;z.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((h-=4)<0)break;z.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return z}function oe(u){let h=[];for(let y=0;y<u.length;++y)h.push(u.charCodeAt(y)&255);return h}function ye(u,h){let y,k,j,z=[];for(let ne=0;ne<u.length&&!((h-=2)<0);++ne)y=u.charCodeAt(ne),k=y>>8,j=y%256,z.push(j),z.push(k);return z}function ge(u){return s.toByteArray(B(u))}function we(u,h,y,k){let j;for(j=0;j<k&&!(j+y>=h.length||j>=u.length);++j)h[j+y]=u[j];return j}function J(u,h){return u instanceof h||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===h.name}function ve(u){return u!==u}let Se=function(){let u="0123456789abcdef",h=new Array(256);for(let y=0;y<16;++y){let k=y*16;for(let j=0;j<16;++j)h[k+j]=u[y]+u[j]}return h}();function ce(u){return typeof BigInt>"u"?je:u}function je(){throw new Error("BigInt not supported")}return Mt}var er,Ei,hr,Si,Mt,Ai,Fl=ft(()=>{he(),de(),pe(),er={},Ei=!1,hr={},Si=!1,Mt={},Ai=!1}),et={};ir(et,{Buffer:()=>on,INSPECT_MAX_BYTES:()=>oa,default:()=>wt,kMaxLength:()=>sa});var wt,on,oa,sa,tt=ft(()=>{he(),de(),pe(),Fl(),wt=Dl(),wt.Buffer,wt.SlowBuffer,wt.INSPECT_MAX_BYTES,wt.kMaxLength,on=wt.Buffer,oa=wt.INSPECT_MAX_BYTES,sa=wt.kMaxLength}),de=ft(()=>{tt()}),Ge=be((s,l)=>{he(),de(),pe();var o=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let f="";for(let r=0;r<a.length;r++)f+=`    ${a[r].stack}
`;super(f),this.name="AggregateError",this.errors=a}};l.exports={AggregateError:o,ArrayIsArray(a){return Array.isArray(a)},ArrayPrototypeIncludes(a,f){return a.includes(f)},ArrayPrototypeIndexOf(a,f){return a.indexOf(f)},ArrayPrototypeJoin(a,f){return a.join(f)},ArrayPrototypeMap(a,f){return a.map(f)},ArrayPrototypePop(a,f){return a.pop(f)},ArrayPrototypePush(a,f){return a.push(f)},ArrayPrototypeSlice(a,f,r){return a.slice(f,r)},Error,FunctionPrototypeCall(a,f,...r){return a.call(f,...r)},FunctionPrototypeSymbolHasInstance(a,f){return Function.prototype[Symbol.hasInstance].call(a,f)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(a,f){return Object.defineProperties(a,f)},ObjectDefineProperty(a,f,r){return Object.defineProperty(a,f,r)},ObjectGetOwnPropertyDescriptor(a,f){return Object.getOwnPropertyDescriptor(a,f)},ObjectKeys(a){return Object.keys(a)},ObjectSetPrototypeOf(a,f){return Object.setPrototypeOf(a,f)},Promise,PromisePrototypeCatch(a,f){return a.catch(f)},PromisePrototypeThen(a,f,r){return a.then(f,r)},PromiseReject(a){return Promise.reject(a)},PromiseResolve(a){return Promise.resolve(a)},ReflectApply:Reflect.apply,RegExpPrototypeTest(a,f){return a.test(f)},SafeSet:Set,String,StringPrototypeSlice(a,f,r){return a.slice(f,r)},StringPrototypeToLowerCase(a){return a.toLowerCase()},StringPrototypeToUpperCase(a){return a.toUpperCase()},StringPrototypeTrim(a){return a.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(a,f,r){return a.set(f,r)},Boolean,Uint8Array}}),aa=be((s,l)=>{he(),de(),pe(),l.exports={format(o,...a){return o.replace(/%([sdifj])/g,function(...[f,r]){let t=a.shift();return r==="f"?t.toFixed(6):r==="j"?JSON.stringify(t):r==="s"&&typeof t=="object"?`${t.constructor!==Object?t.constructor.name:""} {}`.trim():t.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),lt=be((s,l)=>{he(),de(),pe();var{format:o,inspect:a}=aa(),{AggregateError:f}=Ge(),r=globalThis.AggregateError||f,t=Symbol("kIsNodeError"),n=["string","function","number","object","Function","Object","boolean","bigint","symbol"],e=/^([A-Z][a-z0-9]*)+$/,i="__node_internal_",c={};function d(g,_){if(!g)throw new c.ERR_INTERNAL_ASSERTION(_)}function p(g){let _="",S=g.length,v=g[0]==="-"?1:0;for(;S>=v+4;S-=3)_=`_${g.slice(S-3,S)}${_}`;return`${g.slice(0,S)}${_}`}function m(g,_,S){if(typeof _=="function")return d(_.length<=S.length,`Code: ${g}; The provided arguments length (${S.length}) does not match the required ones (${_.length}).`),_(...S);let v=(_.match(/%[dfijoOs]/g)||[]).length;return d(v===S.length,`Code: ${g}; The provided arguments length (${S.length}) does not match the required ones (${v}).`),S.length===0?_:o(_,...S)}function b(g,_,S){S||(S=Error);class v extends S{constructor(...P){super(m(g,_,P))}toString(){return`${this.name} [${g}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${g}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=g,v.prototype[t]=!0,c[g]=v}function E(g){let _=i+g.name;return Object.defineProperty(g,"name",{value:_}),g}function w(g,_){if(g&&_&&g!==_){if(Array.isArray(_.errors))return _.errors.push(g),_;let S=new r([_,g],_.message);return S.code=_.code,S}return g||_}var A=class extends Error{constructor(g="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",_);super(g,_),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(g,_,S)=>{d(typeof g=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let v="The ";g.endsWith(" argument")?v+=`${g} `:v+=`"${g}" ${g.includes(".")?"property":"argument"} `,v+="must be ";let R=[],P=[],I=[];for(let T of _)d(typeof T=="string","All expected entries have to be of type string"),n.includes(T)?R.push(T.toLowerCase()):e.test(T)?P.push(T):(d(T!=="object",'The value "object" should be written as "Object"'),I.push(T));if(P.length>0){let T=R.indexOf("object");T!==-1&&(R.splice(R,T,1),P.push("Object"))}if(R.length>0){switch(R.length){case 1:v+=`of type ${R[0]}`;break;case 2:v+=`one of type ${R[0]} or ${R[1]}`;break;default:{let T=R.pop();v+=`one of type ${R.join(", ")}, or ${T}`}}(P.length>0||I.length>0)&&(v+=" or ")}if(P.length>0){switch(P.length){case 1:v+=`an instance of ${P[0]}`;break;case 2:v+=`an instance of ${P[0]} or ${P[1]}`;break;default:{let T=P.pop();v+=`an instance of ${P.join(", ")}, or ${T}`}}I.length>0&&(v+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(v+="an "),v+=`${I[0]}`;break;case 2:v+=`one of ${I[0]} or ${I[1]}`;break;default:{let T=I.pop();v+=`one of ${I.join(", ")}, or ${T}`}}if(S==null)v+=`. Received ${S}`;else if(typeof S=="function"&&S.name)v+=`. Received function ${S.name}`;else if(typeof S=="object"){var O;if((O=S.constructor)!==null&&O!==void 0&&O.name)v+=`. Received an instance of ${S.constructor.name}`;else{let T=a(S,{depth:-1});v+=`. Received ${T}`}}else{let T=a(S,{colors:!1});T.length>25&&(T=`${T.slice(0,25)}...`),v+=`. Received type ${typeof S} (${T})`}return v},TypeError),b("ERR_INVALID_ARG_VALUE",(g,_,S="is invalid")=>{let v=a(_);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${g.includes(".")?"property":"argument"} '${g}' ${S}. Received ${v}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(g,_,S)=>{var v;let R=S!=null&&(v=S.constructor)!==null&&v!==void 0&&v.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${g} to be returned from the "${_}" function but got ${R}.`},TypeError),b("ERR_MISSING_ARGS",(...g)=>{d(g.length>0,"At least one arg needs to be specified");let _,S=g.length;switch(g=(Array.isArray(g)?g:[g]).map(v=>`"${v}"`).join(" or "),S){case 1:_+=`The ${g[0]} argument`;break;case 2:_+=`The ${g[0]} and ${g[1]} arguments`;break;default:{let v=g.pop();_+=`The ${g.join(", ")}, and ${v} arguments`}break}return`${_} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(g,_,S)=>{d(_,'Missing "range" argument');let v;if(Number.isInteger(S)&&Math.abs(S)>2**32)v=p(String(S));else if(typeof S=="bigint"){v=String(S);let R=BigInt(2)**BigInt(32);(S>R||S<-R)&&(v=p(v)),v+="n"}else v=a(S);return`The value of "${g}" is out of range. It must be ${_}. Received ${v}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),l.exports={AbortError:A,aggregateTwoErrors:E(w),hideStackFrames:E,codes:c}}),br=be((s,l)=>{he(),de(),pe();var{AbortController:o,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;l.exports=o,l.exports.AbortSignal=a,l.exports.default=o}),Dt={};ir(Dt,{EventEmitter:()=>la,default:()=>tr,defaultMaxListeners:()=>ua,init:()=>ca,listenerCount:()=>fa,on:()=>ha,once:()=>pa});function Wl(){if(Ii)return pr;Ii=!0;var s=typeof Reflect=="object"?Reflect:null,l=s&&typeof s.apply=="function"?s.apply:function(S,v,R){return Function.prototype.apply.call(S,v,R)},o;s&&typeof s.ownKeys=="function"?o=s.ownKeys:Object.getOwnPropertySymbols?o=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:o=function(S){return Object.getOwnPropertyNames(S)};function a(S){console&&console.warn&&console.warn(S)}var f=Number.isNaN||function(S){return S!==S};function r(){r.init.call(this)}pr=r,pr.once=A,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var t=10;function n(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return t},set:function(S){if(typeof S!="number"||S<0||f(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");t=S}}),r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||f(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function e(S){return S._maxListeners===void 0?r.defaultMaxListeners:S._maxListeners}r.prototype.getMaxListeners=function(){return e(this)},r.prototype.emit=function(S){for(var v=[],R=1;R<arguments.length;R++)v.push(arguments[R]);var P=S==="error",I=this._events;if(I!==void 0)P=P&&I.error===void 0;else if(!P)return!1;if(P){var O;if(v.length>0&&(O=v[0]),O instanceof Error)throw O;var T=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw T.context=O,T}var F=I[S];if(F===void 0)return!1;if(typeof F=="function")l(F,this,v);else for(var x=F.length,q=b(F,x),R=0;R<x;++R)l(q[R],this,v);return!0};function i(S,v,R,P){var I,O,T;if(n(R),O=S._events,O===void 0?(O=S._events=Object.create(null),S._eventsCount=0):(O.newListener!==void 0&&(S.emit("newListener",v,R.listener?R.listener:R),O=S._events),T=O[v]),T===void 0)T=O[v]=R,++S._eventsCount;else if(typeof T=="function"?T=O[v]=P?[R,T]:[T,R]:P?T.unshift(R):T.push(R),I=e(S),I>0&&T.length>I&&!T.warned){T.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=S,F.type=v,F.count=T.length,a(F)}return S}r.prototype.addListener=function(S,v){return i(this,S,v,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(S,v){return i(this,S,v,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(S,v,R){var P={fired:!1,wrapFn:void 0,target:S,type:v,listener:R},I=c.bind(P);return I.listener=R,P.wrapFn=I,I}r.prototype.once=function(S,v){return n(v),this.on(S,d(this,S,v)),this},r.prototype.prependOnceListener=function(S,v){return n(v),this.prependListener(S,d(this,S,v)),this},r.prototype.removeListener=function(S,v){var R,P,I,O,T;if(n(v),P=this._events,P===void 0)return this;if(R=P[S],R===void 0)return this;if(R===v||R.listener===v)--this._eventsCount===0?this._events=Object.create(null):(delete P[S],P.removeListener&&this.emit("removeListener",S,R.listener||v));else if(typeof R!="function"){for(I=-1,O=R.length-1;O>=0;O--)if(R[O]===v||R[O].listener===v){T=R[O].listener,I=O;break}if(I<0)return this;I===0?R.shift():E(R,I),R.length===1&&(P[S]=R[0]),P.removeListener!==void 0&&this.emit("removeListener",S,T||v)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(S){var v,R,P;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[S]),this;if(arguments.length===0){var I=Object.keys(R),O;for(P=0;P<I.length;++P)O=I[P],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=R[S],typeof v=="function")this.removeListener(S,v);else if(v!==void 0)for(P=v.length-1;P>=0;P--)this.removeListener(S,v[P]);return this};function p(S,v,R){var P=S._events;if(P===void 0)return[];var I=P[v];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?w(I):b(I,I.length)}r.prototype.listeners=function(S){return p(this,S,!0)},r.prototype.rawListeners=function(S){return p(this,S,!1)},r.listenerCount=function(S,v){return typeof S.listenerCount=="function"?S.listenerCount(v):m.call(S,v)},r.prototype.listenerCount=m;function m(S){var v=this._events;if(v!==void 0){var R=v[S];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}r.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function b(S,v){for(var R=new Array(v),P=0;P<v;++P)R[P]=S[P];return R}function E(S,v){for(;v+1<S.length;v++)S[v]=S[v+1];S.pop()}function w(S){for(var v=new Array(S.length),R=0;R<v.length;++R)v[R]=S[R].listener||S[R];return v}function A(S,v){return new Promise(function(R,P){function I(T){S.removeListener(v,O),P(T)}function O(){typeof S.removeListener=="function"&&S.removeListener("error",I),R([].slice.call(arguments))}_(S,v,O,{once:!0}),v!=="error"&&g(S,I,{once:!0})})}function g(S,v,R){typeof S.on=="function"&&_(S,"error",v,R)}function _(S,v,R,P){if(typeof S.on=="function")P.once?S.once(v,R):S.on(v,R);else if(typeof S.addEventListener=="function")S.addEventListener(v,function I(O){P.once&&S.removeEventListener(v,I),R(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return pr}var pr,Ii,tr,la,ua,ca,fa,ha,pa,Jt=ft(()=>{he(),de(),pe(),pr={},Ii=!1,tr=Wl(),tr.once,tr.once=function(s,l){return new Promise((o,a)=>{function f(...t){r!==void 0&&s.removeListener("error",r),o(t)}let r;l!=="error"&&(r=t=>{s.removeListener(name,f),a(t)},s.once("error",r)),s.once(l,f)})},tr.on=function(s,l){let o=[],a=[],f=null,r=!1,t={async next(){let i=o.shift();if(i)return createIterResult(i,!1);if(f){let c=Promise.reject(f);return f=null,c}return r?createIterResult(void 0,!0):new Promise((c,d)=>a.push({resolve:c,reject:d}))},async return(){s.removeListener(l,n),s.removeListener("error",e),r=!0;for(let i of a)i.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(i){f=i,s.removeListener(l,n),s.removeListener("error",e)},[Symbol.asyncIterator](){return this}};return s.on(l,n),s.on("error",e),t;function n(...i){let c=a.shift();c?c.resolve(createIterResult(i,!1)):o.push(i)}function e(i){r=!0;let c=a.shift();c?c.reject(i):f=i,t.return()}},{EventEmitter:la,defaultMaxListeners:ua,init:ca,listenerCount:fa,on:ha,once:pa}=tr}),ct=be((s,l)=>{he(),de(),pe();var o=(tt(),qe(et)),{format:a,inspect:f}=aa(),{codes:{ERR_INVALID_ARG_TYPE:r}}=lt(),{kResistStopPropagation:t,AggregateError:n,SymbolDispose:e}=Ge(),i=globalThis.AbortSignal||br().AbortSignal,c=globalThis.AbortController||br().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||o.Blob,m=typeof p<"u"?function(w){return w instanceof p}:function(w){return!1},b=(w,A)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new r(A,"AbortSignal",w)},E=(w,A)=>{if(typeof w!="function")throw new r(A,"Function",w)};l.exports={AggregateError:n,kEmptyObject:Object.freeze({}),once(w){let A=!1;return function(...g){A||(A=!0,w.apply(this,g))}},createDeferredPromise:function(){let w,A;return{promise:new Promise((g,_)=>{w=g,A=_}),resolve:w,reject:A}},promisify(w){return new Promise((A,g)=>{w((_,...S)=>_?g(_):A(...S))})},debuglog(){return function(){}},format:a,inspect:f,types:{isAsyncFunction(w){return w instanceof d},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:m,deprecate(w,A){return w},addAbortListener:(Jt(),qe(Dt)).addAbortListener||function(w,A){if(w===void 0)throw new r("signal","AbortSignal",w);b(w,"signal"),E(A,"listener");let g;return w.aborted?queueMicrotask(()=>A()):(w.addEventListener("abort",A,{__proto__:null,once:!0,[t]:!0}),g=()=>{w.removeEventListener("abort",A)}),{__proto__:null,[e](){var _;(_=g)===null||_===void 0||_()}}},AbortSignalAny:i.any||function(w){if(w.length===1)return w[0];let A=new c,g=()=>A.abort();return w.forEach(_=>{b(_,"signals"),_.addEventListener("abort",g,{once:!0})}),A.signal.addEventListener("abort",()=>{w.forEach(_=>_.removeEventListener("abort",g))},{once:!0}),A.signal}},l.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Er=be((s,l)=>{he(),de(),pe();var{ArrayIsArray:o,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:f,ArrayPrototypeMap:r,NumberIsInteger:t,NumberIsNaN:n,NumberMAX_SAFE_INTEGER:e,NumberMIN_SAFE_INTEGER:i,NumberParseInt:c,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:p,String:m,StringPrototypeToUpperCase:b,StringPrototypeTrim:E}=Ge(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:A,ERR_INVALID_ARG_TYPE:g,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:v}}=lt(),{normalizeEncoding:R}=ct(),{isAsyncFunction:P,isArrayBufferView:I}=ct().types,O={};function T(J){return J===(J|0)}function F(J){return J===J>>>0}var x=/^[0-7]+$/,q="must be a 32-bit unsigned integer or an octal string";function H(J,ve,Se){if(typeof J>"u"&&(J=Se),typeof J=="string"){if(p(x,J)===null)throw new _(ve,J,q);J=c(J,8)}return te(J,ve),J}var U=w((J,ve,Se=i,ce=e)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new S(ve,"an integer",J);if(J<Se||J>ce)throw new S(ve,`>= ${Se} && <= ${ce}`,J)}),ae=w((J,ve,Se=-2147483648,ce=2147483647)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new S(ve,"an integer",J);if(J<Se||J>ce)throw new S(ve,`>= ${Se} && <= ${ce}`,J)}),te=w((J,ve,Se=!1)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new S(ve,"an integer",J);let ce=Se?1:0,je=4294967295;if(J<ce||J>je)throw new S(ve,`>= ${ce} && <= ${je}`,J)});function Z(J,ve){if(typeof J!="string")throw new g(ve,"string",J)}function le(J,ve,Se=void 0,ce){if(typeof J!="number")throw new g(ve,"number",J);if(Se!=null&&J<Se||ce!=null&&J>ce||(Se!=null||ce!=null)&&n(J))throw new S(ve,`${Se!=null?`>= ${Se}`:""}${Se!=null&&ce!=null?" && ":""}${ce!=null?`<= ${ce}`:""}`,J)}var K=w((J,ve,Se)=>{if(!a(Se,J)){let ce="must be one of: "+f(r(Se,je=>typeof je=="string"?`'${je}'`:m(je)),", ");throw new _(ve,J,ce)}});function ie(J,ve){if(typeof J!="boolean")throw new g(ve,"boolean",J)}function M(J,ve,Se){return J==null||!d(J,ve)?Se:J[ve]}var G=w((J,ve,Se=null)=>{let ce=M(Se,"allowArray",!1),je=M(Se,"allowFunction",!1);if(!M(Se,"nullable",!1)&&J===null||!ce&&o(J)||typeof J!="object"&&(!je||typeof J!="function"))throw new g(ve,"Object",J)}),fe=w((J,ve)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new g(ve,"a dictionary",J)}),$=w((J,ve,Se=0)=>{if(!o(J))throw new g(ve,"Array",J);if(J.length<Se){let ce=`must be longer than ${Se}`;throw new _(ve,J,ce)}});function _e(J,ve){$(J,ve);for(let Se=0;Se<J.length;Se++)Z(J[Se],`${ve}[${Se}]`)}function X(J,ve){$(J,ve);for(let Se=0;Se<J.length;Se++)ie(J[Se],`${ve}[${Se}]`)}function D(J,ve){$(J,ve);for(let Se=0;Se<J.length;Se++){let ce=J[Se],je=`${ve}[${Se}]`;if(ce==null)throw new g(je,"AbortSignal",ce);me(ce,je)}}function se(J,ve="signal"){if(Z(J,ve),O[J]===void 0)throw O[b(J)]!==void 0?new v(J+" (signals must use all capital letters)"):new v(J)}var V=w((J,ve="buffer")=>{if(!I(J))throw new g(ve,["Buffer","TypedArray","DataView"],J)});function ee(J,ve){let Se=R(ve),ce=J.length;if(Se==="hex"&&ce%2!==0)throw new _("encoding",ve,`is invalid for data of length ${ce}`)}function re(J,ve="Port",Se=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&E(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Se)throw new A(ve,J,Se);return J|0}var me=w((J,ve)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new g(ve,"AbortSignal",J)}),ue=w((J,ve)=>{if(typeof J!="function")throw new g(ve,"Function",J)}),B=w((J,ve)=>{if(typeof J!="function"||P(J))throw new g(ve,"Function",J)}),Q=w((J,ve)=>{if(J!==void 0)throw new g(ve,"undefined",J)});function oe(J,ve,Se){if(!a(Se,J))throw new g(ve,`('${f(Se,"|")}')`,J)}var ye=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ge(J,ve){if(typeof J>"u"||!p(ye,J))throw new _(ve,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function we(J){if(typeof J=="string")return ge(J,"hints"),J;if(o(J)){let ve=J.length,Se="";if(ve===0)return Se;for(let ce=0;ce<ve;ce++){let je=J[ce];ge(je,"hints"),Se+=je,ce!==ve-1&&(Se+=", ")}return Se}throw new _("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}l.exports={isInt32:T,isUint32:F,parseFileMode:H,validateArray:$,validateStringArray:_e,validateBooleanArray:X,validateAbortSignalArray:D,validateBoolean:ie,validateBuffer:V,validateDictionary:fe,validateEncoding:ee,validateFunction:ue,validateInt32:ae,validateInteger:U,validateNumber:le,validateObject:G,validateOneOf:K,validatePlainFunction:B,validatePort:re,validateSignalName:se,validateString:Z,validateUint32:te,validateUndefined:Q,validateUnion:oe,validateAbortSignal:me,validateLinkHeaderValue:we}}),Xt=be((s,l)=>{he(),de(),pe();var o=l.exports={},a,f;function r(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=r}catch{a=r}try{typeof clearTimeout=="function"?f=clearTimeout:f=t}catch{f=t}})();function n(A){if(a===setTimeout)return setTimeout(A,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(A,0);try{return a(A,0)}catch{try{return a.call(null,A,0)}catch{return a.call(this,A,0)}}}function e(A){if(f===clearTimeout)return clearTimeout(A);if((f===t||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(A);try{return f(A)}catch{try{return f.call(null,A)}catch{return f.call(this,A)}}}var i=[],c=!1,d,p=-1;function m(){!c||!d||(c=!1,d.length?i=d.concat(i):p=-1,i.length&&b())}function b(){if(!c){var A=n(m);c=!0;for(var g=i.length;g;){for(d=i,i=[];++p<g;)d&&d[p].run();p=-1,g=i.length}d=null,c=!1,e(A)}}o.nextTick=function(A){var g=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)g[_-1]=arguments[_];i.push(new E(A,g)),i.length===1&&!c&&n(b)};function E(A,g){this.fun=A,this.array=g}E.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function w(){}o.on=w,o.addListener=w,o.once=w,o.off=w,o.removeListener=w,o.removeAllListeners=w,o.emit=w,o.prependListener=w,o.prependOnceListener=w,o.listeners=function(A){return[]},o.binding=function(A){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(A){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),kt=be((s,l)=>{he(),de(),pe();var{SymbolAsyncIterator:o,SymbolIterator:a,SymbolFor:f}=Ge(),r=f("nodejs.stream.destroyed"),t=f("nodejs.stream.errored"),n=f("nodejs.stream.readable"),e=f("nodejs.stream.writable"),i=f("nodejs.stream.disturbed"),c=f("nodejs.webstream.isClosedPromise"),d=f("nodejs.webstream.controllerErrorFunction");function p(M,G=!1){var fe;return!!(M&&typeof M.pipe=="function"&&typeof M.on=="function"&&(!G||typeof M.pause=="function"&&typeof M.resume=="function")&&(!M._writableState||((fe=M._readableState)===null||fe===void 0?void 0:fe.readable)!==!1)&&(!M._writableState||M._readableState))}function m(M){var G;return!!(M&&typeof M.write=="function"&&typeof M.on=="function"&&(!M._readableState||((G=M._writableState)===null||G===void 0?void 0:G.writable)!==!1))}function b(M){return!!(M&&typeof M.pipe=="function"&&M._readableState&&typeof M.on=="function"&&typeof M.write=="function")}function E(M){return M&&(M._readableState||M._writableState||typeof M.write=="function"&&typeof M.on=="function"||typeof M.pipe=="function"&&typeof M.on=="function")}function w(M){return!!(M&&!E(M)&&typeof M.pipeThrough=="function"&&typeof M.getReader=="function"&&typeof M.cancel=="function")}function A(M){return!!(M&&!E(M)&&typeof M.getWriter=="function"&&typeof M.abort=="function")}function g(M){return!!(M&&!E(M)&&typeof M.readable=="object"&&typeof M.writable=="object")}function _(M){return w(M)||A(M)||g(M)}function S(M,G){return M==null?!1:G===!0?typeof M[o]=="function":G===!1?typeof M[a]=="function":typeof M[o]=="function"||typeof M[a]=="function"}function v(M){if(!E(M))return null;let G=M._writableState,fe=M._readableState,$=G||fe;return!!(M.destroyed||M[r]||$!=null&&$.destroyed)}function R(M){if(!m(M))return null;if(M.writableEnded===!0)return!0;let G=M._writableState;return G!=null&&G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function P(M,G){if(!m(M))return null;if(M.writableFinished===!0)return!0;let fe=M._writableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.finished)!="boolean"?null:!!(fe.finished||G===!1&&fe.ended===!0&&fe.length===0)}function I(M){if(!p(M))return null;if(M.readableEnded===!0)return!0;let G=M._readableState;return!G||G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function O(M,G){if(!p(M))return null;let fe=M._readableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.endEmitted)!="boolean"?null:!!(fe.endEmitted||G===!1&&fe.ended===!0&&fe.length===0)}function T(M){return M&&M[n]!=null?M[n]:typeof(M==null?void 0:M.readable)!="boolean"?null:v(M)?!1:p(M)&&M.readable&&!O(M)}function F(M){return M&&M[e]!=null?M[e]:typeof(M==null?void 0:M.writable)!="boolean"?null:v(M)?!1:m(M)&&M.writable&&!R(M)}function x(M,G){return E(M)?v(M)?!0:!((G==null?void 0:G.readable)!==!1&&T(M)||(G==null?void 0:G.writable)!==!1&&F(M)):null}function q(M){var G,fe;return E(M)?M.writableErrored?M.writableErrored:(G=(fe=M._writableState)===null||fe===void 0?void 0:fe.errored)!==null&&G!==void 0?G:null:null}function H(M){var G,fe;return E(M)?M.readableErrored?M.readableErrored:(G=(fe=M._readableState)===null||fe===void 0?void 0:fe.errored)!==null&&G!==void 0?G:null:null}function U(M){if(!E(M))return null;if(typeof M.closed=="boolean")return M.closed;let G=M._writableState,fe=M._readableState;return typeof(G==null?void 0:G.closed)=="boolean"||typeof(fe==null?void 0:fe.closed)=="boolean"?(G==null?void 0:G.closed)||(fe==null?void 0:fe.closed):typeof M._closed=="boolean"&&ae(M)?M._closed:null}function ae(M){return typeof M._closed=="boolean"&&typeof M._defaultKeepAlive=="boolean"&&typeof M._removedConnection=="boolean"&&typeof M._removedContLen=="boolean"}function te(M){return typeof M._sent100=="boolean"&&ae(M)}function Z(M){var G;return typeof M._consuming=="boolean"&&typeof M._dumped=="boolean"&&((G=M.req)===null||G===void 0?void 0:G.upgradeOrConnect)===void 0}function le(M){if(!E(M))return null;let G=M._writableState,fe=M._readableState,$=G||fe;return!$&&te(M)||!!($&&$.autoDestroy&&$.emitClose&&$.closed===!1)}function K(M){var G;return!!(M&&((G=M[i])!==null&&G!==void 0?G:M.readableDidRead||M.readableAborted))}function ie(M){var G,fe,$,_e,X,D,se,V,ee,re;return!!(M&&((G=(fe=($=(_e=(X=(D=M[t])!==null&&D!==void 0?D:M.readableErrored)!==null&&X!==void 0?X:M.writableErrored)!==null&&_e!==void 0?_e:(se=M._readableState)===null||se===void 0?void 0:se.errorEmitted)!==null&&$!==void 0?$:(V=M._writableState)===null||V===void 0?void 0:V.errorEmitted)!==null&&fe!==void 0?fe:(ee=M._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&G!==void 0?G:!((re=M._writableState)===null||re===void 0)&&re.errored))}l.exports={isDestroyed:v,kIsDestroyed:r,isDisturbed:K,kIsDisturbed:i,isErrored:ie,kIsErrored:t,isReadable:T,kIsReadable:n,kIsClosedPromise:c,kControllerErrorFunction:d,kIsWritable:e,isClosed:U,isDuplexNodeStream:b,isFinished:x,isIterable:S,isReadableNodeStream:p,isReadableStream:w,isReadableEnded:I,isReadableFinished:O,isReadableErrored:H,isNodeStream:E,isWebStream:_,isWritable:F,isWritableNodeStream:m,isWritableStream:A,isWritableEnded:R,isWritableFinished:P,isWritableErrored:q,isServerRequest:Z,isServerResponse:te,willEmitClose:le,isTransformStream:g}}),Ft=be((s,l)=>{he(),de(),pe();var o=Xt(),{AbortError:a,codes:f}=lt(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:t}=f,{kEmptyObject:n,once:e}=ct(),{validateAbortSignal:i,validateFunction:c,validateObject:d,validateBoolean:p}=Er(),{Promise:m,PromisePrototypeThen:b,SymbolDispose:E}=Ge(),{isClosed:w,isReadable:A,isReadableNodeStream:g,isReadableStream:_,isReadableFinished:S,isReadableErrored:v,isWritable:R,isWritableNodeStream:P,isWritableStream:I,isWritableFinished:O,isWritableErrored:T,isNodeStream:F,willEmitClose:x,kIsClosedPromise:q}=kt(),H;function U(K){return K.setHeader&&typeof K.abort=="function"}var ae=()=>{};function te(K,ie,M){var G,fe;if(arguments.length===2?(M=ie,ie=n):ie==null?ie=n:d(ie,"options"),c(M,"callback"),i(ie.signal,"options.signal"),M=e(M),_(K)||I(K))return Z(K,ie,M);if(!F(K))throw new r("stream",["ReadableStream","WritableStream","Stream"],K);let $=(G=ie.readable)!==null&&G!==void 0?G:g(K),_e=(fe=ie.writable)!==null&&fe!==void 0?fe:P(K),X=K._writableState,D=K._readableState,se=()=>{K.writable||re()},V=x(K)&&g(K)===$&&P(K)===_e,ee=O(K,!1),re=()=>{ee=!0,K.destroyed&&(V=!1),!(V&&(!K.readable||$))&&(!$||me)&&M.call(K)},me=S(K,!1),ue=()=>{me=!0,K.destroyed&&(V=!1),!(V&&(!K.writable||_e))&&(!_e||ee)&&M.call(K)},B=J=>{M.call(K,J)},Q=w(K),oe=()=>{Q=!0;let J=T(K)||v(K);if(J&&typeof J!="boolean")return M.call(K,J);if($&&!me&&g(K,!0)&&!S(K,!1))return M.call(K,new t);if(_e&&!ee&&!O(K,!1))return M.call(K,new t);M.call(K)},ye=()=>{Q=!0;let J=T(K)||v(K);if(J&&typeof J!="boolean")return M.call(K,J);M.call(K)},ge=()=>{K.req.on("finish",re)};U(K)?(K.on("complete",re),V||K.on("abort",oe),K.req?ge():K.on("request",ge)):_e&&!X&&(K.on("end",se),K.on("close",se)),!V&&typeof K.aborted=="boolean"&&K.on("aborted",oe),K.on("end",ue),K.on("finish",re),ie.error!==!1&&K.on("error",B),K.on("close",oe),Q?o.nextTick(oe):X!=null&&X.errorEmitted||D!=null&&D.errorEmitted?V||o.nextTick(ye):(!$&&(!V||A(K))&&(ee||R(K)===!1)||!_e&&(!V||R(K))&&(me||A(K)===!1)||D&&K.req&&K.aborted)&&o.nextTick(ye);let we=()=>{M=ae,K.removeListener("aborted",oe),K.removeListener("complete",re),K.removeListener("abort",oe),K.removeListener("request",ge),K.req&&K.req.removeListener("finish",re),K.removeListener("end",se),K.removeListener("close",se),K.removeListener("finish",re),K.removeListener("end",ue),K.removeListener("error",B),K.removeListener("close",oe)};if(ie.signal&&!Q){let J=()=>{let ve=M;we(),ve.call(K,new a(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)o.nextTick(J);else{H=H||ct().addAbortListener;let ve=H(ie.signal,J),Se=M;M=e((...ce)=>{ve[E](),Se.apply(K,ce)})}}return we}function Z(K,ie,M){let G=!1,fe=ae;if(ie.signal)if(fe=()=>{G=!0,M.call(K,new a(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)o.nextTick(fe);else{H=H||ct().addAbortListener;let _e=H(ie.signal,fe),X=M;M=e((...D)=>{_e[E](),X.apply(K,D)})}let $=(..._e)=>{G||o.nextTick(()=>M.apply(K,_e))};return b(K[q].promise,$,$),ae}function le(K,ie){var M;let G=!1;return ie===null&&(ie=n),(M=ie)!==null&&M!==void 0&&M.cleanup&&(p(ie.cleanup,"cleanup"),G=ie.cleanup),new m((fe,$)=>{let _e=te(K,ie,X=>{G&&_e(),X?$(X):fe()})})}l.exports=te,l.exports.finished=le}),or=be((s,l)=>{he(),de(),pe();var o=Xt(),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:f},AbortError:r}=lt(),{Symbol:t}=Ge(),{kIsDestroyed:n,isDestroyed:e,isFinished:i,isServerRequest:c}=kt(),d=t("kDestroy"),p=t("kConstruct");function m(x,q,H){x&&(x.stack,q&&!q.errored&&(q.errored=x),H&&!H.errored&&(H.errored=x))}function b(x,q){let H=this._readableState,U=this._writableState,ae=U||H;return U!=null&&U.destroyed||H!=null&&H.destroyed?(typeof q=="function"&&q(),this):(m(x,U,H),U&&(U.destroyed=!0),H&&(H.destroyed=!0),ae.constructed?E(this,x,q):this.once(d,function(te){E(this,a(te,x),q)}),this)}function E(x,q,H){let U=!1;function ae(te){if(U)return;U=!0;let Z=x._readableState,le=x._writableState;m(te,le,Z),le&&(le.closed=!0),Z&&(Z.closed=!0),typeof H=="function"&&H(te),te?o.nextTick(w,x,te):o.nextTick(A,x)}try{x._destroy(q||null,ae)}catch(te){ae(te)}}function w(x,q){g(x,q),A(x)}function A(x){let q=x._readableState,H=x._writableState;H&&(H.closeEmitted=!0),q&&(q.closeEmitted=!0),(H!=null&&H.emitClose||q!=null&&q.emitClose)&&x.emit("close")}function g(x,q){let H=x._readableState,U=x._writableState;U!=null&&U.errorEmitted||H!=null&&H.errorEmitted||(U&&(U.errorEmitted=!0),H&&(H.errorEmitted=!0),x.emit("error",q))}function _(){let x=this._readableState,q=this._writableState;x&&(x.constructed=!0,x.closed=!1,x.closeEmitted=!1,x.destroyed=!1,x.errored=null,x.errorEmitted=!1,x.reading=!1,x.ended=x.readable===!1,x.endEmitted=x.readable===!1),q&&(q.constructed=!0,q.destroyed=!1,q.closed=!1,q.closeEmitted=!1,q.errored=null,q.errorEmitted=!1,q.finalCalled=!1,q.prefinished=!1,q.ended=q.writable===!1,q.ending=q.writable===!1,q.finished=q.writable===!1)}function S(x,q,H){let U=x._readableState,ae=x._writableState;if(ae!=null&&ae.destroyed||U!=null&&U.destroyed)return this;U!=null&&U.autoDestroy||ae!=null&&ae.autoDestroy?x.destroy(q):q&&(q.stack,ae&&!ae.errored&&(ae.errored=q),U&&!U.errored&&(U.errored=q),H?o.nextTick(g,x,q):g(x,q))}function v(x,q){if(typeof x._construct!="function")return;let H=x._readableState,U=x._writableState;H&&(H.constructed=!1),U&&(U.constructed=!1),x.once(p,q),!(x.listenerCount(p)>1)&&o.nextTick(R,x)}function R(x){let q=!1;function H(U){if(q){S(x,U??new f);return}q=!0;let ae=x._readableState,te=x._writableState,Z=te||ae;ae&&(ae.constructed=!0),te&&(te.constructed=!0),Z.destroyed?x.emit(d,U):U?S(x,U,!0):o.nextTick(P,x)}try{x._construct(U=>{o.nextTick(H,U)})}catch(U){o.nextTick(H,U)}}function P(x){x.emit(p)}function I(x){return(x==null?void 0:x.setHeader)&&typeof x.abort=="function"}function O(x){x.emit("close")}function T(x,q){x.emit("error",q),o.nextTick(O,x)}function F(x,q){!x||e(x)||(!q&&!i(x)&&(q=new r),c(x)?(x.socket=null,x.destroy(q)):I(x)?x.abort():I(x.req)?x.req.abort():typeof x.destroy=="function"?x.destroy(q):typeof x.close=="function"?x.close():q?o.nextTick(T,x,q):o.nextTick(O,x),x.destroyed||(x[n]=!0))}l.exports={construct:v,destroyer:F,destroy:b,undestroy:_,errorOrDestroy:S}}),Eo=be((s,l)=>{he(),de(),pe();var{ArrayIsArray:o,ObjectSetPrototypeOf:a}=Ge(),{EventEmitter:f}=(Jt(),qe(Dt));function r(n){f.call(this,n)}a(r.prototype,f.prototype),a(r,f),r.prototype.pipe=function(n,e){let i=this;function c(A){n.writable&&n.write(A)===!1&&i.pause&&i.pause()}i.on("data",c);function d(){i.readable&&i.resume&&i.resume()}n.on("drain",d),!n._isStdio&&(!e||e.end!==!1)&&(i.on("end",m),i.on("close",b));let p=!1;function m(){p||(p=!0,n.end())}function b(){p||(p=!0,typeof n.destroy=="function"&&n.destroy())}function E(A){w(),f.listenerCount(this,"error")===0&&this.emit("error",A)}t(i,"error",E),t(n,"error",E);function w(){i.removeListener("data",c),n.removeListener("drain",d),i.removeListener("end",m),i.removeListener("close",b),i.removeListener("error",E),n.removeListener("error",E),i.removeListener("end",w),i.removeListener("close",w),n.removeListener("close",w)}return i.on("end",w),i.on("close",w),n.on("close",w),n.emit("pipe",i),n};function t(n,e,i){if(typeof n.prependListener=="function")return n.prependListener(e,i);!n._events||!n._events[e]?n.on(e,i):o(n._events[e])?n._events[e].unshift(i):n._events[e]=[i,n._events[e]]}l.exports={Stream:r,prependListener:t}}),ln=be((s,l)=>{he(),de(),pe();var{SymbolDispose:o}=Ge(),{AbortError:a,codes:f}=lt(),{isNodeStream:r,isWebStream:t,kControllerErrorFunction:n}=kt(),e=Ft(),{ERR_INVALID_ARG_TYPE:i}=f,c,d=(p,m)=>{if(typeof p!="object"||!("aborted"in p))throw new i(m,"AbortSignal",p)};l.exports.addAbortSignal=function(p,m){if(d(p,"signal"),!r(m)&&!t(m))throw new i("stream",["ReadableStream","WritableStream","Stream"],m);return l.exports.addAbortSignalNoValidate(p,m)},l.exports.addAbortSignalNoValidate=function(p,m){if(typeof p!="object"||!("aborted"in p))return m;let b=r(m)?()=>{m.destroy(new a(void 0,{cause:p.reason}))}:()=>{m[n](new a(void 0,{cause:p.reason}))};if(p.aborted)b();else{c=c||ct().addAbortListener;let E=c(p,b);e(m,E[o])}return m}}),ql=be((s,l)=>{he(),de(),pe();var{StringPrototypeSlice:o,SymbolIterator:a,TypedArrayPrototypeSet:f,Uint8Array:r}=Ge(),{Buffer:t}=(tt(),qe(et)),{inspect:n}=ct();l.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let i={data:e,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}unshift(e){let i={data:e,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let i=this.head,c=""+i.data;for(;(i=i.next)!==null;)c+=e+i.data;return c}concat(e){if(this.length===0)return t.alloc(0);let i=t.allocUnsafe(e>>>0),c=this.head,d=0;for(;c;)f(i,c.data,d),d+=c.data.length,c=c.next;return i}consume(e,i){let c=this.head.data;if(e<c.length){let d=c.slice(0,e);return this.head.data=c.slice(e),d}return e===c.length?this.shift():i?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[a](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let i="",c=this.head,d=0;do{let p=c.data;if(e>p.length)i+=p,e-=p.length;else{e===p.length?(i+=p,++d,c.next?this.head=c.next:this.head=this.tail=null):(i+=o(p,0,e),this.head=c,c.data=o(p,e));break}++d}while((c=c.next)!==null);return this.length-=d,i}_getBuffer(e){let i=t.allocUnsafe(e),c=e,d=this.head,p=0;do{let m=d.data;if(e>m.length)f(i,m,c-e),e-=m.length;else{e===m.length?(f(i,m,c-e),++p,d.next?this.head=d.next:this.head=this.tail=null):(f(i,new r(m.buffer,m.byteOffset,e),c-e),this.head=d,d.data=m.slice(e));break}++p}while((d=d.next)!==null);return this.length-=p,i}[Symbol.for("nodejs.util.inspect.custom")](e,i){return n(this,{...i,depth:0,customInspect:!1})}}}),un=be((s,l)=>{he(),de(),pe();var{MathFloor:o,NumberIsInteger:a}=Ge(),{validateInteger:f}=Er(),{ERR_INVALID_ARG_VALUE:r}=lt().codes,t=16*1024,n=16;function e(p,m,b){return p.highWaterMark!=null?p.highWaterMark:m?p[b]:null}function i(p){return p?n:t}function c(p,m){f(m,"value",0),p?n=m:t=m}function d(p,m,b,E){let w=e(m,E,b);if(w!=null){if(!a(w)||w<0){let A=E?`options.${b}`:"options.highWaterMark";throw new r(A,w)}return o(w)}return i(p.objectMode)}l.exports={getHighWaterMark:d,getDefaultHighWaterMark:i,setDefaultHighWaterMark:c}}),$l=be((s,l)=>{he(),de(),pe();var o=(tt(),qe(et)),a=o.Buffer;function f(t,n){for(var e in t)n[e]=t[e]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?l.exports=o:(f(o,s),s.Buffer=r);function r(t,n,e){return a(t,n,e)}r.prototype=Object.create(a.prototype),f(a,r),r.from=function(t,n,e){if(typeof t=="number")throw new TypeError("Argument must not be a number");return a(t,n,e)},r.alloc=function(t,n,e){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=a(t);return n!==void 0?typeof e=="string"?i.fill(n,e):i.fill(n):i.fill(0),i},r.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return a(t)},r.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}}),zl=be(s=>{he(),de(),pe();var l=$l().Buffer,o=l.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(g){if(!g)return"utf8";for(var _;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(_)return;g=(""+g).toLowerCase(),_=!0}}function f(g){var _=a(g);if(typeof _!="string"&&(l.isEncoding===o||!o(g)))throw new Error("Unknown encoding: "+g);return _||g}s.StringDecoder=r;function r(g){this.encoding=f(g);var _;switch(this.encoding){case"utf16le":this.text=p,this.end=m,_=4;break;case"utf8":this.fillLast=i,_=4;break;case"base64":this.text=b,this.end=E,_=3;break;default:this.write=w,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=l.allocUnsafe(_)}r.prototype.write=function(g){if(g.length===0)return"";var _,S;if(this.lastNeed){if(_=this.fillLast(g),_===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<g.length?_?_+this.text(g,S):this.text(g,S):_||""},r.prototype.end=d,r.prototype.text=c,r.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function t(g){return g<=127?0:g>>5===6?2:g>>4===14?3:g>>3===30?4:g>>6===2?-1:-2}function n(g,_,S){var v=_.length-1;if(v<S)return 0;var R=t(_[v]);return R>=0?(R>0&&(g.lastNeed=R-1),R):--v<S||R===-2?0:(R=t(_[v]),R>=0?(R>0&&(g.lastNeed=R-2),R):--v<S||R===-2?0:(R=t(_[v]),R>=0?(R>0&&(R===2?R=0:g.lastNeed=R-3),R):0))}function e(g,_,S){if((_[0]&192)!==128)return g.lastNeed=0,"";if(g.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return g.lastNeed=1,"";if(g.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return g.lastNeed=2,""}}function i(g){var _=this.lastTotal-this.lastNeed,S=e(this,g);if(S!==void 0)return S;if(this.lastNeed<=g.length)return g.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,_,0,g.length),this.lastNeed-=g.length}function c(g,_){var S=n(this,g,_);if(!this.lastNeed)return g.toString("utf8",_);this.lastTotal=S;var v=g.length-(S-this.lastNeed);return g.copy(this.lastChar,0,v),g.toString("utf8",_,v)}function d(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+"":_}function p(g,_){if((g.length-_)%2===0){var S=g.toString("utf16le",_);if(S){var v=S.charCodeAt(S.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",_,g.length-1)}function m(g){var _=g&&g.length?this.write(g):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,S)}return _}function b(g,_){var S=(g.length-_)%3;return S===0?g.toString("base64",_):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",_,g.length-S))}function E(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function w(g){return g.toString(this.encoding)}function A(g){return g&&g.length?this.write(g):""}}),da=be((s,l)=>{he(),de(),pe();var o=Xt(),{PromisePrototypeThen:a,SymbolAsyncIterator:f,SymbolIterator:r}=Ge(),{Buffer:t}=(tt(),qe(et)),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_NULL_VALUES:e}=lt().codes;function i(c,d,p){let m;if(typeof d=="string"||d instanceof t)return new c({objectMode:!0,...p,read(){this.push(d),this.push(null)}});let b;if(d&&d[f])b=!0,m=d[f]();else if(d&&d[r])b=!1,m=d[r]();else throw new n("iterable",["Iterable"],d);let E=new c({objectMode:!0,highWaterMark:1,...p}),w=!1;E._read=function(){w||(w=!0,g())},E._destroy=function(_,S){a(A(_),()=>o.nextTick(S,_),v=>o.nextTick(S,v||_))};async function A(_){let S=_!=null,v=typeof m.throw=="function";if(S&&v){let{value:R,done:P}=await m.throw(_);if(await R,P)return}if(typeof m.return=="function"){let{value:R}=await m.return();await R}}async function g(){for(;;){try{let{value:_,done:S}=b?await m.next():m.next();if(S)E.push(null);else{let v=_&&typeof _.then=="function"?await _:_;if(v===null)throw w=!1,new e;if(E.push(v))continue;w=!1}}catch(_){E.destroy(_)}break}}return E}l.exports=i}),cn=be((s,l)=>{he(),de(),pe();var o=Xt(),{ArrayPrototypeIndexOf:a,NumberIsInteger:f,NumberIsNaN:r,NumberParseInt:t,ObjectDefineProperties:n,ObjectKeys:e,ObjectSetPrototypeOf:i,Promise:c,SafeSet:d,SymbolAsyncDispose:p,SymbolAsyncIterator:m,Symbol:b}=Ge();l.exports=ce,ce.ReadableState=Se;var{EventEmitter:E}=(Jt(),qe(Dt)),{Stream:w,prependListener:A}=Eo(),{Buffer:g}=(tt(),qe(et)),{addAbortSignal:_}=ln(),S=Ft(),v=ct().debuglog("stream",C=>{v=C}),R=ql(),P=or(),{getHighWaterMark:I,getDefaultHighWaterMark:O}=un(),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:F,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_OUT_OF_RANGE:q,ERR_STREAM_PUSH_AFTER_EOF:H,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:U},AbortError:ae}=lt(),{validateObject:te}=Er(),Z=b("kPaused"),{StringDecoder:le}=zl(),K=da();i(ce.prototype,w.prototype),i(ce,w);var ie=()=>{},{errorOrDestroy:M}=P,G=1,fe=2,$=4,_e=8,X=16,D=32,se=64,V=128,ee=256,re=512,me=1024,ue=2048,B=4096,Q=8192,oe=16384,ye=32768,ge=65536,we=1<<17,J=1<<18;function ve(C){return{enumerable:!1,get(){return(this.state&C)!==0},set(N){N?this.state|=C:this.state&=~C}}}n(Se.prototype,{objectMode:ve(G),ended:ve(fe),endEmitted:ve($),reading:ve(_e),constructed:ve(X),sync:ve(D),needReadable:ve(se),emittedReadable:ve(V),readableListening:ve(ee),resumeScheduled:ve(re),errorEmitted:ve(me),emitClose:ve(ue),autoDestroy:ve(B),destroyed:ve(Q),closed:ve(oe),closeEmitted:ve(ye),multiAwaitDrain:ve(ge),readingMore:ve(we),dataEmitted:ve(J)});function Se(C,N,Ee){typeof Ee!="boolean"&&(Ee=N instanceof xt()),this.state=ue|B|X|D,C&&C.objectMode&&(this.state|=G),Ee&&C&&C.readableObjectMode&&(this.state|=G),this.highWaterMark=C?I(this,C,"readableHighWaterMark",Ee):O(!1),this.buffer=new R,this.length=0,this.pipes=[],this.flowing=null,this[Z]=null,C&&C.emitClose===!1&&(this.state&=~ue),C&&C.autoDestroy===!1&&(this.state&=~B),this.errored=null,this.defaultEncoding=C&&C.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,C&&C.encoding&&(this.decoder=new le(C.encoding),this.encoding=C.encoding)}function ce(C){if(!(this instanceof ce))return new ce(C);let N=this instanceof xt();this._readableState=new Se(C,this,N),C&&(typeof C.read=="function"&&(this._read=C.read),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.construct=="function"&&(this._construct=C.construct),C.signal&&!N&&_(C.signal,this)),w.call(this,C),P.construct(this,()=>{this._readableState.needReadable&&W(this,this._readableState)})}ce.prototype.destroy=P.destroy,ce.prototype._undestroy=P.undestroy,ce.prototype._destroy=function(C,N){N(C)},ce.prototype[E.captureRejectionSymbol]=function(C){this.destroy(C)},ce.prototype[p]=function(){let C;return this.destroyed||(C=this.readableEnded?null:new ae,this.destroy(C)),new c((N,Ee)=>S(this,xe=>xe&&xe!==C?Ee(xe):N(null)))},ce.prototype.push=function(C,N){return je(this,C,N,!1)},ce.prototype.unshift=function(C,N){return je(this,C,N,!0)};function je(C,N,Ee,xe){v("readableAddChunk",N);let Oe=C._readableState,Je;if(!(Oe.state&G)&&(typeof N=="string"?(Ee=Ee||Oe.defaultEncoding,Oe.encoding!==Ee&&(xe&&Oe.encoding?N=g.from(N,Ee).toString(Oe.encoding):(N=g.from(N,Ee),Ee=""))):N instanceof g?Ee="":w._isUint8Array(N)?(N=w._uint8ArrayToBuffer(N),Ee=""):N!=null&&(Je=new F("chunk",["string","Buffer","Uint8Array"],N))),Je)M(C,Je);else if(N===null)Oe.state&=~_e,j(C,Oe);else if(Oe.state&G||N&&N.length>0)if(xe)if(Oe.state&$)M(C,new U);else{if(Oe.destroyed||Oe.errored)return!1;u(C,Oe,N,!0)}else if(Oe.ended)M(C,new H);else{if(Oe.destroyed||Oe.errored)return!1;Oe.state&=~_e,Oe.decoder&&!Ee?(N=Oe.decoder.write(N),Oe.objectMode||N.length!==0?u(C,Oe,N,!1):W(C,Oe)):u(C,Oe,N,!1)}else xe||(Oe.state&=~_e,W(C,Oe));return!Oe.ended&&(Oe.length<Oe.highWaterMark||Oe.length===0)}function u(C,N,Ee,xe){N.flowing&&N.length===0&&!N.sync&&C.listenerCount("data")>0?(N.state&ge?N.awaitDrainWriters.clear():N.awaitDrainWriters=null,N.dataEmitted=!0,C.emit("data",Ee)):(N.length+=N.objectMode?1:Ee.length,xe?N.buffer.unshift(Ee):N.buffer.push(Ee),N.state&se&&z(C)),W(C,N)}ce.prototype.isPaused=function(){let C=this._readableState;return C[Z]===!0||C.flowing===!1},ce.prototype.setEncoding=function(C){let N=new le(C);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;let Ee=this._readableState.buffer,xe="";for(let Oe of Ee)xe+=N.write(Oe);return Ee.clear(),xe!==""&&Ee.push(xe),this._readableState.length=xe.length,this};var h=1073741824;function y(C){if(C>h)throw new q("size","<= 1GiB",C);return C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,C++,C}function k(C,N){return C<=0||N.length===0&&N.ended?0:N.state&G?1:r(C)?N.flowing&&N.length?N.buffer.first().length:N.length:C<=N.length?C:N.ended?N.length:0}ce.prototype.read=function(C){v("read",C),C===void 0?C=NaN:f(C)||(C=t(C,10));let N=this._readableState,Ee=C;if(C>N.highWaterMark&&(N.highWaterMark=y(C)),C!==0&&(N.state&=~V),C===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return v("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?Ue(this):z(this),null;if(C=k(C,N),C===0&&N.ended)return N.length===0&&Ue(this),null;let xe=(N.state&se)!==0;if(v("need readable",xe),(N.length===0||N.length-C<N.highWaterMark)&&(xe=!0,v("length less than watermark",xe)),N.ended||N.reading||N.destroyed||N.errored||!N.constructed)xe=!1,v("reading, ended or constructing",xe);else if(xe){v("do read"),N.state|=_e|D,N.length===0&&(N.state|=se);try{this._read(N.highWaterMark)}catch(Je){M(this,Je)}N.state&=~D,N.reading||(C=k(Ee,N))}let Oe;return C>0?Oe=Re(C,N):Oe=null,Oe===null?(N.needReadable=N.length<=N.highWaterMark,C=0):(N.length-=C,N.multiAwaitDrain?N.awaitDrainWriters.clear():N.awaitDrainWriters=null),N.length===0&&(N.ended||(N.needReadable=!0),Ee!==C&&N.ended&&Ue(this)),Oe!==null&&!N.errorEmitted&&!N.closeEmitted&&(N.dataEmitted=!0,this.emit("data",Oe)),Oe};function j(C,N){if(v("onEofChunk"),!N.ended){if(N.decoder){let Ee=N.decoder.end();Ee&&Ee.length&&(N.buffer.push(Ee),N.length+=N.objectMode?1:Ee.length)}N.ended=!0,N.sync?z(C):(N.needReadable=!1,N.emittedReadable=!0,ne(C))}}function z(C){let N=C._readableState;v("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(v("emitReadable",N.flowing),N.emittedReadable=!0,o.nextTick(ne,C))}function ne(C){let N=C._readableState;v("emitReadable_",N.destroyed,N.length,N.ended),!N.destroyed&&!N.errored&&(N.length||N.ended)&&(C.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,Ye(C)}function W(C,N){!N.readingMore&&N.constructed&&(N.readingMore=!0,o.nextTick(Y,C,N))}function Y(C,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){let Ee=N.length;if(v("maybeReadMore read 0"),C.read(0),Ee===N.length)break}N.readingMore=!1}ce.prototype._read=function(C){throw new x("_read()")},ce.prototype.pipe=function(C,N){let Ee=this,xe=this._readableState;xe.pipes.length===1&&(xe.multiAwaitDrain||(xe.multiAwaitDrain=!0,xe.awaitDrainWriters=new d(xe.awaitDrainWriters?[xe.awaitDrainWriters]:[]))),xe.pipes.push(C),v("pipe count=%d opts=%j",xe.pipes.length,N);let Oe=(!N||N.end!==!1)&&C!==o.stdout&&C!==o.stderr?at:qt;xe.endEmitted?o.nextTick(Oe):Ee.once("end",Oe),C.on("unpipe",Je);function Je(gt,bt){v("onunpipe"),gt===Ee&&bt&&bt.hasUnpiped===!1&&(bt.hasUnpiped=!0,ur())}function at(){v("onend"),C.end()}let pt,lr=!1;function ur(){v("cleanup"),C.removeListener("close",dt),C.removeListener("finish",Ct),pt&&C.removeListener("drain",pt),C.removeListener("error",Wt),C.removeListener("unpipe",Je),Ee.removeListener("end",at),Ee.removeListener("end",qt),Ee.removeListener("data",Ar),lr=!0,pt&&xe.awaitDrainWriters&&(!C._writableState||C._writableState.needDrain)&&pt()}function cr(){lr||(xe.pipes.length===1&&xe.pipes[0]===C?(v("false write response, pause",0),xe.awaitDrainWriters=C,xe.multiAwaitDrain=!1):xe.pipes.length>1&&xe.pipes.includes(C)&&(v("false write response, pause",xe.awaitDrainWriters.size),xe.awaitDrainWriters.add(C)),Ee.pause()),pt||(pt=Ae(Ee,C),C.on("drain",pt))}Ee.on("data",Ar);function Ar(gt){v("ondata");let bt=C.write(gt);v("dest.write",bt),bt===!1&&cr()}function Wt(gt){if(v("onerror",gt),qt(),C.removeListener("error",Wt),C.listenerCount("error")===0){let bt=C._writableState||C._readableState;bt&&!bt.errorEmitted?M(C,gt):C.emit("error",gt)}}A(C,"error",Wt);function dt(){C.removeListener("finish",Ct),qt()}C.once("close",dt);function Ct(){v("onfinish"),C.removeListener("close",dt),qt()}C.once("finish",Ct);function qt(){v("unpipe"),Ee.unpipe(C)}return C.emit("pipe",Ee),C.writableNeedDrain===!0?cr():xe.flowing||(v("pipe resume"),Ee.resume()),C};function Ae(C,N){return function(){let Ee=C._readableState;Ee.awaitDrainWriters===N?(v("pipeOnDrain",1),Ee.awaitDrainWriters=null):Ee.multiAwaitDrain&&(v("pipeOnDrain",Ee.awaitDrainWriters.size),Ee.awaitDrainWriters.delete(N)),(!Ee.awaitDrainWriters||Ee.awaitDrainWriters.size===0)&&C.listenerCount("data")&&C.resume()}}ce.prototype.unpipe=function(C){let N=this._readableState,Ee={hasUnpiped:!1};if(N.pipes.length===0)return this;if(!C){let Oe=N.pipes;N.pipes=[],this.pause();for(let Je=0;Je<Oe.length;Je++)Oe[Je].emit("unpipe",this,{hasUnpiped:!1});return this}let xe=a(N.pipes,C);return xe===-1?this:(N.pipes.splice(xe,1),N.pipes.length===0&&this.pause(),C.emit("unpipe",this,Ee),this)},ce.prototype.on=function(C,N){let Ee=w.prototype.on.call(this,C,N),xe=this._readableState;return C==="data"?(xe.readableListening=this.listenerCount("readable")>0,xe.flowing!==!1&&this.resume()):C==="readable"&&!xe.endEmitted&&!xe.readableListening&&(xe.readableListening=xe.needReadable=!0,xe.flowing=!1,xe.emittedReadable=!1,v("on readable",xe.length,xe.reading),xe.length?z(this):xe.reading||o.nextTick(ke,this)),Ee},ce.prototype.addListener=ce.prototype.on,ce.prototype.removeListener=function(C,N){let Ee=w.prototype.removeListener.call(this,C,N);return C==="readable"&&o.nextTick(Te,this),Ee},ce.prototype.off=ce.prototype.removeListener,ce.prototype.removeAllListeners=function(C){let N=w.prototype.removeAllListeners.apply(this,arguments);return(C==="readable"||C===void 0)&&o.nextTick(Te,this),N};function Te(C){let N=C._readableState;N.readableListening=C.listenerCount("readable")>0,N.resumeScheduled&&N[Z]===!1?N.flowing=!0:C.listenerCount("data")>0?C.resume():N.readableListening||(N.flowing=null)}function ke(C){v("readable nexttick read 0"),C.read(0)}ce.prototype.resume=function(){let C=this._readableState;return C.flowing||(v("resume"),C.flowing=!C.readableListening,Be(this,C)),C[Z]=!1,this};function Be(C,N){N.resumeScheduled||(N.resumeScheduled=!0,o.nextTick(Ke,C,N))}function Ke(C,N){v("resume",N.reading),N.reading||C.read(0),N.resumeScheduled=!1,C.emit("resume"),Ye(C),N.flowing&&!N.reading&&C.read(0)}ce.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this};function Ye(C){let N=C._readableState;for(v("flow",N.flowing);N.flowing&&C.read()!==null;);}ce.prototype.wrap=function(C){let N=!1;C.on("data",xe=>{!this.push(xe)&&C.pause&&(N=!0,C.pause())}),C.on("end",()=>{this.push(null)}),C.on("error",xe=>{M(this,xe)}),C.on("close",()=>{this.destroy()}),C.on("destroy",()=>{this.destroy()}),this._read=()=>{N&&C.resume&&(N=!1,C.resume())};let Ee=e(C);for(let xe=1;xe<Ee.length;xe++){let Oe=Ee[xe];this[Oe]===void 0&&typeof C[Oe]=="function"&&(this[Oe]=C[Oe].bind(C))}return this},ce.prototype[m]=function(){return Le(this)},ce.prototype.iterator=function(C){return C!==void 0&&te(C,"options"),Le(this,C)};function Le(C,N){typeof C.read!="function"&&(C=ce.wrap(C,{objectMode:!0}));let Ee=$e(C,N);return Ee.stream=C,Ee}async function*$e(C,N){let Ee=ie;function xe(at){this===C?(Ee(),Ee=ie):Ee=at}C.on("readable",xe);let Oe,Je=S(C,{writable:!1},at=>{Oe=at?T(Oe,at):null,Ee(),Ee=ie});try{for(;;){let at=C.destroyed?null:C.read();if(at!==null)yield at;else{if(Oe)throw Oe;if(Oe===null)return;await new c(xe)}}}catch(at){throw Oe=T(Oe,at),Oe}finally{(Oe||(N==null?void 0:N.destroyOnReturn)!==!1)&&(Oe===void 0||C._readableState.autoDestroy)?P.destroyer(C,null):(C.off("readable",xe),Je())}}n(ce.prototype,{readable:{__proto__:null,get(){let C=this._readableState;return!!C&&C.readable!==!1&&!C.destroyed&&!C.errorEmitted&&!C.endEmitted},set(C){this._readableState&&(this._readableState.readable=!!C)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(C){this._readableState&&(this._readableState.flowing=C)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(C){this._readableState&&(this._readableState.destroyed=C)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),n(Se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z]!==!1},set(C){this[Z]=!!C}}}),ce._fromList=Re;function Re(C,N){if(N.length===0)return null;let Ee;return N.objectMode?Ee=N.buffer.shift():!C||C>=N.length?(N.decoder?Ee=N.buffer.join(""):N.buffer.length===1?Ee=N.buffer.first():Ee=N.buffer.concat(N.length),N.buffer.clear()):Ee=N.buffer.consume(C,N.decoder),Ee}function Ue(C){let N=C._readableState;v("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,o.nextTick(We,N,C))}function We(C,N){if(v("endReadableNT",C.endEmitted,C.length),!C.errored&&!C.closeEmitted&&!C.endEmitted&&C.length===0){if(C.endEmitted=!0,N.emit("end"),N.writable&&N.allowHalfOpen===!1)o.nextTick(Qe,N);else if(C.autoDestroy){let Ee=N._writableState;(!Ee||Ee.autoDestroy&&(Ee.finished||Ee.writable===!1))&&N.destroy()}}}function Qe(C){C.writable&&!C.writableEnded&&!C.destroyed&&C.end()}ce.from=function(C,N){return K(ce,C,N)};var Xe;function ht(){return Xe===void 0&&(Xe={}),Xe}ce.fromWeb=function(C,N){return ht().newStreamReadableFromReadableStream(C,N)},ce.toWeb=function(C,N){return ht().newReadableStreamFromStreamReadable(C,N)},ce.wrap=function(C,N){var Ee,xe;return new ce({objectMode:(Ee=(xe=C.readableObjectMode)!==null&&xe!==void 0?xe:C.objectMode)!==null&&Ee!==void 0?Ee:!0,...N,destroy(Oe,Je){P.destroyer(C,Oe),Je(Oe)}}).wrap(C)}}),So=be((s,l)=>{he(),de(),pe();var o=Xt(),{ArrayPrototypeSlice:a,Error:f,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:t,ObjectDefineProperties:n,ObjectSetPrototypeOf:e,StringPrototypeToLowerCase:i,Symbol:c,SymbolHasInstance:d}=Ge();l.exports=te,te.WritableState=U;var{EventEmitter:p}=(Jt(),qe(Dt)),m=Eo().Stream,{Buffer:b}=(tt(),qe(et)),E=or(),{addAbortSignal:w}=ln(),{getHighWaterMark:A,getDefaultHighWaterMark:g}=un(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:R,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:T,ERR_UNKNOWN_ENCODING:F}=lt().codes,{errorOrDestroy:x}=E;e(te.prototype,m.prototype),e(te,m);function q(){}var H=c("kOnFinished");function U(B,Q,oe){typeof oe!="boolean"&&(oe=Q instanceof xt()),this.objectMode=!!(B&&B.objectMode),oe&&(this.objectMode=this.objectMode||!!(B&&B.writableObjectMode)),this.highWaterMark=B?A(this,B,"writableHighWaterMark",oe):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ye=!!(B&&B.decodeStrings===!1);this.decodeStrings=!ye,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=M.bind(void 0,Q),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ae(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!B||B.emitClose!==!1,this.autoDestroy=!B||B.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[H]=[]}function ae(B){B.buffered=[],B.bufferedIndex=0,B.allBuffers=!0,B.allNoop=!0}U.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},t(U.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function te(B){let Q=this instanceof xt();if(!Q&&!r(te,this))return new te(B);this._writableState=new U(B,this,Q),B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&w(B.signal,this)),m.call(this,B),E.construct(this,()=>{let oe=this._writableState;oe.writing||_e(this,oe),V(this,oe)})}t(te,d,{__proto__:null,value:function(B){return r(this,B)?!0:this!==te?!1:B&&B._writableState instanceof U}}),te.prototype.pipe=function(){x(this,new R)};function Z(B,Q,oe,ye){let ge=B._writableState;if(typeof oe=="function")ye=oe,oe=ge.defaultEncoding;else{if(!oe)oe=ge.defaultEncoding;else if(oe!=="buffer"&&!b.isEncoding(oe))throw new F(oe);typeof ye!="function"&&(ye=q)}if(Q===null)throw new O;if(!ge.objectMode)if(typeof Q=="string")ge.decodeStrings!==!1&&(Q=b.from(Q,oe),oe="buffer");else if(Q instanceof b)oe="buffer";else if(m._isUint8Array(Q))Q=m._uint8ArrayToBuffer(Q),oe="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],Q);let we;return ge.ending?we=new T:ge.destroyed&&(we=new P("write")),we?(o.nextTick(ye,we),x(B,we,!0),we):(ge.pendingcb++,le(B,ge,Q,oe,ye))}te.prototype.write=function(B,Q,oe){return Z(this,B,Q,oe)===!0},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){let B=this._writableState;B.corked&&(B.corked--,B.writing||_e(this,B))},te.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=i(B)),!b.isEncoding(B))throw new F(B);return this._writableState.defaultEncoding=B,this};function le(B,Q,oe,ye,ge){let we=Q.objectMode?1:oe.length;Q.length+=we;let J=Q.length<Q.highWaterMark;return J||(Q.needDrain=!0),Q.writing||Q.corked||Q.errored||!Q.constructed?(Q.buffered.push({chunk:oe,encoding:ye,callback:ge}),Q.allBuffers&&ye!=="buffer"&&(Q.allBuffers=!1),Q.allNoop&&ge!==q&&(Q.allNoop=!1)):(Q.writelen=we,Q.writecb=ge,Q.writing=!0,Q.sync=!0,B._write(oe,ye,Q.onwrite),Q.sync=!1),J&&!Q.errored&&!Q.destroyed}function K(B,Q,oe,ye,ge,we,J){Q.writelen=ye,Q.writecb=J,Q.writing=!0,Q.sync=!0,Q.destroyed?Q.onwrite(new P("write")):oe?B._writev(ge,Q.onwrite):B._write(ge,we,Q.onwrite),Q.sync=!1}function ie(B,Q,oe,ye){--Q.pendingcb,ye(oe),$(Q),x(B,oe)}function M(B,Q){let oe=B._writableState,ye=oe.sync,ge=oe.writecb;if(typeof ge!="function"){x(B,new v);return}oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0,Q?(Q.stack,oe.errored||(oe.errored=Q),B._readableState&&!B._readableState.errored&&(B._readableState.errored=Q),ye?o.nextTick(ie,B,oe,Q,ge):ie(B,oe,Q,ge)):(oe.buffered.length>oe.bufferedIndex&&_e(B,oe),ye?oe.afterWriteTickInfo!==null&&oe.afterWriteTickInfo.cb===ge?oe.afterWriteTickInfo.count++:(oe.afterWriteTickInfo={count:1,cb:ge,stream:B,state:oe},o.nextTick(G,oe.afterWriteTickInfo)):fe(B,oe,1,ge))}function G({stream:B,state:Q,count:oe,cb:ye}){return Q.afterWriteTickInfo=null,fe(B,Q,oe,ye)}function fe(B,Q,oe,ye){for(!Q.ending&&!B.destroyed&&Q.length===0&&Q.needDrain&&(Q.needDrain=!1,B.emit("drain"));oe-- >0;)Q.pendingcb--,ye();Q.destroyed&&$(Q),V(B,Q)}function $(B){if(B.writing)return;for(let ge=B.bufferedIndex;ge<B.buffered.length;++ge){var Q;let{chunk:we,callback:J}=B.buffered[ge],ve=B.objectMode?1:we.length;B.length-=ve,J((Q=B.errored)!==null&&Q!==void 0?Q:new P("write"))}let oe=B[H].splice(0);for(let ge=0;ge<oe.length;ge++){var ye;oe[ge]((ye=B.errored)!==null&&ye!==void 0?ye:new P("end"))}ae(B)}function _e(B,Q){if(Q.corked||Q.bufferProcessing||Q.destroyed||!Q.constructed)return;let{buffered:oe,bufferedIndex:ye,objectMode:ge}=Q,we=oe.length-ye;if(!we)return;let J=ye;if(Q.bufferProcessing=!0,we>1&&B._writev){Q.pendingcb-=we-1;let ve=Q.allNoop?q:ce=>{for(let je=J;je<oe.length;++je)oe[je].callback(ce)},Se=Q.allNoop&&J===0?oe:a(oe,J);Se.allBuffers=Q.allBuffers,K(B,Q,!0,Q.length,Se,"",ve),ae(Q)}else{do{let{chunk:ve,encoding:Se,callback:ce}=oe[J];oe[J++]=null;let je=ge?1:ve.length;K(B,Q,!1,je,ve,Se,ce)}while(J<oe.length&&!Q.writing);J===oe.length?ae(Q):J>256?(oe.splice(0,J),Q.bufferedIndex=0):Q.bufferedIndex=J}Q.bufferProcessing=!1}te.prototype._write=function(B,Q,oe){if(this._writev)this._writev([{chunk:B,encoding:Q}],oe);else throw new S("_write()")},te.prototype._writev=null,te.prototype.end=function(B,Q,oe){let ye=this._writableState;typeof B=="function"?(oe=B,B=null,Q=null):typeof Q=="function"&&(oe=Q,Q=null);let ge;if(B!=null){let we=Z(this,B,Q);we instanceof f&&(ge=we)}return ye.corked&&(ye.corked=1,this.uncork()),ge||(!ye.errored&&!ye.ending?(ye.ending=!0,V(this,ye,!0),ye.ended=!0):ye.finished?ge=new I("end"):ye.destroyed&&(ge=new P("end"))),typeof oe=="function"&&(ge||ye.finished?o.nextTick(oe,ge):ye[H].push(oe)),this};function X(B){return B.ending&&!B.destroyed&&B.constructed&&B.length===0&&!B.errored&&B.buffered.length===0&&!B.finished&&!B.writing&&!B.errorEmitted&&!B.closeEmitted}function D(B,Q){let oe=!1;function ye(ge){if(oe){x(B,ge??v());return}if(oe=!0,Q.pendingcb--,ge){let we=Q[H].splice(0);for(let J=0;J<we.length;J++)we[J](ge);x(B,ge,Q.sync)}else X(Q)&&(Q.prefinished=!0,B.emit("prefinish"),Q.pendingcb++,o.nextTick(ee,B,Q))}Q.sync=!0,Q.pendingcb++;try{B._final(ye)}catch(ge){ye(ge)}Q.sync=!1}function se(B,Q){!Q.prefinished&&!Q.finalCalled&&(typeof B._final=="function"&&!Q.destroyed?(Q.finalCalled=!0,D(B,Q)):(Q.prefinished=!0,B.emit("prefinish")))}function V(B,Q,oe){X(Q)&&(se(B,Q),Q.pendingcb===0&&(oe?(Q.pendingcb++,o.nextTick((ye,ge)=>{X(ge)?ee(ye,ge):ge.pendingcb--},B,Q)):X(Q)&&(Q.pendingcb++,ee(B,Q))))}function ee(B,Q){Q.pendingcb--,Q.finished=!0;let oe=Q[H].splice(0);for(let ye=0;ye<oe.length;ye++)oe[ye]();if(B.emit("finish"),Q.autoDestroy){let ye=B._readableState;(!ye||ye.autoDestroy&&(ye.endEmitted||ye.readable===!1))&&B.destroy()}}n(te.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(B){this._writableState&&(this._writableState.destroyed=B)}},writable:{__proto__:null,get(){let B=this._writableState;return!!B&&B.writable!==!1&&!B.destroyed&&!B.errored&&!B.ending&&!B.ended},set(B){this._writableState&&(this._writableState.writable=!!B)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let B=this._writableState;return B?!B.destroyed&&!B.ending&&B.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var re=E.destroy;te.prototype.destroy=function(B,Q){let oe=this._writableState;return!oe.destroyed&&(oe.bufferedIndex<oe.buffered.length||oe[H].length)&&o.nextTick($,oe),re.call(this,B,Q),this},te.prototype._undestroy=E.undestroy,te.prototype._destroy=function(B,Q){Q(B)},te.prototype[p.captureRejectionSymbol]=function(B){this.destroy(B)};var me;function ue(){return me===void 0&&(me={}),me}te.fromWeb=function(B,Q){return ue().newStreamWritableFromWritableStream(B,Q)},te.toWeb=function(B){return ue().newWritableStreamFromStreamWritable(B)}}),Hl=be((s,l)=>{he(),de(),pe();var o=Xt(),a=(tt(),qe(et)),{isReadable:f,isWritable:r,isIterable:t,isNodeStream:n,isReadableNodeStream:e,isWritableNodeStream:i,isDuplexNodeStream:c,isReadableStream:d,isWritableStream:p}=kt(),m=Ft(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:E,ERR_INVALID_RETURN_VALUE:w}}=lt(),{destroyer:A}=or(),g=xt(),_=cn(),S=So(),{createDeferredPromise:v}=ct(),R=da(),P=globalThis.Blob||a.Blob,I=typeof P<"u"?function(H){return H instanceof P}:function(H){return!1},O=globalThis.AbortController||br().AbortController,{FunctionPrototypeCall:T}=Ge(),F=class extends g{constructor(H){super(H),(H==null?void 0:H.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(H==null?void 0:H.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};l.exports=function H(U,ae){if(c(U))return U;if(e(U))return q({readable:U});if(i(U))return q({writable:U});if(n(U))return q({writable:!1,readable:!1});if(d(U))return q({readable:_.fromWeb(U)});if(p(U))return q({writable:S.fromWeb(U)});if(typeof U=="function"){let{value:Z,write:le,final:K,destroy:ie}=x(U);if(t(Z))return R(F,Z,{objectMode:!0,write:le,final:K,destroy:ie});let M=Z==null?void 0:Z.then;if(typeof M=="function"){let G,fe=T(M,Z,$=>{if($!=null)throw new w("nully","body",$)},$=>{A(G,$)});return G=new F({objectMode:!0,readable:!1,write:le,final($){K(async()=>{try{await fe,o.nextTick($,null)}catch(_e){o.nextTick($,_e)}})},destroy:ie})}throw new w("Iterable, AsyncIterable or AsyncFunction",ae,Z)}if(I(U))return H(U.arrayBuffer());if(t(U))return R(F,U,{objectMode:!0,writable:!1});if(d(U==null?void 0:U.readable)&&p(U==null?void 0:U.writable))return F.fromWeb(U);if(typeof(U==null?void 0:U.writable)=="object"||typeof(U==null?void 0:U.readable)=="object"){let Z=U!=null&&U.readable?e(U==null?void 0:U.readable)?U==null?void 0:U.readable:H(U.readable):void 0,le=U!=null&&U.writable?i(U==null?void 0:U.writable)?U==null?void 0:U.writable:H(U.writable):void 0;return q({readable:Z,writable:le})}let te=U==null?void 0:U.then;if(typeof te=="function"){let Z;return T(te,U,le=>{le!=null&&Z.push(le),Z.push(null)},le=>{A(Z,le)}),Z=new F({objectMode:!0,writable:!1,read(){}})}throw new E(ae,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],U)};function x(H){let{promise:U,resolve:ae}=v(),te=new O,Z=te.signal;return{value:H(async function*(){for(;;){let le=U;U=null;let{chunk:K,done:ie,cb:M}=await le;if(o.nextTick(M),ie)return;if(Z.aborted)throw new b(void 0,{cause:Z.reason});({promise:U,resolve:ae}=v()),yield K}}(),{signal:Z}),write(le,K,ie){let M=ae;ae=null,M({chunk:le,done:!1,cb:ie})},final(le){let K=ae;ae=null,K({done:!0,cb:le})},destroy(le,K){te.abort(),K(le)}}}function q(H){let U=H.readable&&typeof H.readable.read!="function"?_.wrap(H.readable):H.readable,ae=H.writable,te=!!f(U),Z=!!r(ae),le,K,ie,M,G;function fe($){let _e=M;M=null,_e?_e($):$&&G.destroy($)}return G=new F({readableObjectMode:!!(U!=null&&U.readableObjectMode),writableObjectMode:!!(ae!=null&&ae.writableObjectMode),readable:te,writable:Z}),Z&&(m(ae,$=>{Z=!1,$&&A(U,$),fe($)}),G._write=function($,_e,X){ae.write($,_e)?X():le=X},G._final=function($){ae.end(),K=$},ae.on("drain",function(){if(le){let $=le;le=null,$()}}),ae.on("finish",function(){if(K){let $=K;K=null,$()}})),te&&(m(U,$=>{te=!1,$&&A(U,$),fe($)}),U.on("readable",function(){if(ie){let $=ie;ie=null,$()}}),U.on("end",function(){G.push(null)}),G._read=function(){for(;;){let $=U.read();if($===null){ie=G._read;return}if(!G.push($))return}}),G._destroy=function($,_e){!$&&M!==null&&($=new b),ie=null,le=null,K=null,M===null?_e($):(M=_e,A(ae,$),A(U,$))},G}}),xt=be((s,l)=>{he(),de(),pe();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:f,ObjectSetPrototypeOf:r}=Ge();l.exports=e;var t=cn(),n=So();r(e.prototype,t.prototype),r(e,t);{let p=f(n.prototype);for(let m=0;m<p.length;m++){let b=p[m];e.prototype[b]||(e.prototype[b]=n.prototype[b])}}function e(p){if(!(this instanceof e))return new e(p);t.call(this,p),n.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(e.prototype,{writable:{__proto__:null,...a(n.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(n.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(n.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(n.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(n.prototype,"writableLength")},writableFinished:{__proto__:null,...a(n.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(n.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(n.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(n.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var i;function c(){return i===void 0&&(i={}),i}e.fromWeb=function(p,m){return c().newStreamDuplexFromReadableWritablePair(p,m)},e.toWeb=function(p){return c().newReadableWritablePairFromDuplex(p)};var d;e.from=function(p){return d||(d=Hl()),d(p,"body")}}),ga=be((s,l)=>{he(),de(),pe();var{ObjectSetPrototypeOf:o,Symbol:a}=Ge();l.exports=e;var{ERR_METHOD_NOT_IMPLEMENTED:f}=lt().codes,r=xt(),{getHighWaterMark:t}=un();o(e.prototype,r.prototype),o(e,r);var n=a("kCallback");function e(d){if(!(this instanceof e))return new e(d);let p=d?t(this,d,"readableHighWaterMark",!0):null;p===0&&(d={...d,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:d.writableHighWaterMark||0}),r.call(this,d),this._readableState.sync=!1,this[n]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",c)}function i(d){typeof this._flush=="function"&&!this.destroyed?this._flush((p,m)=>{if(p){d?d(p):this.destroy(p);return}m!=null&&this.push(m),this.push(null),d&&d()}):(this.push(null),d&&d())}function c(){this._final!==i&&i.call(this)}e.prototype._final=i,e.prototype._transform=function(d,p,m){throw new f("_transform()")},e.prototype._write=function(d,p,m){let b=this._readableState,E=this._writableState,w=b.length;this._transform(d,p,(A,g)=>{if(A){m(A);return}g!=null&&this.push(g),E.ended||w===b.length||b.length<b.highWaterMark?m():this[n]=m})},e.prototype._read=function(){if(this[n]){let d=this[n];this[n]=null,d()}}}),ya=be((s,l)=>{he(),de(),pe();var{ObjectSetPrototypeOf:o}=Ge();l.exports=f;var a=ga();o(f.prototype,a.prototype),o(f,a);function f(r){if(!(this instanceof f))return new f(r);a.call(this,r)}f.prototype._transform=function(r,t,n){n(null,r)}}),Ao=be((s,l)=>{he(),de(),pe();var o=Xt(),{ArrayIsArray:a,Promise:f,SymbolAsyncIterator:r,SymbolDispose:t}=Ge(),n=Ft(),{once:e}=ct(),i=or(),c=xt(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:E,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:A}=lt(),{validateFunction:g,validateAbortSignal:_}=Er(),{isIterable:S,isReadable:v,isReadableNodeStream:R,isNodeStream:P,isTransformStream:I,isWebStream:O,isReadableStream:T,isReadableFinished:F}=kt(),x=globalThis.AbortController||br().AbortController,q,H,U;function ae($,_e,X){let D=!1;$.on("close",()=>{D=!0});let se=n($,{readable:_e,writable:X},V=>{D=!V});return{destroy:V=>{D||(D=!0,i.destroyer($,V||new E("pipe")))},cleanup:se}}function te($){return g($[$.length-1],"streams[stream.length - 1]"),$.pop()}function Z($){if(S($))return $;if(R($))return le($);throw new p("val",["Readable","Iterable","AsyncIterable"],$)}async function*le($){H||(H=cn()),yield*H.prototype[r].call($)}async function K($,_e,X,{end:D}){let se,V=null,ee=ue=>{if(ue&&(se=ue),V){let B=V;V=null,B()}},re=()=>new f((ue,B)=>{se?B(se):V=()=>{se?B(se):ue()}});_e.on("drain",ee);let me=n(_e,{readable:!1},ee);try{_e.writableNeedDrain&&await re();for await(let ue of $)_e.write(ue)||await re();D&&(_e.end(),await re()),X()}catch(ue){X(se!==ue?d(se,ue):ue)}finally{me(),_e.off("drain",ee)}}async function ie($,_e,X,{end:D}){I(_e)&&(_e=_e.writable);let se=_e.getWriter();try{for await(let V of $)await se.ready,se.write(V).catch(()=>{});await se.ready,D&&await se.close(),X()}catch(V){try{await se.abort(V),X(V)}catch(ee){X(ee)}}}function M(...$){return G($,e(te($)))}function G($,_e,X){if($.length===1&&a($[0])&&($=$[0]),$.length<2)throw new b("streams");let D=new x,se=D.signal,V=X==null?void 0:X.signal,ee=[];_(V,"options.signal");function re(){ge(new A)}U=U||ct().addAbortListener;let me;V&&(me=U(V,re));let ue,B,Q=[],oe=0;function ye(Se){ge(Se,--oe===0)}function ge(Se,ce){var je;if(Se&&(!ue||ue.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ue=Se),!(!ue&&!ce)){for(;Q.length;)Q.shift()(ue);(je=me)===null||je===void 0||je[t](),D.abort(),ce&&(ue||ee.forEach(u=>u()),o.nextTick(_e,ue,B))}}let we;for(let Se=0;Se<$.length;Se++){let ce=$[Se],je=Se<$.length-1,u=Se>0,h=je||(X==null?void 0:X.end)!==!1,y=Se===$.length-1;if(P(ce)){let k=function(j){j&&j.name!=="AbortError"&&j.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ye(j)};if(h){let{destroy:j,cleanup:z}=ae(ce,je,u);Q.push(j),v(ce)&&y&&ee.push(z)}ce.on("error",k),v(ce)&&y&&ee.push(()=>{ce.removeListener("error",k)})}if(Se===0)if(typeof ce=="function"){if(we=ce({signal:se}),!S(we))throw new m("Iterable, AsyncIterable or Stream","source",we)}else S(ce)||R(ce)||I(ce)?we=ce:we=c.from(ce);else if(typeof ce=="function"){if(I(we)){var J;we=Z((J=we)===null||J===void 0?void 0:J.readable)}else we=Z(we);if(we=ce(we,{signal:se}),je){if(!S(we,!0))throw new m("AsyncIterable",`transform[${Se-1}]`,we)}else{var ve;q||(q=ya());let k=new q({objectMode:!0}),j=(ve=we)===null||ve===void 0?void 0:ve.then;if(typeof j=="function")oe++,j.call(we,W=>{B=W,W!=null&&k.write(W),h&&k.end(),o.nextTick(ye)},W=>{k.destroy(W),o.nextTick(ye,W)});else if(S(we,!0))oe++,K(we,k,ye,{end:h});else if(T(we)||I(we)){let W=we.readable||we;oe++,K(W,k,ye,{end:h})}else throw new m("AsyncIterable or Promise","destination",we);we=k;let{destroy:z,cleanup:ne}=ae(we,!1,!0);Q.push(z),y&&ee.push(ne)}}else if(P(ce)){if(R(we)){oe+=2;let k=fe(we,ce,ye,{end:h});v(ce)&&y&&ee.push(k)}else if(I(we)||T(we)){let k=we.readable||we;oe++,K(k,ce,ye,{end:h})}else if(S(we))oe++,K(we,ce,ye,{end:h});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],we);we=ce}else if(O(ce)){if(R(we))oe++,ie(Z(we),ce,ye,{end:h});else if(T(we)||S(we))oe++,ie(we,ce,ye,{end:h});else if(I(we))oe++,ie(we.readable,ce,ye,{end:h});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],we);we=ce}else we=c.from(ce)}return(se!=null&&se.aborted||V!=null&&V.aborted)&&o.nextTick(re),we}function fe($,_e,X,{end:D}){let se=!1;if(_e.on("close",()=>{se||X(new w)}),$.pipe(_e,{end:!1}),D){let V=function(){se=!0,_e.end()};F($)?o.nextTick(V):$.once("end",V)}else X();return n($,{readable:!0,writable:!1},V=>{let ee=$._readableState;V&&V.code==="ERR_STREAM_PREMATURE_CLOSE"&&ee&&ee.ended&&!ee.errored&&!ee.errorEmitted?$.once("end",X).once("error",X):X(V)}),n(_e,{readable:!1,writable:!0},X)}l.exports={pipelineImpl:G,pipeline:M}}),ma=be((s,l)=>{he(),de(),pe();var{pipeline:o}=Ao(),a=xt(),{destroyer:f}=or(),{isNodeStream:r,isReadable:t,isWritable:n,isWebStream:e,isTransformStream:i,isWritableStream:c,isReadableStream:d}=kt(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:b}}=lt(),E=Ft();l.exports=function(...w){if(w.length===0)throw new b("streams");if(w.length===1)return a.from(w[0]);let A=[...w];if(typeof w[0]=="function"&&(w[0]=a.from(w[0])),typeof w[w.length-1]=="function"){let x=w.length-1;w[x]=a.from(w[x])}for(let x=0;x<w.length;++x)if(!(!r(w[x])&&!e(w[x]))){if(x<w.length-1&&!(t(w[x])||d(w[x])||i(w[x])))throw new m(`streams[${x}]`,A[x],"must be readable");if(x>0&&!(n(w[x])||c(w[x])||i(w[x])))throw new m(`streams[${x}]`,A[x],"must be writable")}let g,_,S,v,R;function P(x){let q=v;v=null,q?q(x):x?R.destroy(x):!F&&!T&&R.destroy()}let I=w[0],O=o(w,P),T=!!(n(I)||c(I)||i(I)),F=!!(t(O)||d(O)||i(O));if(R=new a({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(O!=null&&O.readableObjectMode),writable:T,readable:F}),T){if(r(I))R._write=function(q,H,U){I.write(q,H)?U():g=U},R._final=function(q){I.end(),_=q},I.on("drain",function(){if(g){let q=g;g=null,q()}});else if(e(I)){let q=(i(I)?I.writable:I).getWriter();R._write=async function(H,U,ae){try{await q.ready,q.write(H).catch(()=>{}),ae()}catch(te){ae(te)}},R._final=async function(H){try{await q.ready,q.close().catch(()=>{}),_=H}catch(U){H(U)}}}let x=i(O)?O.readable:O;E(x,()=>{if(_){let q=_;_=null,q()}})}if(F){if(r(O))O.on("readable",function(){if(S){let x=S;S=null,x()}}),O.on("end",function(){R.push(null)}),R._read=function(){for(;;){let x=O.read();if(x===null){S=R._read;return}if(!R.push(x))return}};else if(e(O)){let x=(i(O)?O.readable:O).getReader();R._read=async function(){for(;;)try{let{value:q,done:H}=await x.read();if(!R.push(q))return;if(H){R.push(null);return}}catch{return}}}}return R._destroy=function(x,q){!x&&v!==null&&(x=new p),S=null,g=null,_=null,v===null?q(x):(v=q,r(O)&&f(O,x))},R}}),Kl=be((s,l)=>{he(),de(),pe();var o=globalThis.AbortController||br().AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:f,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:t},AbortError:n}=lt(),{validateAbortSignal:e,validateInteger:i,validateObject:c}=Er(),d=Ge().Symbol("kWeak"),p=Ge().Symbol("kResistStopPropagation"),{finished:m}=Ft(),b=ma(),{addAbortSignalNoValidate:E}=ln(),{isWritable:w,isNodeStream:A}=kt(),{deprecate:g}=ct(),{ArrayPrototypePush:_,Boolean:S,MathFloor:v,Number:R,NumberIsNaN:P,Promise:I,PromiseReject:O,PromiseResolve:T,PromisePrototypeThen:F,Symbol:x}=Ge(),q=x("kEmpty"),H=x("kEof");function U(V,ee){if(ee!=null&&c(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),A(V)&&!w(V))throw new a("stream",V,"must be writable");let re=b(this,V);return ee!=null&&ee.signal&&E(ee.signal,re),re}function ae(V,ee){if(typeof V!="function")throw new f("fn",["Function","AsyncFunction"],V);ee!=null&&c(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal");let re=1;(ee==null?void 0:ee.concurrency)!=null&&(re=v(ee.concurrency));let me=re-1;return(ee==null?void 0:ee.highWaterMark)!=null&&(me=v(ee.highWaterMark)),i(re,"options.concurrency",1),i(me,"options.highWaterMark",0),me+=re,(async function*(){let ue=ct().AbortSignalAny([ee==null?void 0:ee.signal].filter(S)),B=this,Q=[],oe={signal:ue},ye,ge,we=!1,J=0;function ve(){we=!0,Se()}function Se(){J-=1,ce()}function ce(){ge&&!we&&J<re&&Q.length<me&&(ge(),ge=null)}async function je(){try{for await(let u of B){if(we)return;if(ue.aborted)throw new n;try{if(u=V(u,oe),u===q)continue;u=T(u)}catch(h){u=O(h)}J+=1,F(u,Se,ve),Q.push(u),ye&&(ye(),ye=null),!we&&(Q.length>=me||J>=re)&&await new I(h=>{ge=h})}Q.push(H)}catch(u){let h=O(u);F(h,Se,ve),Q.push(h)}finally{we=!0,ye&&(ye(),ye=null)}}je();try{for(;;){for(;Q.length>0;){let u=await Q[0];if(u===H)return;if(ue.aborted)throw new n;u!==q&&(yield u),Q.shift(),ce()}await new I(u=>{ye=u})}}finally{we=!0,ge&&(ge(),ge=null)}}).call(this)}function te(V=void 0){return V!=null&&c(V,"options"),(V==null?void 0:V.signal)!=null&&e(V.signal,"options.signal"),(async function*(){let ee=0;for await(let me of this){var re;if(V!=null&&(re=V.signal)!==null&&re!==void 0&&re.aborted)throw new n({cause:V.signal.reason});yield[ee++,me]}}).call(this)}async function Z(V,ee=void 0){for await(let re of M.call(this,V,ee))return!0;return!1}async function le(V,ee=void 0){if(typeof V!="function")throw new f("fn",["Function","AsyncFunction"],V);return!await Z.call(this,async(...re)=>!await V(...re),ee)}async function K(V,ee){for await(let re of M.call(this,V,ee))return re}async function ie(V,ee){if(typeof V!="function")throw new f("fn",["Function","AsyncFunction"],V);async function re(me,ue){return await V(me,ue),q}for await(let me of ae.call(this,re,ee));}function M(V,ee){if(typeof V!="function")throw new f("fn",["Function","AsyncFunction"],V);async function re(me,ue){return await V(me,ue)?me:q}return ae.call(this,re,ee)}var G=class extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function fe(V,ee,re){var me;if(typeof V!="function")throw new f("reducer",["Function","AsyncFunction"],V);re!=null&&c(re,"options"),(re==null?void 0:re.signal)!=null&&e(re.signal,"options.signal");let ue=arguments.length>1;if(re!=null&&(me=re.signal)!==null&&me!==void 0&&me.aborted){let ge=new n(void 0,{cause:re.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(ge)),ge}let B=new o,Q=B.signal;if(re!=null&&re.signal){let ge={once:!0,[d]:this,[p]:!0};re.signal.addEventListener("abort",()=>B.abort(),ge)}let oe=!1;try{for await(let ge of this){var ye;if(oe=!0,re!=null&&(ye=re.signal)!==null&&ye!==void 0&&ye.aborted)throw new n;ue?ee=await V(ee,ge,{signal:Q}):(ee=ge,ue=!0)}if(!oe&&!ue)throw new G}finally{B.abort()}return ee}async function $(V){V!=null&&c(V,"options"),(V==null?void 0:V.signal)!=null&&e(V.signal,"options.signal");let ee=[];for await(let me of this){var re;if(V!=null&&(re=V.signal)!==null&&re!==void 0&&re.aborted)throw new n(void 0,{cause:V.signal.reason});_(ee,me)}return ee}function _e(V,ee){let re=ae.call(this,V,ee);return(async function*(){for await(let me of re)yield*me}).call(this)}function X(V){if(V=R(V),P(V))return 0;if(V<0)throw new t("number",">= 0",V);return V}function D(V,ee=void 0){return ee!=null&&c(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),V=X(V),(async function*(){var re;if(ee!=null&&(re=ee.signal)!==null&&re!==void 0&&re.aborted)throw new n;for await(let ue of this){var me;if(ee!=null&&(me=ee.signal)!==null&&me!==void 0&&me.aborted)throw new n;V--<=0&&(yield ue)}}).call(this)}function se(V,ee=void 0){return ee!=null&&c(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),V=X(V),(async function*(){var re;if(ee!=null&&(re=ee.signal)!==null&&re!==void 0&&re.aborted)throw new n;for await(let ue of this){var me;if(ee!=null&&(me=ee.signal)!==null&&me!==void 0&&me.aborted)throw new n;if(V-- >0&&(yield ue),V<=0)return}}).call(this)}l.exports.streamReturningOperators={asIndexedPairs:g(te,"readable.asIndexedPairs will be removed in a future version."),drop:D,filter:M,flatMap:_e,map:ae,take:se,compose:U},l.exports.promiseReturningOperators={every:le,forEach:ie,reduce:fe,toArray:$,some:Z,find:K}}),ba=be((s,l)=>{he(),de(),pe();var{ArrayPrototypePop:o,Promise:a}=Ge(),{isIterable:f,isNodeStream:r,isWebStream:t}=kt(),{pipelineImpl:n}=Ao(),{finished:e}=Ft();va();function i(...c){return new a((d,p)=>{let m,b,E=c[c.length-1];if(E&&typeof E=="object"&&!r(E)&&!f(E)&&!t(E)){let w=o(c);m=w.signal,b=w.end}n(c,(w,A)=>{w?p(w):d(A)},{signal:m,end:b})})}l.exports={finished:e,pipeline:i}}),va=be((s,l)=>{he(),de(),pe();var{Buffer:o}=(tt(),qe(et)),{ObjectDefineProperty:a,ObjectKeys:f,ReflectApply:r}=Ge(),{promisify:{custom:t}}=ct(),{streamReturningOperators:n,promiseReturningOperators:e}=Kl(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:i}}=lt(),c=ma(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:p}=un(),{pipeline:m}=Ao(),{destroyer:b}=or(),E=Ft(),w=ba(),A=kt(),g=l.exports=Eo().Stream;g.isDestroyed=A.isDestroyed,g.isDisturbed=A.isDisturbed,g.isErrored=A.isErrored,g.isReadable=A.isReadable,g.isWritable=A.isWritable,g.Readable=cn();for(let S of f(n)){let v=function(...P){if(new.target)throw i();return g.Readable.from(r(R,this,P))},R=n[S];a(v,"name",{__proto__:null,value:R.name}),a(v,"length",{__proto__:null,value:R.length}),a(g.Readable.prototype,S,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(let S of f(e)){let v=function(...P){if(new.target)throw i();return r(R,this,P)},R=e[S];a(v,"name",{__proto__:null,value:R.name}),a(v,"length",{__proto__:null,value:R.length}),a(g.Readable.prototype,S,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}g.Writable=So(),g.Duplex=xt(),g.Transform=ga(),g.PassThrough=ya(),g.pipeline=m;var{addAbortSignal:_}=ln();g.addAbortSignal=_,g.finished=E,g.destroy=b,g.compose=c,g.setDefaultHighWaterMark=d,g.getDefaultHighWaterMark=p,a(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),a(m,t,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),a(E,t,{__proto__:null,enumerable:!0,get(){return w.finished}}),g.Stream=g,g._isUint8Array=function(S){return S instanceof Uint8Array},g._uint8ArrayToBuffer=function(S){return o.from(S.buffer,S.byteOffset,S.byteLength)}}),Zt=be((s,l)=>{he(),de(),pe();var o=va(),a=ba(),f=o.Readable.destroy;l.exports=o.Readable,l.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,l.exports._isUint8Array=o._isUint8Array,l.exports.isDisturbed=o.isDisturbed,l.exports.isErrored=o.isErrored,l.exports.isReadable=o.isReadable,l.exports.Readable=o.Readable,l.exports.Writable=o.Writable,l.exports.Duplex=o.Duplex,l.exports.Transform=o.Transform,l.exports.PassThrough=o.PassThrough,l.exports.addAbortSignal=o.addAbortSignal,l.exports.finished=o.finished,l.exports.destroy=o.destroy,l.exports.destroy=f,l.exports.pipeline=o.pipeline,l.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return a}}),l.exports.Stream=o.Stream,l.exports.default=l.exports}),Vl=be((s,l)=>{he(),de(),pe(),typeof Object.create=="function"?l.exports=function(o,a){a&&(o.super_=a,o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:l.exports=function(o,a){if(a){o.super_=a;var f=function(){};f.prototype=a.prototype,o.prototype=new f,o.prototype.constructor=o}}}),Gl=be((s,l)=>{he(),de(),pe();var{Buffer:o}=(tt(),qe(et)),a=Symbol.for("BufferList");function f(r){if(!(this instanceof f))return new f(r);f._init.call(this,r)}f._init=function(r){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,r&&this.append(r)},f.prototype._new=function(r){return new f(r)},f.prototype._offset=function(r){if(r===0)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){let e=t+this._bufs[n].length;if(r<e||n===this._bufs.length-1)return[n,r-t];t=e}},f.prototype._reverseOffset=function(r){let t=r[0],n=r[1];for(let e=0;e<t;e++)n+=this._bufs[e].length;return n},f.prototype.getBuffers=function(){return this._bufs},f.prototype.get=function(r){if(r>this.length||r<0)return;let t=this._offset(r);return this._bufs[t[0]][t[1]]},f.prototype.slice=function(r,t){return typeof r=="number"&&r<0&&(r+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,r,t)},f.prototype.copy=function(r,t,n,e){if((typeof n!="number"||n<0)&&(n=0),(typeof e!="number"||e>this.length)&&(e=this.length),n>=this.length||e<=0)return r||o.alloc(0);let i=!!r,c=this._offset(n),d=e-n,p=d,m=i&&t||0,b=c[1];if(n===0&&e===this.length){if(!i)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let E=0;E<this._bufs.length;E++)this._bufs[E].copy(r,m),m+=this._bufs[E].length;return r}if(p<=this._bufs[c[0]].length-b)return i?this._bufs[c[0]].copy(r,t,b,b+p):this._bufs[c[0]].slice(b,b+p);i||(r=o.allocUnsafe(d));for(let E=c[0];E<this._bufs.length;E++){let w=this._bufs[E].length-b;if(p>w)this._bufs[E].copy(r,m,b),m+=w;else{this._bufs[E].copy(r,m,b,b+p),m+=w;break}p-=w,b&&(b=0)}return r.length>m?r.slice(0,m):r},f.prototype.shallowSlice=function(r,t){if(r=r||0,t=typeof t!="number"?this.length:t,r<0&&(r+=this.length),t<0&&(t+=this.length),r===t)return this._new();let n=this._offset(r),e=this._offset(t),i=this._bufs.slice(n[0],e[0]+1);return e[1]===0?i.pop():i[i.length-1]=i[i.length-1].slice(0,e[1]),n[1]!==0&&(i[0]=i[0].slice(n[1])),this._new(i)},f.prototype.toString=function(r,t,n){return this.slice(t,n).toString(r)},f.prototype.consume=function(r){if(r=Math.trunc(r),Number.isNaN(r)||r<=0)return this;for(;this._bufs.length;)if(r>=this._bufs[0].length)r-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(r),this.length-=r;break}return this},f.prototype.duplicate=function(){let r=this._new();for(let t=0;t<this._bufs.length;t++)r.append(this._bufs[t]);return r},f.prototype.append=function(r){return this._attach(r,f.prototype._appendBuffer)},f.prototype.prepend=function(r){return this._attach(r,f.prototype._prependBuffer,!0)},f.prototype._attach=function(r,t,n){if(r==null)return this;if(r.buffer)t.call(this,o.from(r.buffer,r.byteOffset,r.byteLength));else if(Array.isArray(r)){let[e,i]=n?[r.length-1,-1]:[0,1];for(let c=e;c>=0&&c<r.length;c+=i)this._attach(r[c],t,n)}else if(this._isBufferList(r)){let[e,i]=n?[r._bufs.length-1,-1]:[0,1];for(let c=e;c>=0&&c<r._bufs.length;c+=i)this._attach(r._bufs[c],t,n)}else typeof r=="number"&&(r=r.toString()),t.call(this,o.from(r));return this},f.prototype._appendBuffer=function(r){this._bufs.push(r),this.length+=r.length},f.prototype._prependBuffer=function(r){this._bufs.unshift(r),this.length+=r.length},f.prototype.indexOf=function(r,t,n){if(n===void 0&&typeof t=="string"&&(n=t,t=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=o.from([r]):typeof r=="string"?r=o.from(r,n):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=o.from(r.buffer,r.byteOffset,r.byteLength):o.isBuffer(r)||(r=o.from(r)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),r.length===0)return t>this.length?this.length:t;let e=this._offset(t),i=e[0],c=e[1];for(;i<this._bufs.length;i++){let d=this._bufs[i];for(;c<d.length;)if(d.length-c>=r.length){let p=d.indexOf(r,c);if(p!==-1)return this._reverseOffset([i,p]);c=d.length-r.length+1}else{let p=this._reverseOffset([i,c]);if(this._match(p,r))return p;c++}c=0}return-1},f.prototype._match=function(r,t){if(this.length-r<t.length)return!1;for(let n=0;n<t.length;n++)if(this.get(r+n)!==t[n])return!1;return!0},function(){let r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in r)(function(n){r[n]===null?f.prototype[n]=function(e,i){return this.slice(e,e+i)[n](0,i)}:f.prototype[n]=function(e=0){return this.slice(e,e+r[n])[n](0)}})(t)}(),f.prototype._isBufferList=function(r){return r instanceof f||f.isBufferList(r)},f.isBufferList=function(r){return r!=null&&r[a]},l.exports=f}),Ql=be((s,l)=>{he(),de(),pe();var o=Zt().Duplex,a=Vl(),f=Gl();function r(t){if(!(this instanceof r))return new r(t);if(typeof t=="function"){this._callback=t;let n=(function(e){this._callback&&(this._callback(e),this._callback=null)}).bind(this);this.on("pipe",function(e){e.on("error",n)}),this.on("unpipe",function(e){e.removeListener("error",n)}),t=null}f._init.call(this,t),o.call(this)}a(r,o),Object.assign(r.prototype,f.prototype),r.prototype._new=function(t){return new r(t)},r.prototype._write=function(t,n,e){this._appendBuffer(t),typeof e=="function"&&e()},r.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},r.prototype.end=function(t){o.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype._destroy=function(t,n){this._bufs.length=0,this.length=0,n(t)},r.prototype._isBufferList=function(t){return t instanceof r||t instanceof f||r.isBufferList(t)},r.isBufferList=f.isBufferList,l.exports=r,l.exports.BufferListStream=r,l.exports.BufferList=f}),Yl=be((s,l)=>{he(),de(),pe();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};l.exports=o}),wa=be((s,l)=>{he(),de(),pe();var o=l.exports,{Buffer:a}=(tt(),qe(et));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let r in o.requiredHeaderFlags){let t=o.requiredHeaderFlags[r];o.requiredHeaderFlagsErrors[r]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+o.types[r]+" packet"}o.codes={};for(let r in o.types){let t=o.types[r];o.codes[t]=r}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=a.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=a.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=a.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let r in o.properties){let t=o.properties[r];o.propertiesCodes[t]=r}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function f(r){return[0,1,2].map(t=>[0,1].map(n=>[0,1].map(e=>{let i=a.alloc(1);return i.writeUInt8(o.codes[r]<<o.CMD_SHIFT|(n?o.DUP_MASK:0)|t<<o.QOS_SHIFT|e,0,!0),i})))}o.PUBLISH_HEADER=f("publish"),o.SUBSCRIBE_HEADER=f("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=f("unsubscribe"),o.ACKS={unsuback:f("unsuback"),puback:f("puback"),pubcomp:f("pubcomp"),pubrel:f("pubrel"),pubrec:f("pubrec")},o.SUBACK_HEADER=a.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=a.from([3]),o.VERSION4=a.from([4]),o.VERSION5=a.from([5]),o.VERSION131=a.from([131]),o.VERSION132=a.from([132]),o.QOS=[0,1,2].map(r=>a.from([r])),o.EMPTY={pingreq:a.from([o.codes.pingreq<<4,0]),pingresp:a.from([o.codes.pingresp<<4,0]),disconnect:a.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Jl=be((s,l)=>{he(),de(),pe();var o=1e3,a=o*60,f=a*60,r=f*24,t=r*7,n=r*365.25;l.exports=function(p,m){m=m||{};var b=typeof p;if(b==="string"&&p.length>0)return e(p);if(b==="number"&&isFinite(p))return m.long?c(p):i(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function e(p){if(p=String(p),!(p.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(m){var b=parseFloat(m[1]),E=(m[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return b*n;case"weeks":case"week":case"w":return b*t;case"days":case"day":case"d":return b*r;case"hours":case"hour":case"hrs":case"hr":case"h":return b*f;case"minutes":case"minute":case"mins":case"min":case"m":return b*a;case"seconds":case"second":case"secs":case"sec":case"s":return b*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function i(p){var m=Math.abs(p);return m>=r?Math.round(p/r)+"d":m>=f?Math.round(p/f)+"h":m>=a?Math.round(p/a)+"m":m>=o?Math.round(p/o)+"s":p+"ms"}function c(p){var m=Math.abs(p);return m>=r?d(p,m,r,"day"):m>=f?d(p,m,f,"hour"):m>=a?d(p,m,a,"minute"):m>=o?d(p,m,o,"second"):p+" ms"}function d(p,m,b,E){var w=m>=b*1.5;return Math.round(p/b)+" "+E+(w?"s":"")}}),Xl=be((s,l)=>{he(),de(),pe();function o(a){r.debug=r,r.default=r,r.coerce=d,r.disable=i,r.enable=n,r.enabled=c,r.humanize=Jl(),r.destroy=p,Object.keys(a).forEach(m=>{r[m]=a[m]}),r.names=[],r.skips=[],r.formatters={};function f(m){let b=0;for(let E=0;E<m.length;E++)b=(b<<5)-b+m.charCodeAt(E),b|=0;return r.colors[Math.abs(b)%r.colors.length]}r.selectColor=f;function r(m){let b,E=null,w,A;function g(..._){if(!g.enabled)return;let S=g,v=Number(new Date),R=v-(b||v);S.diff=R,S.prev=b,S.curr=v,b=v,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let P=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(I,O)=>{if(I==="%%")return"%";P++;let T=r.formatters[O];if(typeof T=="function"){let F=_[P];I=T.call(S,F),_.splice(P,1),P--}return I}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=m,g.useColors=r.useColors(),g.color=r.selectColor(m),g.extend=t,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(w!==r.namespaces&&(w=r.namespaces,A=r.enabled(m)),A),set:_=>{E=_}}),typeof r.init=="function"&&r.init(g),g}function t(m,b){let E=r(this.namespace+(typeof b>"u"?":":b)+m);return E.log=this.log,E}function n(m){r.save(m),r.namespaces=m,r.names=[],r.skips=[];let b=(typeof m=="string"?m:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let E of b)E[0]==="-"?r.skips.push(E.slice(1)):r.names.push(E)}function e(m,b){let E=0,w=0,A=-1,g=0;for(;E<m.length;)if(w<b.length&&(b[w]===m[E]||b[w]==="*"))b[w]==="*"?(A=w,g=E,w++):(E++,w++);else if(A!==-1)w=A+1,g++,E=g;else return!1;for(;w<b.length&&b[w]==="*";)w++;return w===b.length}function i(){let m=[...r.names,...r.skips.map(b=>"-"+b)].join(",");return r.enable(""),m}function c(m){for(let b of r.skips)if(e(m,b))return!1;for(let b of r.names)if(e(m,b))return!0;return!1}function d(m){return m instanceof Error?m.stack||m.message:m}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}l.exports=o}),Tt=be((s,l)=>{he(),de(),pe(),s.formatArgs=a,s.save=f,s.load=r,s.useColors=o,s.storage=t(),s.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+l.exports.humanize(this.diff),!this.useColors)return;let i="color: "+this.color;e.splice(1,0,i,"color: inherit");let c=0,d=0;e[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(c++,p==="%c"&&(d=c))}),e.splice(d,0,i)}s.log=console.debug||console.log||(()=>{});function f(e){try{e?s.storage.setItem("debug",e):s.storage.removeItem("debug")}catch{}}function r(){let e;try{e=s.storage.getItem("debug")||s.storage.getItem("DEBUG")}catch{}return!e&&typeof Fe<"u"&&"env"in Fe&&(e=Fe.env.DEBUG),e}function t(){try{return localStorage}catch{}}l.exports=Xl()(s);var{formatters:n}=l.exports;n.j=function(e){try{return JSON.stringify(e)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}),Zl=be((s,l)=>{he(),de(),pe();var o=Ql(),{EventEmitter:a}=(Jt(),qe(Dt)),f=Yl(),r=wa(),t=Tt()("mqtt-packet:parser"),n=class xi extends a{constructor(){super(),this.parser=this.constructor.parser}static parser(i){return this instanceof xi?(this.settings=i||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new xi().parser(i)}_resetState(){t("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new f,this.error=null,this._list=o(),this._stateCounter=0}parse(i){for(this.error&&this._resetState(),this._list.append(i),t("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,t("parse: state complete. _stateCounter is now: %d",this._stateCounter),t("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return t("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let i=this._list.readUInt8(0),c=i>>r.CMD_SHIFT;this.packet.cmd=r.types[c];let d=i&15,p=r.requiredHeaderFlags[c];return p!=null&&d!==p?this._emitError(new Error(r.requiredHeaderFlagsErrors[c])):(this.packet.retain=(i&r.RETAIN_MASK)!==0,this.packet.qos=i>>r.QOS_SHIFT&r.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(i&r.DUP_MASK)!==0,t("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let i=this._parseVarByteNum(!0);return i&&(this.packet.length=i.value,this._list.consume(i.bytes)),t("_parseLength %d",i.value),!!i}_parsePayload(){t("_parsePayload: payload %O",this._list);let i=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}i=!0}return t("_parsePayload complete result: %s",i),i}_parseConnect(){t("_parseConnect");let i,c,d,p,m={},b=this.packet,E=this._parseString();if(E===null)return this._emitError(new Error("Cannot parse protocolId"));if(E!=="MQTT"&&E!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=E,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&r.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&r.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&r.WILL_FLAG_MASK;let w=!!(this._list.readUInt8(this._pos)&r.WILL_RETAIN_MASK),A=(this._list.readUInt8(this._pos)&r.WILL_QOS_MASK)>>r.WILL_QOS_SHIFT;if(m.will)b.will={},b.will.retain=w,b.will.qos=A;else{if(w)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(A)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&r.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(b.properties=_)}let g=this._parseString();if(g===null)return this._emitError(new Error("Packet too short"));if(b.clientId=g,t("_parseConnect: packet.clientId: %s",b.clientId),m.will){if(b.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(b.will.properties=_)}if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=i,t("_parseConnect: packet.will.topic: %s",b.will.topic),c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=c,t("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(m.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));b.username=p,t("_parseConnect: packet.username: %s",b.username)}if(m.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));b.password=d}return this.settings=b,t("_parseConnect: complete"),b}_parseConnack(){t("_parseConnack");let i=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(i.sessionPresent=!!(c&r.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?i.reasonCode=this._list.readUInt8(this._pos++):i.reasonCode=0;else{if(this._list.length<2)return null;i.returnCode=this._list.readUInt8(this._pos++)}if(i.returnCode===-1||i.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(i.properties=d)}t("_parseConnack: complete")}_parsePublish(){t("_parsePublish");let i=this.packet;if(i.topic=this._parseString(),i.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(i.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(i.properties=c)}i.payload=this._list.slice(this._pos,i.length),t("_parsePublish: payload from buffer list: %o",i.payload)}}_parseSubscribe(){t("_parseSubscribe");let i=this.packet,c,d,p,m,b,E,w;if(i.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(i.properties=A)}if(i.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<i.length;){if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=i.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=d&r.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(E=(d>>r.SUBSCRIBE_OPTIONS_NL_SHIFT&r.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(d>>r.SUBSCRIBE_OPTIONS_RAP_SHIFT&r.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,m=d>>r.SUBSCRIBE_OPTIONS_RH_SHIFT&r.SUBSCRIBE_OPTIONS_RH_MASK,m>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));w={topic:c,qos:p},this.settings.protocolVersion===5?(w.nl=E,w.rap=b,w.rh=m):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),t("_parseSubscribe: push subscription `%s` to subscription",w),i.subscriptions.push(w)}}}_parseSuback(){t("_parseSuback");let i=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(i.properties=c)}if(i.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!r.MQTT5_SUBACK_CODES[c])return this._emitError(new Error("Invalid suback code"))}else if(c>2&&c!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(c)}}}_parseUnsubscribe(){t("_parseUnsubscribe");let i=this.packet;if(i.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(i.properties=c)}if(i.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<i.length;){let c=this._parseString();if(c===null)return this._emitError(new Error("Cannot parse topic"));t("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),i.unsubscriptions.push(c)}}}_parseUnsuback(){t("_parseUnsuback");let i=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&i.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(i.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(i.properties=c),i.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!r.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){t("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let i=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(i.length>2){switch(i.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!r.MQTT5_PUBACK_PUBREC_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!r.MQTT5_PUBREL_PUBCOMP_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}t("_parseConfirmation: packet.reasonCode `%d`",i.reasonCode)}else i.reasonCode=0;if(i.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(i.properties=c)}}return!0}_parseDisconnect(){let i=this.packet;if(t("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(i.reasonCode=this._parseByte(),r.MQTT5_DISCONNECT_CODES[i.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):i.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(i.properties=c)}return t("_parseDisconnect result: true"),!0}_parseAuth(){t("_parseAuth");let i=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(i.reasonCode=this._parseByte(),!r.MQTT5_AUTH_CODES[i.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(i.properties=c),t("_parseAuth: result: true"),!0}_parseMessageId(){let i=this.packet;return i.messageId=this._parseNum(),i.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(t("_parseMessageId: packet.messageId %d",i.messageId),!0)}_parseString(i){let c=this._parseNum(),d=c+this._pos;if(c===-1||d>this._list.length||d>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,d);return this._pos+=c,t("_parseString: result: %s",p),p}_parseStringPair(){return t("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let i=this._parseNum(),c=i+this._pos;if(i===-1||c>this._list.length||c>this.packet.length)return null;let d=this._list.slice(this._pos,c);return this._pos+=i,t("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let i=this._list.readUInt16BE(this._pos);return this._pos+=2,t("_parseNum: result: %s",i),i}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let i=this._list.readUInt32BE(this._pos);return this._pos+=4,t("_parse4ByteNum: result: %s",i),i}_parseVarByteNum(i){t("_parseVarByteNum");let c=4,d=0,p=1,m=0,b=!1,E,w=this._pos?this._pos:0;for(;d<c&&w+d<this._list.length;){if(E=this._list.readUInt8(w+d++),m+=p*(E&r.VARBYTEINT_MASK),p*=128,(E&r.VARBYTEINT_FIN_MASK)===0){b=!0;break}if(this._list.length<=d)break}return!b&&d===c&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=d),b?i?b={bytes:d,value:m}:b=m:b=!1,t("_parseVarByteNum: result: %o",b),b}_parseByte(){let i;return this._pos<this._list.length&&(i=this._list.readUInt8(this._pos),this._pos++),t("_parseByte: result: %o",i),i}_parseByType(i){switch(t("_parseByType: type: %s",i),i){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){t("_parseProperties");let i=this._parseVarByteNum(),c=this._pos+i,d={};for(;this._pos<c;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let m=r.propertiesCodes[p];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m==="userProperties"){d[m]||(d[m]=Object.create(null));let b=this._parseByType(r.propertiesTypes[m]);if(d[m][b.name])if(Array.isArray(d[m][b.name]))d[m][b.name].push(b.value);else{let E=d[m][b.name];d[m][b.name]=[E],d[m][b.name].push(b.value)}else d[m][b.name]=b.value;continue}d[m]?Array.isArray(d[m])?d[m].push(this._parseByType(r.propertiesTypes[m])):(d[m]=[d[m]],d[m].push(this._parseByType(r.propertiesTypes[m]))):d[m]=this._parseByType(r.propertiesTypes[m])}return d}_newPacket(){return t("_newPacket"),this.packet&&(this._list.consume(this.packet.length),t("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),t("_newPacket: new packet"),this.packet=new f,this._pos=0,!0}_emitError(i){t("_emitError",i),this.error=i,this.emit("error",i)}};l.exports=n}),eu=be((s,l)=>{he(),de(),pe();var{Buffer:o}=(tt(),qe(et)),a=65536,f={},r=o.isBuffer(o.from([1,2]).subarray(0,1));function t(c){let d=o.allocUnsafe(2);return d.writeUInt8(c>>8,0),d.writeUInt8(c&255,1),d}function n(){for(let c=0;c<a;c++)f[c]=t(c)}function e(c){let d=0,p=0,m=o.allocUnsafe(4);do d=c%128|0,c=c/128|0,c>0&&(d=d|128),m.writeUInt8(d,p++);while(c>0&&p<4);return c>0&&(p=0),r?m.subarray(0,p):m.slice(0,p)}function i(c){let d=o.allocUnsafe(4);return d.writeUInt32BE(c,0),d}l.exports={cache:f,generateCache:n,generateNumber:t,genBufVariableByteInt:e,generate4ByteBuffer:i}}),tu=be((s,l)=>{he(),de(),pe(),typeof Fe>"u"||!Fe.version||Fe.version.indexOf("v0.")===0||Fe.version.indexOf("v1.")===0&&Fe.version.indexOf("v1.8.")!==0?l.exports={nextTick:o}:l.exports=Fe;function o(a,f,r,t){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,e,i;switch(n){case 0:case 1:return Fe.nextTick(a);case 2:return Fe.nextTick(function(){a.call(null,f)});case 3:return Fe.nextTick(function(){a.call(null,f,r)});case 4:return Fe.nextTick(function(){a.call(null,f,r,t)});default:for(e=new Array(n-1),i=0;i<e.length;)e[i++]=arguments[i];return Fe.nextTick(function(){a.apply(null,e)})}}}),_a=be((s,l)=>{he(),de(),pe();var o=wa(),{Buffer:a}=(tt(),qe(et)),f=a.allocUnsafe(0),r=a.from([0]),t=eu(),n=tu().nextTick,e=Tt()("mqtt-packet:writeToStream"),i=t.cache,c=t.generateNumber,d=t.generateCache,p=t.genBufVariableByteInt,m=t.generate4ByteBuffer,b=te,E=!0;function w(X,D,se){switch(e("generate called"),D.cork&&(D.cork(),n(A,D)),E&&(E=!1,d()),e("generate: packet.cmd: %s",X.cmd),X.cmd){case"connect":return g(X,D);case"connack":return _(X,D,se);case"publish":return S(X,D,se);case"puback":case"pubrec":case"pubrel":case"pubcomp":return v(X,D,se);case"subscribe":return R(X,D,se);case"suback":return P(X,D,se);case"unsubscribe":return I(X,D,se);case"unsuback":return O(X,D,se);case"pingreq":case"pingresp":return T(X,D);case"disconnect":return F(X,D,se);case"auth":return x(X,D,se);default:return D.destroy(new Error("Unknown command")),!1}}Object.defineProperty(w,"cacheNumbers",{get(){return b===te},set(X){X?((!i||Object.keys(i).length===0)&&(E=!0),b=te):(E=!1,b=Z)}});function A(X){X.uncork()}function g(X,D,se){let V=X||{},ee=V.protocolId||"MQTT",re=V.protocolVersion||4,me=V.will,ue=V.clean,B=V.keepalive||0,Q=V.clientId||"",oe=V.username,ye=V.password,ge=V.properties;ue===void 0&&(ue=!0);let we=0;if(typeof ee!="string"&&!a.isBuffer(ee))return D.destroy(new Error("Invalid protocolId")),!1;if(we+=ee.length+2,re!==3&&re!==4&&re!==5)return D.destroy(new Error("Invalid protocol version")),!1;if(we+=1,(typeof Q=="string"||a.isBuffer(Q))&&(Q||re>=4)&&(Q||ue))we+=a.byteLength(Q)+2;else{if(re<4)return D.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ue*1===0)return D.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof B!="number"||B<0||B>65535||B%1!==0)return D.destroy(new Error("Invalid keepalive")),!1;we+=2,we+=1;let J,ve;if(re===5){if(J=ie(D,ge),!J)return!1;we+=J.length}if(me){if(typeof me!="object")return D.destroy(new Error("Invalid will")),!1;if(!me.topic||typeof me.topic!="string")return D.destroy(new Error("Invalid will topic")),!1;if(we+=a.byteLength(me.topic)+2,we+=2,me.payload)if(me.payload.length>=0)typeof me.payload=="string"?we+=a.byteLength(me.payload):we+=me.payload.length;else return D.destroy(new Error("Invalid will payload")),!1;if(ve={},re===5){if(ve=ie(D,me.properties),!ve)return!1;we+=ve.length}}let Se=!1;if(oe!=null)if(_e(oe))Se=!0,we+=a.byteLength(oe)+2;else return D.destroy(new Error("Invalid username")),!1;if(ye!=null){if(!Se)return D.destroy(new Error("Username is required to use password")),!1;if(_e(ye))we+=$(ye)+2;else return D.destroy(new Error("Invalid password")),!1}D.write(o.CONNECT_HEADER),H(D,we),K(D,ee),V.bridgeMode&&(re+=128),D.write(re===131?o.VERSION131:re===132?o.VERSION132:re===4?o.VERSION4:re===5?o.VERSION5:o.VERSION3);let ce=0;return ce|=oe!=null?o.USERNAME_MASK:0,ce|=ye!=null?o.PASSWORD_MASK:0,ce|=me&&me.retain?o.WILL_RETAIN_MASK:0,ce|=me&&me.qos?me.qos<<o.WILL_QOS_SHIFT:0,ce|=me?o.WILL_FLAG_MASK:0,ce|=ue?o.CLEAN_SESSION_MASK:0,D.write(a.from([ce])),b(D,B),re===5&&J.write(),K(D,Q),me&&(re===5&&ve.write(),U(D,me.topic),K(D,me.payload)),oe!=null&&K(D,oe),ye!=null&&K(D,ye),!0}function _(X,D,se){let V=se?se.protocolVersion:4,ee=X||{},re=V===5?ee.reasonCode:ee.returnCode,me=ee.properties,ue=2;if(typeof re!="number")return D.destroy(new Error("Invalid return code")),!1;let B=null;if(V===5){if(B=ie(D,me),!B)return!1;ue+=B.length}return D.write(o.CONNACK_HEADER),H(D,ue),D.write(ee.sessionPresent?o.SESSIONPRESENT_HEADER:r),D.write(a.from([re])),B==null||B.write(),!0}function S(X,D,se){e("publish: packet: %o",X);let V=se?se.protocolVersion:4,ee=X||{},re=ee.qos||0,me=ee.retain?o.RETAIN_MASK:0,ue=ee.topic,B=ee.payload||f,Q=ee.messageId,oe=ee.properties,ye=0;if(typeof ue=="string")ye+=a.byteLength(ue)+2;else if(a.isBuffer(ue))ye+=ue.length+2;else return D.destroy(new Error("Invalid topic")),!1;if(a.isBuffer(B)?ye+=B.length:ye+=a.byteLength(B),re&&typeof Q!="number")return D.destroy(new Error("Invalid messageId")),!1;re&&(ye+=2);let ge=null;if(V===5){if(ge=ie(D,oe),!ge)return!1;ye+=ge.length}return D.write(o.PUBLISH_HEADER[re][ee.dup?1:0][me?1:0]),H(D,ye),b(D,$(ue)),D.write(ue),re>0&&b(D,Q),ge==null||ge.write(),e("publish: payload: %o",B),D.write(B)}function v(X,D,se){let V=se?se.protocolVersion:4,ee=X||{},re=ee.cmd||"puback",me=ee.messageId,ue=ee.dup&&re==="pubrel"?o.DUP_MASK:0,B=0,Q=ee.reasonCode,oe=ee.properties,ye=V===5?3:2;if(re==="pubrel"&&(B=1),typeof me!="number")return D.destroy(new Error("Invalid messageId")),!1;let ge=null;if(V===5&&typeof oe=="object"){if(ge=M(D,oe,se,ye),!ge)return!1;ye+=ge.length}return D.write(o.ACKS[re][B][ue][0]),ye===3&&(ye+=Q!==0?1:-1),H(D,ye),b(D,me),V===5&&ye!==2&&D.write(a.from([Q])),ge!==null?ge.write():ye===4&&D.write(a.from([0])),!0}function R(X,D,se){e("subscribe: packet: ");let V=se?se.protocolVersion:4,ee=X||{},re=ee.dup?o.DUP_MASK:0,me=ee.messageId,ue=ee.subscriptions,B=ee.properties,Q=0;if(typeof me!="number")return D.destroy(new Error("Invalid messageId")),!1;Q+=2;let oe=null;if(V===5){if(oe=ie(D,B),!oe)return!1;Q+=oe.length}if(typeof ue=="object"&&ue.length)for(let ge=0;ge<ue.length;ge+=1){let we=ue[ge].topic,J=ue[ge].qos;if(typeof we!="string")return D.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof J!="number")return D.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(V===5){if(typeof(ue[ge].nl||!1)!="boolean")return D.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ue[ge].rap||!1)!="boolean")return D.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ve=ue[ge].rh||0;if(typeof ve!="number"||ve>2)return D.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}Q+=a.byteLength(we)+2+1}else return D.destroy(new Error("Invalid subscriptions")),!1;e("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),D.write(o.SUBSCRIBE_HEADER[1][re?1:0][0]),H(D,Q),b(D,me),oe!==null&&oe.write();let ye=!0;for(let ge of ue){let we=ge.topic,J=ge.qos,ve=+ge.nl,Se=+ge.rap,ce=ge.rh,je;U(D,we),je=o.SUBSCRIBE_OPTIONS_QOS[J],V===5&&(je|=ve?o.SUBSCRIBE_OPTIONS_NL:0,je|=Se?o.SUBSCRIBE_OPTIONS_RAP:0,je|=ce?o.SUBSCRIBE_OPTIONS_RH[ce]:0),ye=D.write(a.from([je]))}return ye}function P(X,D,se){let V=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,me=ee.granted,ue=ee.properties,B=0;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(B+=2,typeof me=="object"&&me.length)for(let oe=0;oe<me.length;oe+=1){if(typeof me[oe]!="number")return D.destroy(new Error("Invalid qos vector")),!1;B+=1}else return D.destroy(new Error("Invalid qos vector")),!1;let Q=null;if(V===5){if(Q=M(D,ue,se,B),!Q)return!1;B+=Q.length}return D.write(o.SUBACK_HEADER),H(D,B),b(D,re),Q!==null&&Q.write(),D.write(a.from(me))}function I(X,D,se){let V=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,me=ee.dup?o.DUP_MASK:0,ue=ee.unsubscriptions,B=ee.properties,Q=0;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(Q+=2,typeof ue=="object"&&ue.length)for(let ge=0;ge<ue.length;ge+=1){if(typeof ue[ge]!="string")return D.destroy(new Error("Invalid unsubscriptions")),!1;Q+=a.byteLength(ue[ge])+2}else return D.destroy(new Error("Invalid unsubscriptions")),!1;let oe=null;if(V===5){if(oe=ie(D,B),!oe)return!1;Q+=oe.length}D.write(o.UNSUBSCRIBE_HEADER[1][me?1:0][0]),H(D,Q),b(D,re),oe!==null&&oe.write();let ye=!0;for(let ge=0;ge<ue.length;ge++)ye=U(D,ue[ge]);return ye}function O(X,D,se){let V=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,me=ee.dup?o.DUP_MASK:0,ue=ee.granted,B=ee.properties,Q=ee.cmd,oe=0,ye=2;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(V===5)if(typeof ue=="object"&&ue.length)for(let we=0;we<ue.length;we+=1){if(typeof ue[we]!="number")return D.destroy(new Error("Invalid qos vector")),!1;ye+=1}else return D.destroy(new Error("Invalid qos vector")),!1;let ge=null;if(V===5){if(ge=M(D,B,se,ye),!ge)return!1;ye+=ge.length}return D.write(o.ACKS[Q][oe][me][0]),H(D,ye),b(D,re),ge!==null&&ge.write(),V===5&&D.write(a.from(ue)),!0}function T(X,D,se){return D.write(o.EMPTY[X.cmd])}function F(X,D,se){let V=se?se.protocolVersion:4,ee=X||{},re=ee.reasonCode,me=ee.properties,ue=V===5?1:0,B=null;if(V===5){if(B=M(D,me,se,ue),!B)return!1;ue+=B.length}return D.write(a.from([o.codes.disconnect<<4])),H(D,ue),V===5&&D.write(a.from([re])),B!==null&&B.write(),!0}function x(X,D,se){let V=se?se.protocolVersion:4,ee=X||{},re=ee.reasonCode,me=ee.properties,ue=V===5?1:0;V!==5&&D.destroy(new Error("Invalid mqtt version for auth packet"));let B=M(D,me,se,ue);return B?(ue+=B.length,D.write(a.from([o.codes.auth<<4])),H(D,ue),D.write(a.from([re])),B!==null&&B.write(),!0):!1}var q={};function H(X,D){if(D>o.VARBYTEINT_MAX)return X.destroy(new Error(`Invalid variable byte integer: ${D}`)),!1;let se=q[D];return se||(se=p(D),D<16384&&(q[D]=se)),e("writeVarByteInt: writing to stream: %o",se),X.write(se)}function U(X,D){let se=a.byteLength(D);return b(X,se),e("writeString: %s",D),X.write(D,"utf8")}function ae(X,D,se){U(X,D),U(X,se)}function te(X,D){return e("writeNumberCached: number: %d",D),e("writeNumberCached: %o",i[D]),X.write(i[D])}function Z(X,D){let se=c(D);return e("writeNumberGenerated: %o",se),X.write(se)}function le(X,D){let se=m(D);return e("write4ByteNumber: %o",se),X.write(se)}function K(X,D){typeof D=="string"?U(X,D):D?(b(X,D.length),X.write(D)):b(X,0)}function ie(X,D){if(typeof D!="object"||D.length!=null)return{length:1,write(){fe(X,{},0)}};let se=0;function V(ee,re){let me=o.propertiesTypes[ee],ue=0;switch(me){case"byte":{if(typeof re!="boolean")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=2;break}case"int8":{if(typeof re!="number"||re<0||re>255)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=2;break}case"binary":{if(re&&re===null)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=1+a.byteLength(re)+2;break}case"int16":{if(typeof re!="number"||re<0||re>65535)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=3;break}case"int32":{if(typeof re!="number"||re<0||re>4294967295)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=5;break}case"var":{if(typeof re!="number"||re<0||re>268435455)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=1+a.byteLength(p(re));break}case"string":{if(typeof re!="string")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=3+a.byteLength(re.toString());break}case"pair":{if(typeof re!="object")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=Object.getOwnPropertyNames(re).reduce((B,Q)=>{let oe=re[Q];return Array.isArray(oe)?B+=oe.reduce((ye,ge)=>(ye+=3+a.byteLength(Q.toString())+2+a.byteLength(ge.toString()),ye),0):B+=3+a.byteLength(Q.toString())+2+a.byteLength(re[Q].toString()),B},0);break}default:return X.destroy(new Error(`Invalid property ${ee}: ${re}`)),!1}return ue}if(D)for(let ee in D){let re=0,me=0,ue=D[ee];if(ue!==void 0){if(Array.isArray(ue))for(let B=0;B<ue.length;B++){if(me=V(ee,ue[B]),!me)return!1;re+=me}else{if(me=V(ee,ue),!me)return!1;re=me}if(!re)return!1;se+=re}}return{length:a.byteLength(p(se))+se,write(){fe(X,D,se)}}}function M(X,D,se,V){let ee=["reasonString","userProperties"],re=se&&se.properties&&se.properties.maximumPacketSize?se.properties.maximumPacketSize:0,me=ie(X,D);if(re)for(;V+me.length>re;){let ue=ee.shift();if(ue&&D[ue])delete D[ue],me=ie(X,D);else return!1}return me}function G(X,D,se){switch(o.propertiesTypes[D]){case"byte":{X.write(a.from([o.properties[D]])),X.write(a.from([+se]));break}case"int8":{X.write(a.from([o.properties[D]])),X.write(a.from([se]));break}case"binary":{X.write(a.from([o.properties[D]])),K(X,se);break}case"int16":{X.write(a.from([o.properties[D]])),b(X,se);break}case"int32":{X.write(a.from([o.properties[D]])),le(X,se);break}case"var":{X.write(a.from([o.properties[D]])),H(X,se);break}case"string":{X.write(a.from([o.properties[D]])),U(X,se);break}case"pair":{Object.getOwnPropertyNames(se).forEach(V=>{let ee=se[V];Array.isArray(ee)?ee.forEach(re=>{X.write(a.from([o.properties[D]])),ae(X,V.toString(),re.toString())}):(X.write(a.from([o.properties[D]])),ae(X,V.toString(),ee.toString()))});break}default:return X.destroy(new Error(`Invalid property ${D} value: ${se}`)),!1}}function fe(X,D,se){H(X,se);for(let V in D)if(Object.prototype.hasOwnProperty.call(D,V)&&D[V]!=null){let ee=D[V];if(Array.isArray(ee))for(let re=0;re<ee.length;re++)G(X,V,ee[re]);else G(X,V,ee)}}function $(X){return X?X instanceof a?X.length:a.byteLength(X):0}function _e(X){return typeof X=="string"||X instanceof a}l.exports=w}),ru=be((s,l)=>{he(),de(),pe();var o=_a(),{EventEmitter:a}=(Jt(),qe(Dt)),{Buffer:f}=(tt(),qe(et));function r(n,e){let i=new t;return o(n,i,e),i.concat()}var t=class extends a{constructor(){super(),this._array=new Array(20),this._i=0}write(n){return this._array[this._i++]=n,!0}concat(){let n=0,e=new Array(this._array.length),i=this._array,c=0,d;for(d=0;d<i.length&&i[d]!==void 0;d++)typeof i[d]!="string"?e[d]=i[d].length:e[d]=f.byteLength(i[d]),n+=e[d];let p=f.allocUnsafe(n);for(d=0;d<i.length&&i[d]!==void 0;d++)typeof i[d]!="string"?(i[d].copy(p,c),c+=e[d]):(p.write(i[d],c),c+=e[d]);return p}destroy(n){n&&this.emit("error",n)}};l.exports=r}),nu=be(s=>{he(),de(),pe(),s.parser=Zl().parser,s.generate=ru(),s.writeToStream=_a()}),iu=be((s,l)=>{he(),de(),pe(),l.exports=a;function o(r){return r instanceof on?on.from(r):new r.constructor(r.buffer.slice(),r.byteOffset,r.length)}function a(r){if(r=r||{},r.circles)return f(r);let t=new Map;if(t.set(Date,d=>new Date(d)),t.set(Map,(d,p)=>new Map(e(Array.from(d),p))),t.set(Set,(d,p)=>new Set(e(Array.from(d),p))),r.constructorHandlers)for(let d of r.constructorHandlers)t.set(d[0],d[1]);let n=null;return r.proto?c:i;function e(d,p){let m=Object.keys(d),b=new Array(m.length);for(let E=0;E<m.length;E++){let w=m[E],A=d[w];typeof A!="object"||A===null?b[w]=A:A.constructor!==Object&&(n=t.get(A.constructor))?b[w]=n(A,p):ArrayBuffer.isView(A)?b[w]=o(A):b[w]=p(A)}return b}function i(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return e(d,i);if(d.constructor!==Object&&(n=t.get(d.constructor)))return n(d,i);let p={};for(let m in d){if(Object.hasOwnProperty.call(d,m)===!1)continue;let b=d[m];typeof b!="object"||b===null?p[m]=b:b.constructor!==Object&&(n=t.get(b.constructor))?p[m]=n(b,i):ArrayBuffer.isView(b)?p[m]=o(b):p[m]=i(b)}return p}function c(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return e(d,c);if(d.constructor!==Object&&(n=t.get(d.constructor)))return n(d,c);let p={};for(let m in d){let b=d[m];typeof b!="object"||b===null?p[m]=b:b.constructor!==Object&&(n=t.get(b.constructor))?p[m]=n(b,c):ArrayBuffer.isView(b)?p[m]=o(b):p[m]=c(b)}return p}}function f(r){let t=[],n=[],e=new Map;if(e.set(Date,m=>new Date(m)),e.set(Map,(m,b)=>new Map(c(Array.from(m),b))),e.set(Set,(m,b)=>new Set(c(Array.from(m),b))),r.constructorHandlers)for(let m of r.constructorHandlers)e.set(m[0],m[1]);let i=null;return r.proto?p:d;function c(m,b){let E=Object.keys(m),w=new Array(E.length);for(let A=0;A<E.length;A++){let g=E[A],_=m[g];if(typeof _!="object"||_===null)w[g]=_;else if(_.constructor!==Object&&(i=e.get(_.constructor)))w[g]=i(_,b);else if(ArrayBuffer.isView(_))w[g]=o(_);else{let S=t.indexOf(_);S!==-1?w[g]=n[S]:w[g]=b(_)}}return w}function d(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return c(m,d);if(m.constructor!==Object&&(i=e.get(m.constructor)))return i(m,d);let b={};t.push(m),n.push(b);for(let E in m){if(Object.hasOwnProperty.call(m,E)===!1)continue;let w=m[E];if(typeof w!="object"||w===null)b[E]=w;else if(w.constructor!==Object&&(i=e.get(w.constructor)))b[E]=i(w,d);else if(ArrayBuffer.isView(w))b[E]=o(w);else{let A=t.indexOf(w);A!==-1?b[E]=n[A]:b[E]=d(w)}}return t.pop(),n.pop(),b}function p(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return c(m,p);if(m.constructor!==Object&&(i=e.get(m.constructor)))return i(m,p);let b={};t.push(m),n.push(b);for(let E in m){let w=m[E];if(typeof w!="object"||w===null)b[E]=w;else if(w.constructor!==Object&&(i=e.get(w.constructor)))b[E]=i(w,p);else if(ArrayBuffer.isView(w))b[E]=o(w);else{let A=t.indexOf(w);A!==-1?b[E]=n[A]:b[E]=p(w)}}return t.pop(),n.pop(),b}}}),ou=be((s,l)=>{he(),de(),pe(),l.exports=iu()()}),su=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0}),s.validateTopic=l,s.validateTopics=o;function l(a){let f=a.split("/");for(let r=0;r<f.length;r++)if(f[r]!=="+"){if(f[r]==="#")return r===f.length-1;if(f[r].indexOf("+")!==-1||f[r].indexOf("#")!==-1)return!1}return!0}function o(a){if(a.length===0)return"empty_topic_list";for(let f=0;f<a.length;f++)if(!l(a[f]))return a[f];return null}}),Ea=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=Zt(),o={objectMode:!0},a={clean:!0},f=class{constructor(r){Ie(this,"options");Ie(this,"_inflights");this.options=r||{},this.options={...a,...r},this._inflights=new Map}put(r,t){return this._inflights.set(r.messageId,r),t&&t(),this}createStream(){let r=new l.Readable(o),t=[],n=!1,e=0;return this._inflights.forEach((i,c)=>{t.push(i)}),r._read=()=>{!n&&e<t.length?r.push(t[e++]):r.push(null)},r.destroy=i=>{if(!n)return n=!0,setTimeout(()=>{r.emit("close")},0),r},r}del(r,t){let n=this._inflights.get(r.messageId);return n?(this._inflights.delete(r.messageId),t(null,n)):t&&t(new Error("missing packet")),this}get(r,t){let n=this._inflights.get(r.messageId);return n?t(null,n):t&&t(new Error("missing packet")),this}close(r){this.options.clean&&(this._inflights=null),r&&r()}};s.default=f}),au=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=[0,16,128,131,135,144,145,151,153],o=(a,f,r)=>{a.log("handlePublish: packet %o",f),r=typeof r<"u"?r:a.noop;let t=f.topic.toString(),n=f.payload,{qos:e}=f,{messageId:i}=f,{options:c}=a;if(a.options.protocolVersion===5){let d;if(f.properties&&(d=f.properties.topicAlias),typeof d<"u")if(t.length===0)if(d>0&&d<=65535){let p=a.topicAliasRecv.getTopicByAlias(d);if(p)t=p,a.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",t,d);else{a.log("handlePublish :: unregistered topic alias. alias: %d",d),a.emit("error",new Error("Received unregistered Topic Alias"));return}}else{a.log("handlePublish :: topic alias out of range. alias: %d",d),a.emit("error",new Error("Received Topic Alias is out of range"));return}else if(a.topicAliasRecv.put(t,d))a.log("handlePublish :: registered topic: %s - alias: %d",t,d);else{a.log("handlePublish :: topic alias out of range. alias: %d",d),a.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(a.log("handlePublish: qos %d",e),e){case 2:{c.customHandleAcks(t,n,f,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return a.emit("error",d);if(l.indexOf(p)===-1)return a.emit("error",new Error("Wrong reason code for pubrec"));p?a._sendPacket({cmd:"pubrec",messageId:i,reasonCode:p},r):a.incomingStore.put(f,()=>{a._sendPacket({cmd:"pubrec",messageId:i},r)})});break}case 1:{c.customHandleAcks(t,n,f,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return a.emit("error",d);if(l.indexOf(p)===-1)return a.emit("error",new Error("Wrong reason code for puback"));p||a.emit("message",t,n,f),a.handleMessage(f,m=>{if(m)return r&&r(m);a._sendPacket({cmd:"puback",messageId:i,reasonCode:p},r)})});break}case 0:a.emit("message",t,n,f),a.handleMessage(f,r);break;default:a.log("handlePublish: unknown QoS. Doing nothing.");break}};s.default=o}),lu=be((s,l)=>{l.exports={version:"5.14.1"}}),sr=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0}),s.MQTTJS_VERSION=s.nextTick=s.ErrorWithSubackPacket=s.ErrorWithReasonCode=void 0,s.applyMixin=a;var l=class Sa extends Error{constructor(t,n){super(t);Ie(this,"code");this.code=n,Object.setPrototypeOf(this,Sa.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};s.ErrorWithReasonCode=l;var o=class Aa extends Error{constructor(t,n){super(t);Ie(this,"packet");this.packet=n,Object.setPrototypeOf(this,Aa.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};s.ErrorWithSubackPacket=o;function a(f,r,t=!1){let n=[r];for(;;){let e=n[0],i=Object.getPrototypeOf(e);if(i!=null&&i.prototype)n.unshift(i);else break}for(let e of n)for(let i of Object.getOwnPropertyNames(e.prototype))(t||i!=="constructor")&&Object.defineProperty(f.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)??Object.create(null))}s.nextTick=typeof(Fe==null?void 0:Fe.nextTick)=="function"?Fe.nextTick:f=>{setTimeout(f,0)},s.MQTTJS_VERSION=lu().version}),fn=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=void 0;var l=sr();s.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(a,f)=>{let{messageId:r}=f,t=f.cmd,n=null,e=a.outgoing[r]?a.outgoing[r].cb:null,i=null;if(!e){a.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(a.log("_handleAck :: packet type",t),t){case"pubcomp":case"puback":{let c=f.reasonCode;c&&c>0&&c!==16?(i=new l.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[c]}`,c),a._removeOutgoingAndStoreMessage(r,()=>{e(i,f)})):a._removeOutgoingAndStoreMessage(r,e);break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:r};let c=f.reasonCode;c&&c>0&&c!==16?(i=new l.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[c]}`,c),a._removeOutgoingAndStoreMessage(r,()=>{e(i,f)})):a._sendPacket(n);break}case"suback":{delete a.outgoing[r],a.messageIdProvider.deallocate(r);let c=f.granted;for(let d=0;d<c.length;d++){let p=c[d];if(p&128){i=new Error(`Subscribe error: ${s.ReasonCodes[p]}`),i.code=p;let m=a.messageIdToTopic[r];m&&m.forEach(b=>{delete a._resubscribeTopics[b]})}}delete a.messageIdToTopic[r],a._invokeStoreProcessingQueue(),e(i,f);break}case"unsuback":{delete a.outgoing[r],a.messageIdProvider.deallocate(r),a._invokeStoreProcessingQueue(),e(null,f);break}default:a.emit("error",new Error("unrecognized packet type"))}a.disconnecting&&Object.keys(a.outgoing).length===0&&a.emit("outgoingEmpty")};s.default=o}),uu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=sr(),o=fn(),a=(f,r)=>{let{options:t}=f,n=t.protocolVersion,e=n===5?r.reasonCode:r.returnCode;if(n!==5){let i=new l.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${n}`,e);f.emit("error",i);return}f.handleAuth(r,(i,c)=>{if(i){f.emit("error",i);return}if(e===24)f.reconnecting=!1,f._sendPacket(c);else{let d=new l.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[e]}`,e);f.emit("error",d)}})};s.default=a}),cu=be(s=>{var m,b,E,w,A,g,_,S,v,R,P,I,O,T,F,x,q,H,U,ae,te,Z,le,K,ie,M,G,fe,$,Ti,X,D,se,V,Ia,re,me,ue,jt,Bt,ki,Cr,Rr,ze,Oi,dr,Nt,Pi,je;he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0}),s.LRUCache=void 0;var l=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,a=typeof Fe=="object"&&Fe?Fe:{},f=(u,h,y,k)=>{typeof a.emitWarning=="function"?a.emitWarning(u,h,y,k):console.error(`[${y}] ${h}: ${u}`)},r=globalThis.AbortController,t=globalThis.AbortSignal;if(typeof r>"u"){t=class{constructor(){Ie(this,"onabort");Ie(this,"_onabort",[]);Ie(this,"reason");Ie(this,"aborted",!1)}addEventListener(y,k){this._onabort.push(k)}},r=class{constructor(){Ie(this,"signal",new t);h()}abort(y){var k,j;if(!this.signal.aborted){this.signal.reason=y,this.signal.aborted=!0;for(let z of this.signal._onabort)z(y);(j=(k=this.signal).onabort)==null||j.call(k,y)}}};let u=((m=a.env)==null?void 0:m.LRU_CACHE_IGNORE_AC_WARNING)!=="1",h=()=>{u&&(u=!1,f("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",h))}}var n=u=>!o.has(u),e=u=>u&&u===Math.floor(u)&&u>0&&isFinite(u),i=u=>e(u)?u<=Math.pow(2,8)?Uint8Array:u<=Math.pow(2,16)?Uint16Array:u<=Math.pow(2,32)?Uint32Array:u<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(u){super(u),this.fill(0)}},d=(b=class{constructor(h,y){Ie(this,"heap");Ie(this,"length");if(!L(b,E))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new y(h),this.length=0}static create(h){let y=i(h);if(!y)return[];Me(b,E,!0);let k=new b(h,y);return Me(b,E,!1),k}push(h){this.heap[this.length++]=h}pop(){return this.heap[--this.length]}},E=new WeakMap,De(b,E,!1),b),p=(je=class{constructor(h){De(this,$);De(this,g);De(this,_);De(this,S);De(this,v);De(this,R);De(this,P);Ie(this,"ttl");Ie(this,"ttlResolution");Ie(this,"ttlAutopurge");Ie(this,"updateAgeOnGet");Ie(this,"updateAgeOnHas");Ie(this,"allowStale");Ie(this,"noDisposeOnSet");Ie(this,"noUpdateTTL");Ie(this,"maxEntrySize");Ie(this,"sizeCalculation");Ie(this,"noDeleteOnFetchRejection");Ie(this,"noDeleteOnStaleGet");Ie(this,"allowStaleOnFetchAbort");Ie(this,"allowStaleOnFetchRejection");Ie(this,"ignoreFetchAbort");De(this,I);De(this,O);De(this,T);De(this,F);De(this,x);De(this,q);De(this,H);De(this,U);De(this,ae);De(this,te);De(this,Z);De(this,le);De(this,K);De(this,ie);De(this,M);De(this,G);De(this,fe);De(this,X,()=>{});De(this,D,()=>{});De(this,se,()=>{});De(this,V,()=>!1);De(this,re,h=>{});De(this,me,(h,y,k)=>{});De(this,ue,(h,y,k,j)=>{if(k||j)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Ie(this,w,"LRUCache");let{max:y=0,ttl:k,ttlResolution:j=1,ttlAutopurge:z,updateAgeOnGet:ne,updateAgeOnHas:W,allowStale:Y,dispose:Ae,disposeAfter:Te,noDisposeOnSet:ke,noUpdateTTL:Be,maxSize:Ke=0,maxEntrySize:Ye=0,sizeCalculation:Le,fetchMethod:$e,memoMethod:Re,noDeleteOnFetchRejection:Ue,noDeleteOnStaleGet:We,allowStaleOnFetchRejection:Qe,allowStaleOnFetchAbort:Xe,ignoreFetchAbort:ht}=h;if(y!==0&&!e(y))throw new TypeError("max option must be a nonnegative integer");let C=y?i(y):Array;if(!C)throw new Error("invalid max value: "+y);if(Me(this,g,y),Me(this,_,Ke),this.maxEntrySize=Ye||L(this,_),this.sizeCalculation=Le,this.sizeCalculation){if(!L(this,_)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Re!==void 0&&typeof Re!="function")throw new TypeError("memoMethod must be a function if defined");if(Me(this,P,Re),$e!==void 0&&typeof $e!="function")throw new TypeError("fetchMethod must be a function if specified");if(Me(this,R,$e),Me(this,G,!!$e),Me(this,T,new Map),Me(this,F,new Array(y).fill(void 0)),Me(this,x,new Array(y).fill(void 0)),Me(this,q,new C(y)),Me(this,H,new C(y)),Me(this,U,0),Me(this,ae,0),Me(this,te,d.create(y)),Me(this,I,0),Me(this,O,0),typeof Ae=="function"&&Me(this,S,Ae),typeof Te=="function"?(Me(this,v,Te),Me(this,Z,[])):(Me(this,v,void 0),Me(this,Z,void 0)),Me(this,M,!!L(this,S)),Me(this,fe,!!L(this,v)),this.noDisposeOnSet=!!ke,this.noUpdateTTL=!!Be,this.noDeleteOnFetchRejection=!!Ue,this.allowStaleOnFetchRejection=!!Qe,this.allowStaleOnFetchAbort=!!Xe,this.ignoreFetchAbort=!!ht,this.maxEntrySize!==0){if(L(this,_)!==0&&!e(L(this,_)))throw new TypeError("maxSize must be a positive integer if specified");if(!e(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Pe(this,$,Ia).call(this)}if(this.allowStale=!!Y,this.noDeleteOnStaleGet=!!We,this.updateAgeOnGet=!!ne,this.updateAgeOnHas=!!W,this.ttlResolution=e(j)||j===0?j:1,this.ttlAutopurge=!!z,this.ttl=k||0,this.ttl){if(!e(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Pe(this,$,Ti).call(this)}if(L(this,g)===0&&this.ttl===0&&L(this,_)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!L(this,g)&&!L(this,_)){let N="LRU_CACHE_UNBOUNDED";n(N)&&(o.add(N),f("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",N,je))}}static unsafeExposeInternals(h){return{starts:L(h,K),ttls:L(h,ie),sizes:L(h,le),keyMap:L(h,T),keyList:L(h,F),valList:L(h,x),next:L(h,q),prev:L(h,H),get head(){return L(h,U)},get tail(){return L(h,ae)},free:L(h,te),isBackgroundFetch:y=>{var k;return Pe(k=h,$,ze).call(k,y)},backgroundFetch:(y,k,j,z)=>{var ne;return Pe(ne=h,$,Rr).call(ne,y,k,j,z)},moveToTail:y=>{var k;return Pe(k=h,$,dr).call(k,y)},indexes:y=>{var k;return Pe(k=h,$,jt).call(k,y)},rindexes:y=>{var k;return Pe(k=h,$,Bt).call(k,y)},isStale:y=>{var k;return L(k=h,V).call(k,y)}}}get max(){return L(this,g)}get maxSize(){return L(this,_)}get calculatedSize(){return L(this,O)}get size(){return L(this,I)}get fetchMethod(){return L(this,R)}get memoMethod(){return L(this,P)}get dispose(){return L(this,S)}get disposeAfter(){return L(this,v)}getRemainingTTL(h){return L(this,T).has(h)?1/0:0}*entries(){for(let h of Pe(this,$,jt).call(this))L(this,x)[h]!==void 0&&L(this,F)[h]!==void 0&&!Pe(this,$,ze).call(this,L(this,x)[h])&&(yield[L(this,F)[h],L(this,x)[h]])}*rentries(){for(let h of Pe(this,$,Bt).call(this))L(this,x)[h]!==void 0&&L(this,F)[h]!==void 0&&!Pe(this,$,ze).call(this,L(this,x)[h])&&(yield[L(this,F)[h],L(this,x)[h]])}*keys(){for(let h of Pe(this,$,jt).call(this)){let y=L(this,F)[h];y!==void 0&&!Pe(this,$,ze).call(this,L(this,x)[h])&&(yield y)}}*rkeys(){for(let h of Pe(this,$,Bt).call(this)){let y=L(this,F)[h];y!==void 0&&!Pe(this,$,ze).call(this,L(this,x)[h])&&(yield y)}}*values(){for(let h of Pe(this,$,jt).call(this))L(this,x)[h]!==void 0&&!Pe(this,$,ze).call(this,L(this,x)[h])&&(yield L(this,x)[h])}*rvalues(){for(let h of Pe(this,$,Bt).call(this))L(this,x)[h]!==void 0&&!Pe(this,$,ze).call(this,L(this,x)[h])&&(yield L(this,x)[h])}[(A=Symbol.iterator,w=Symbol.toStringTag,A)](){return this.entries()}find(h,y={}){for(let k of Pe(this,$,jt).call(this)){let j=L(this,x)[k],z=Pe(this,$,ze).call(this,j)?j.__staleWhileFetching:j;if(z!==void 0&&h(z,L(this,F)[k],this))return this.get(L(this,F)[k],y)}}forEach(h,y=this){for(let k of Pe(this,$,jt).call(this)){let j=L(this,x)[k],z=Pe(this,$,ze).call(this,j)?j.__staleWhileFetching:j;z!==void 0&&h.call(y,z,L(this,F)[k],this)}}rforEach(h,y=this){for(let k of Pe(this,$,Bt).call(this)){let j=L(this,x)[k],z=Pe(this,$,ze).call(this,j)?j.__staleWhileFetching:j;z!==void 0&&h.call(y,z,L(this,F)[k],this)}}purgeStale(){let h=!1;for(let y of Pe(this,$,Bt).call(this,{allowStale:!0}))L(this,V).call(this,y)&&(Pe(this,$,Nt).call(this,L(this,F)[y],"expire"),h=!0);return h}info(h){let y=L(this,T).get(h);if(y===void 0)return;let k=L(this,x)[y],j=Pe(this,$,ze).call(this,k)?k.__staleWhileFetching:k;if(j===void 0)return;let z={value:j};if(L(this,ie)&&L(this,K)){let ne=L(this,ie)[y],W=L(this,K)[y];if(ne&&W){let Y=ne-(l.now()-W);z.ttl=Y,z.start=Date.now()}}return L(this,le)&&(z.size=L(this,le)[y]),z}dump(){let h=[];for(let y of Pe(this,$,jt).call(this,{allowStale:!0})){let k=L(this,F)[y],j=L(this,x)[y],z=Pe(this,$,ze).call(this,j)?j.__staleWhileFetching:j;if(z===void 0||k===void 0)continue;let ne={value:z};if(L(this,ie)&&L(this,K)){ne.ttl=L(this,ie)[y];let W=l.now()-L(this,K)[y];ne.start=Math.floor(Date.now()-W)}L(this,le)&&(ne.size=L(this,le)[y]),h.unshift([k,ne])}return h}load(h){this.clear();for(let[y,k]of h){if(k.start){let j=Date.now()-k.start;k.start=l.now()-j}this.set(y,k.value,k)}}set(h,y,k={}){var Be,Ke,Ye,Le,$e;if(y===void 0)return this.delete(h),this;let{ttl:j=this.ttl,start:z,noDisposeOnSet:ne=this.noDisposeOnSet,sizeCalculation:W=this.sizeCalculation,status:Y}=k,{noUpdateTTL:Ae=this.noUpdateTTL}=k,Te=L(this,ue).call(this,h,y,k.size||0,W);if(this.maxEntrySize&&Te>this.maxEntrySize)return Y&&(Y.set="miss",Y.maxEntrySizeExceeded=!0),Pe(this,$,Nt).call(this,h,"set"),this;let ke=L(this,I)===0?void 0:L(this,T).get(h);if(ke===void 0)ke=L(this,I)===0?L(this,ae):L(this,te).length!==0?L(this,te).pop():L(this,I)===L(this,g)?Pe(this,$,Cr).call(this,!1):L(this,I),L(this,F)[ke]=h,L(this,x)[ke]=y,L(this,T).set(h,ke),L(this,q)[L(this,ae)]=ke,L(this,H)[ke]=L(this,ae),Me(this,ae,ke),Ir(this,I)._++,L(this,me).call(this,ke,Te,Y),Y&&(Y.set="add"),Ae=!1;else{Pe(this,$,dr).call(this,ke);let Re=L(this,x)[ke];if(y!==Re){if(L(this,G)&&Pe(this,$,ze).call(this,Re)){Re.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Ue}=Re;Ue!==void 0&&!ne&&(L(this,M)&&((Be=L(this,S))==null||Be.call(this,Ue,h,"set")),L(this,fe)&&((Ke=L(this,Z))==null||Ke.push([Ue,h,"set"])))}else ne||(L(this,M)&&((Ye=L(this,S))==null||Ye.call(this,Re,h,"set")),L(this,fe)&&((Le=L(this,Z))==null||Le.push([Re,h,"set"])));if(L(this,re).call(this,ke),L(this,me).call(this,ke,Te,Y),L(this,x)[ke]=y,Y){Y.set="replace";let Ue=Re&&Pe(this,$,ze).call(this,Re)?Re.__staleWhileFetching:Re;Ue!==void 0&&(Y.oldValue=Ue)}}else Y&&(Y.set="update")}if(j!==0&&!L(this,ie)&&Pe(this,$,Ti).call(this),L(this,ie)&&(Ae||L(this,se).call(this,ke,j,z),Y&&L(this,D).call(this,Y,ke)),!ne&&L(this,fe)&&L(this,Z)){let Re=L(this,Z),Ue;for(;Ue=Re==null?void 0:Re.shift();)($e=L(this,v))==null||$e.call(this,...Ue)}return this}pop(){var h;try{for(;L(this,I);){let y=L(this,x)[L(this,U)];if(Pe(this,$,Cr).call(this,!0),Pe(this,$,ze).call(this,y)){if(y.__staleWhileFetching)return y.__staleWhileFetching}else if(y!==void 0)return y}}finally{if(L(this,fe)&&L(this,Z)){let y=L(this,Z),k;for(;k=y==null?void 0:y.shift();)(h=L(this,v))==null||h.call(this,...k)}}}has(h,y={}){let{updateAgeOnHas:k=this.updateAgeOnHas,status:j}=y,z=L(this,T).get(h);if(z!==void 0){let ne=L(this,x)[z];if(Pe(this,$,ze).call(this,ne)&&ne.__staleWhileFetching===void 0)return!1;if(L(this,V).call(this,z))j&&(j.has="stale",L(this,D).call(this,j,z));else return k&&L(this,X).call(this,z),j&&(j.has="hit",L(this,D).call(this,j,z)),!0}else j&&(j.has="miss");return!1}peek(h,y={}){let{allowStale:k=this.allowStale}=y,j=L(this,T).get(h);if(j===void 0||!k&&L(this,V).call(this,j))return;let z=L(this,x)[j];return Pe(this,$,ze).call(this,z)?z.__staleWhileFetching:z}async fetch(h,y={}){let{allowStale:k=this.allowStale,updateAgeOnGet:j=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,ttl:ne=this.ttl,noDisposeOnSet:W=this.noDisposeOnSet,size:Y=0,sizeCalculation:Ae=this.sizeCalculation,noUpdateTTL:Te=this.noUpdateTTL,noDeleteOnFetchRejection:ke=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Be=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ke=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ye=this.allowStaleOnFetchAbort,context:Le,forceRefresh:$e=!1,status:Re,signal:Ue}=y;if(!L(this,G))return Re&&(Re.fetch="get"),this.get(h,{allowStale:k,updateAgeOnGet:j,noDeleteOnStaleGet:z,status:Re});let We={allowStale:k,updateAgeOnGet:j,noDeleteOnStaleGet:z,ttl:ne,noDisposeOnSet:W,size:Y,sizeCalculation:Ae,noUpdateTTL:Te,noDeleteOnFetchRejection:ke,allowStaleOnFetchRejection:Be,allowStaleOnFetchAbort:Ye,ignoreFetchAbort:Ke,status:Re,signal:Ue},Qe=L(this,T).get(h);if(Qe===void 0){Re&&(Re.fetch="miss");let Xe=Pe(this,$,Rr).call(this,h,Qe,We,Le);return Xe.__returned=Xe}else{let Xe=L(this,x)[Qe];if(Pe(this,$,ze).call(this,Xe)){let Ee=k&&Xe.__staleWhileFetching!==void 0;return Re&&(Re.fetch="inflight",Ee&&(Re.returnedStale=!0)),Ee?Xe.__staleWhileFetching:Xe.__returned=Xe}let ht=L(this,V).call(this,Qe);if(!$e&&!ht)return Re&&(Re.fetch="hit"),Pe(this,$,dr).call(this,Qe),j&&L(this,X).call(this,Qe),Re&&L(this,D).call(this,Re,Qe),Xe;let C=Pe(this,$,Rr).call(this,h,Qe,We,Le),N=C.__staleWhileFetching!==void 0&&k;return Re&&(Re.fetch=ht?"stale":"refresh",N&&ht&&(Re.returnedStale=!0)),N?C.__staleWhileFetching:C.__returned=C}}async forceFetch(h,y={}){let k=await this.fetch(h,y);if(k===void 0)throw new Error("fetch() returned undefined");return k}memo(h,y={}){let k=L(this,P);if(!k)throw new Error("no memoMethod provided to constructor");let{context:j,forceRefresh:z,...ne}=y,W=this.get(h,ne);if(!z&&W!==void 0)return W;let Y=k(h,W,{options:ne,context:j});return this.set(h,Y,ne),Y}get(h,y={}){let{allowStale:k=this.allowStale,updateAgeOnGet:j=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,status:ne}=y,W=L(this,T).get(h);if(W!==void 0){let Y=L(this,x)[W],Ae=Pe(this,$,ze).call(this,Y);return ne&&L(this,D).call(this,ne,W),L(this,V).call(this,W)?(ne&&(ne.get="stale"),Ae?(ne&&k&&Y.__staleWhileFetching!==void 0&&(ne.returnedStale=!0),k?Y.__staleWhileFetching:void 0):(z||Pe(this,$,Nt).call(this,h,"expire"),ne&&k&&(ne.returnedStale=!0),k?Y:void 0)):(ne&&(ne.get="hit"),Ae?Y.__staleWhileFetching:(Pe(this,$,dr).call(this,W),j&&L(this,X).call(this,W),Y))}else ne&&(ne.get="miss")}delete(h){return Pe(this,$,Nt).call(this,h,"delete")}clear(){return Pe(this,$,Pi).call(this,"delete")}},g=new WeakMap,_=new WeakMap,S=new WeakMap,v=new WeakMap,R=new WeakMap,P=new WeakMap,I=new WeakMap,O=new WeakMap,T=new WeakMap,F=new WeakMap,x=new WeakMap,q=new WeakMap,H=new WeakMap,U=new WeakMap,ae=new WeakMap,te=new WeakMap,Z=new WeakMap,le=new WeakMap,K=new WeakMap,ie=new WeakMap,M=new WeakMap,G=new WeakMap,fe=new WeakMap,$=new WeakSet,Ti=function(){let h=new c(L(this,g)),y=new c(L(this,g));Me(this,ie,h),Me(this,K,y),Me(this,se,(z,ne,W=l.now())=>{if(y[z]=ne!==0?W:0,h[z]=ne,ne!==0&&this.ttlAutopurge){let Y=setTimeout(()=>{L(this,V).call(this,z)&&Pe(this,$,Nt).call(this,L(this,F)[z],"expire")},ne+1);Y.unref&&Y.unref()}}),Me(this,X,z=>{y[z]=h[z]!==0?l.now():0}),Me(this,D,(z,ne)=>{if(h[ne]){let W=h[ne],Y=y[ne];if(!W||!Y)return;z.ttl=W,z.start=Y,z.now=k||j();let Ae=z.now-Y;z.remainingTTL=W-Ae}});let k=0,j=()=>{let z=l.now();if(this.ttlResolution>0){k=z;let ne=setTimeout(()=>k=0,this.ttlResolution);ne.unref&&ne.unref()}return z};this.getRemainingTTL=z=>{let ne=L(this,T).get(z);if(ne===void 0)return 0;let W=h[ne],Y=y[ne];if(!W||!Y)return 1/0;let Ae=(k||j())-Y;return W-Ae},Me(this,V,z=>{let ne=y[z],W=h[z];return!!W&&!!ne&&(k||j())-ne>W})},X=new WeakMap,D=new WeakMap,se=new WeakMap,V=new WeakMap,Ia=function(){let h=new c(L(this,g));Me(this,O,0),Me(this,le,h),Me(this,re,y=>{Me(this,O,L(this,O)-h[y]),h[y]=0}),Me(this,ue,(y,k,j,z)=>{if(Pe(this,$,ze).call(this,k))return 0;if(!e(j))if(z){if(typeof z!="function")throw new TypeError("sizeCalculation must be a function");if(j=z(k,y),!e(j))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return j}),Me(this,me,(y,k,j)=>{if(h[y]=k,L(this,_)){let z=L(this,_)-h[y];for(;L(this,O)>z;)Pe(this,$,Cr).call(this,!0)}Me(this,O,L(this,O)+h[y]),j&&(j.entrySize=k,j.totalCalculatedSize=L(this,O))})},re=new WeakMap,me=new WeakMap,ue=new WeakMap,jt=function*({allowStale:h=this.allowStale}={}){if(L(this,I))for(let y=L(this,ae);!(!Pe(this,$,ki).call(this,y)||((h||!L(this,V).call(this,y))&&(yield y),y===L(this,U)));)y=L(this,H)[y]},Bt=function*({allowStale:h=this.allowStale}={}){if(L(this,I))for(let y=L(this,U);!(!Pe(this,$,ki).call(this,y)||((h||!L(this,V).call(this,y))&&(yield y),y===L(this,ae)));)y=L(this,q)[y]},ki=function(h){return h!==void 0&&L(this,T).get(L(this,F)[h])===h},Cr=function(h){var z,ne;let y=L(this,U),k=L(this,F)[y],j=L(this,x)[y];return L(this,G)&&Pe(this,$,ze).call(this,j)?j.__abortController.abort(new Error("evicted")):(L(this,M)||L(this,fe))&&(L(this,M)&&((z=L(this,S))==null||z.call(this,j,k,"evict")),L(this,fe)&&((ne=L(this,Z))==null||ne.push([j,k,"evict"]))),L(this,re).call(this,y),h&&(L(this,F)[y]=void 0,L(this,x)[y]=void 0,L(this,te).push(y)),L(this,I)===1?(Me(this,U,Me(this,ae,0)),L(this,te).length=0):Me(this,U,L(this,q)[y]),L(this,T).delete(k),Ir(this,I)._--,y},Rr=function(h,y,k,j){let z=y===void 0?void 0:L(this,x)[y];if(Pe(this,$,ze).call(this,z))return z;let ne=new r,{signal:W}=k;W==null||W.addEventListener("abort",()=>ne.abort(W.reason),{signal:ne.signal});let Y={signal:ne.signal,options:k,context:j},Ae=(Le,$e=!1)=>{let{aborted:Re}=ne.signal,Ue=k.ignoreFetchAbort&&Le!==void 0;if(k.status&&(Re&&!$e?(k.status.fetchAborted=!0,k.status.fetchError=ne.signal.reason,Ue&&(k.status.fetchAbortIgnored=!0)):k.status.fetchResolved=!0),Re&&!Ue&&!$e)return ke(ne.signal.reason);let We=Ke;return L(this,x)[y]===Ke&&(Le===void 0?We.__staleWhileFetching?L(this,x)[y]=We.__staleWhileFetching:Pe(this,$,Nt).call(this,h,"fetch"):(k.status&&(k.status.fetchUpdated=!0),this.set(h,Le,Y.options))),Le},Te=Le=>(k.status&&(k.status.fetchRejected=!0,k.status.fetchError=Le),ke(Le)),ke=Le=>{let{aborted:$e}=ne.signal,Re=$e&&k.allowStaleOnFetchAbort,Ue=Re||k.allowStaleOnFetchRejection,We=Ue||k.noDeleteOnFetchRejection,Qe=Ke;if(L(this,x)[y]===Ke&&(!We||Qe.__staleWhileFetching===void 0?Pe(this,$,Nt).call(this,h,"fetch"):Re||(L(this,x)[y]=Qe.__staleWhileFetching)),Ue)return k.status&&Qe.__staleWhileFetching!==void 0&&(k.status.returnedStale=!0),Qe.__staleWhileFetching;if(Qe.__returned===Qe)throw Le},Be=(Le,$e)=>{var Ue;let Re=(Ue=L(this,R))==null?void 0:Ue.call(this,h,z,Y);Re&&Re instanceof Promise&&Re.then(We=>Le(We===void 0?void 0:We),$e),ne.signal.addEventListener("abort",()=>{(!k.ignoreFetchAbort||k.allowStaleOnFetchAbort)&&(Le(void 0),k.allowStaleOnFetchAbort&&(Le=We=>Ae(We,!0)))})};k.status&&(k.status.fetchDispatched=!0);let Ke=new Promise(Be).then(Ae,Te),Ye=Object.assign(Ke,{__abortController:ne,__staleWhileFetching:z,__returned:void 0});return y===void 0?(this.set(h,Ye,{...Y.options,status:void 0}),y=L(this,T).get(h)):L(this,x)[y]=Ye,Ye},ze=function(h){if(!L(this,G))return!1;let y=h;return!!y&&y instanceof Promise&&y.hasOwnProperty("__staleWhileFetching")&&y.__abortController instanceof r},Oi=function(h,y){L(this,H)[y]=h,L(this,q)[h]=y},dr=function(h){h!==L(this,ae)&&(h===L(this,U)?Me(this,U,L(this,q)[h]):Pe(this,$,Oi).call(this,L(this,H)[h],L(this,q)[h]),Pe(this,$,Oi).call(this,L(this,ae),h),Me(this,ae,h))},Nt=function(h,y){var j,z,ne,W;let k=!1;if(L(this,I)!==0){let Y=L(this,T).get(h);if(Y!==void 0)if(k=!0,L(this,I)===1)Pe(this,$,Pi).call(this,y);else{L(this,re).call(this,Y);let Ae=L(this,x)[Y];if(Pe(this,$,ze).call(this,Ae)?Ae.__abortController.abort(new Error("deleted")):(L(this,M)||L(this,fe))&&(L(this,M)&&((j=L(this,S))==null||j.call(this,Ae,h,y)),L(this,fe)&&((z=L(this,Z))==null||z.push([Ae,h,y]))),L(this,T).delete(h),L(this,F)[Y]=void 0,L(this,x)[Y]=void 0,Y===L(this,ae))Me(this,ae,L(this,H)[Y]);else if(Y===L(this,U))Me(this,U,L(this,q)[Y]);else{let Te=L(this,H)[Y];L(this,q)[Te]=L(this,q)[Y];let ke=L(this,q)[Y];L(this,H)[ke]=L(this,H)[Y]}Ir(this,I)._--,L(this,te).push(Y)}}if(L(this,fe)&&((ne=L(this,Z))!=null&&ne.length)){let Y=L(this,Z),Ae;for(;Ae=Y==null?void 0:Y.shift();)(W=L(this,v))==null||W.call(this,...Ae)}return k},Pi=function(h){var y,k,j;for(let z of Pe(this,$,Bt).call(this,{allowStale:!0})){let ne=L(this,x)[z];if(Pe(this,$,ze).call(this,ne))ne.__abortController.abort(new Error("deleted"));else{let W=L(this,F)[z];L(this,M)&&((y=L(this,S))==null||y.call(this,ne,W,h)),L(this,fe)&&((k=L(this,Z))==null||k.push([ne,W,h]))}}if(L(this,T).clear(),L(this,x).fill(void 0),L(this,F).fill(void 0),L(this,ie)&&L(this,K)&&(L(this,ie).fill(0),L(this,K).fill(0)),L(this,le)&&L(this,le).fill(0),Me(this,U,0),Me(this,ae,0),L(this,te).length=0,Me(this,O,0),Me(this,I,0),L(this,fe)&&L(this,Z)){let z=L(this,Z),ne;for(;ne=z==null?void 0:z.shift();)(j=L(this,v))==null||j.call(this,...ne)}},je);s.LRUCache=p}),Ot=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.ContainerIterator=s.Container=s.Base=void 0;var l=class{constructor(f=0){this.iteratorType=f}equals(f){return this.o===f.o}};s.ContainerIterator=l;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};s.Base=o;var a=class extends o{};s.Container=a}),fu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=Ot(),o=class extends l.Base{constructor(f=[]){super(),this.S=[];let r=this;f.forEach(function(t){r.push(t)})}clear(){this.i=0,this.S=[]}push(f){return this.S.push(f),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},a=o;s.default=a}),hu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=Ot(),o=class extends l.Base{constructor(f=[]){super(),this.j=0,this.q=[];let r=this;f.forEach(function(t){r.push(t)})}clear(){this.q=[],this.i=this.j=0}push(f){let r=this.q.length;if(this.j/r>.5&&this.j+this.i>=r&&r>4096){let t=this.i;for(let n=0;n<t;++n)this.q[n]=this.q[this.j+n];this.j=0,this.q[this.i]=f}else this.q[this.j+this.i]=f;return++this.i}pop(){if(this.i===0)return;let f=this.q[this.j++];return this.i-=1,f}front(){if(this.i!==0)return this.q[this.j]}},a=o;s.default=a}),pu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=Ot(),o=class extends l.Base{constructor(f=[],r=function(n,e){return n>e?-1:n<e?1:0},t=!0){if(super(),this.v=r,Array.isArray(f))this.C=t?[...f]:f;else{this.C=[];let e=this;f.forEach(function(i){e.C.push(i)})}this.i=this.C.length;let n=this.i>>1;for(let e=this.i-1>>1;e>=0;--e)this.k(e,n)}m(f){let r=this.C[f];for(;f>0;){let t=f-1>>1,n=this.C[t];if(this.v(n,r)<=0)break;this.C[f]=n,f=t}this.C[f]=r}k(f,r){let t=this.C[f];for(;f<r;){let n=f<<1|1,e=n+1,i=this.C[n];if(e<this.i&&this.v(i,this.C[e])>0&&(n=e,i=this.C[e]),this.v(i,t)>=0)break;this.C[f]=i,f=n}this.C[f]=t}clear(){this.i=0,this.C.length=0}push(f){this.C.push(f),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let f=this.C[0],r=this.C.pop();return this.i-=1,this.i&&(this.C[0]=r,this.k(0,this.i>>1)),f}top(){return this.C[0]}find(f){return this.C.indexOf(f)>=0}remove(f){let r=this.C.indexOf(f);return r<0?!1:(r===0?this.pop():r===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(r,1,this.C.pop()),this.i-=1,this.m(r),this.k(r,this.i>>1)),!0)}updateItem(f){let r=this.C.indexOf(f);return r<0?!1:(this.m(r),this.k(r,this.i>>1),!0)}toArray(){return[...this.C]}},a=o;s.default=a}),Io=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=Ot(),o=class extends l.Container{},a=o;s.default=a}),Pt=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.throwIteratorAccessError=l;function l(){throw new RangeError("Iterator access denied!")}}),xa=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.RandomIterator=void 0;var l=Ot(),o=Pt(),a=class extends l.ContainerIterator{constructor(f,r){super(r),this.o=f,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(f){this.container.setElementByPos(this.o,f)}};s.RandomIterator=a}),du=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=a(Io()),o=xa();function a(n){return n&&n.t?n:{default:n}}var f=class Ta extends o.RandomIterator{constructor(e,i,c){super(e,c),this.container=i}copy(){return new Ta(this.o,this.container,this.iteratorType)}},r=class extends l.default{constructor(n=[],e=!0){if(super(),Array.isArray(n))this.J=e?[...n]:n,this.i=n.length;else{this.J=[];let i=this;n.forEach(function(c){i.pushBack(c)})}}clear(){this.i=0,this.J.length=0}begin(){return new f(0,this)}end(){return new f(this.i,this)}rBegin(){return new f(this.i-1,this,1)}rEnd(){return new f(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J[n]}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J.splice(n,1),this.i-=1,this.i}eraseElementByValue(n){let e=0;for(let i=0;i<this.i;++i)this.J[i]!==n&&(this.J[e++]=this.J[i]);return this.i=this.J.length=e,this.i}eraseElementByIterator(n){let e=n.o;return n=n.next(),this.eraseElementByPos(e),n}pushBack(n){return this.J.push(n),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(n,e){if(n<0||n>this.i-1)throw new RangeError;this.J[n]=e}insert(n,e,i=1){if(n<0||n>this.i)throw new RangeError;return this.J.splice(n,0,...new Array(i).fill(e)),this.i+=i,this.i}find(n){for(let e=0;e<this.i;++e)if(this.J[e]===n)return new f(e,this);return this.end()}reverse(){this.J.reverse()}unique(){let n=1;for(let e=1;e<this.i;++e)this.J[e]!==this.J[e-1]&&(this.J[n++]=this.J[e]);return this.i=this.J.length=n,this.i}sort(n){this.J.sort(n)}forEach(n){for(let e=0;e<this.i;++e)n(this.J[e],e,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},t=r;s.default=t}),gu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=f(Io()),o=Ot(),a=Pt();function f(e){return e&&e.t?e:{default:e}}var r=class ka extends o.ContainerIterator{constructor(i,c,d,p){super(p),this.o=i,this.h=c,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l}set pointer(i){this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l=i}copy(){return new ka(this.o,this.h,this.container,this.iteratorType)}},t=class extends l.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let i=this;e.forEach(function(c){i.pushBack(c)})}V(e){let{L:i,B:c}=e;i.B=c,c.L=i,e===this.p&&(this.p=c),e===this._&&(this._=i),this.i-=1}G(e,i){let c=i.B,d={l:e,L:i,B:c};i.B=d,c.L=d,i===this.h&&(this.p=d),c===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return i.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return this.V(i),this.i}eraseElementByValue(e){let i=this.p;for(;i!==this.h;)i.l===e&&this.V(i),i=i.B;return this.i}eraseElementByIterator(e){let i=e.o;return i===this.h&&(0,a.throwIteratorAccessError)(),e=e.next(),this.V(i),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(this.i===0)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(this.i===0)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,i){if(e<0||e>this.i-1)throw new RangeError;let c=this.p;for(;e--;)c=c.B;c.l=i}insert(e,i,c=1){if(e<0||e>this.i)throw new RangeError;if(c<=0)return this.i;if(e===0)for(;c--;)this.pushFront(i);else if(e===this.i)for(;c--;)this.pushBack(i);else{let d=this.p;for(let m=1;m<e;++m)d=d.B;let p=d.B;for(this.i+=c;c--;)d.B={l:i,L:d},d.B.L=d,d=d.B;d.B=p,p.L=d}return this.i}find(e){let i=this.p;for(;i!==this.h;){if(i.l===e)return new r(i,this.h,this);i=i.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,i=this._,c=0;for(;c<<1<this.i;){let d=e.l;e.l=i.l,i.l=d,e=e.B,i=i.L,c+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let i=e;for(;i.B!==this.h&&i.l===i.B.l;)i=i.B,this.i-=1;e.B=i.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let i=[];this.forEach(function(d){i.push(d)}),i.sort(e);let c=this.p;i.forEach(function(d){c.l=d,c=c.B})}merge(e){let i=this;if(this.i===0)e.forEach(function(c){i.pushBack(c)});else{let c=this.p;e.forEach(function(d){for(;c!==i.h&&c.l<=d;)c=c.B;i.G(d,c.L)})}return this.i}forEach(e){let i=this.p,c=0;for(;i!==this.h;)e(i.l,c++,this),i=i.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}).bind(this)()}},n=t;s.default=n}),yu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=a(Io()),o=xa();function a(n){return n&&n.t?n:{default:n}}var f=class Oa extends o.RandomIterator{constructor(e,i,c){super(e,c),this.container=i}copy(){return new Oa(this.o,this.container,this.iteratorType)}},r=class extends l.default{constructor(n=[],e=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let i=(()=>{if(typeof n.length=="number")return n.length;if(typeof n.size=="number")return n.size;if(typeof n.size=="function")return n.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=e,this.P=Math.max(Math.ceil(i/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let c=Math.ceil(i/this.F);this.j=this.R=(this.P>>1)-(c>>1),this.D=this.N=this.F-i%this.F>>1;let d=this;n.forEach(function(p){d.pushBack(p)})}T(){let n=[],e=Math.max(this.P>>1,1);for(let i=0;i<e;++i)n[i]=new Array(this.F);for(let i=this.j;i<this.P;++i)n[n.length]=this.A[i];for(let i=0;i<this.R;++i)n[n.length]=this.A[i];n[n.length]=[...this.A[this.R]],this.j=e,this.R=n.length-1;for(let i=0;i<e;++i)n[n.length]=new Array(this.F);this.A=n,this.P=n.length}O(n){let e=this.D+n+1,i=e%this.F,c=i-1,d=this.j+(e-i)/this.F;return i===0&&(d-=1),d%=this.P,c<0&&(c+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:c}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new f(0,this)}end(){return new f(this.i,this)}rBegin(){return new f(this.i-1,this,1)}rEnd(){return new f(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(n){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=n,this.i}popBack(){if(this.i===0)return;let n=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,n}pushFront(n){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=n,this.i}popFront(){if(this.i===0)return;let n=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,n}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(n);return this.A[e][i]}setElementByPos(n,e){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:c}=this.O(n);this.A[i][c]=e}insert(n,e,i=1){if(n<0||n>this.i)throw new RangeError;if(n===0)for(;i--;)this.pushFront(e);else if(n===this.i)for(;i--;)this.pushBack(e);else{let c=[];for(let d=n;d<this.i;++d)c.push(this.getElementByPos(d));this.cut(n-1);for(let d=0;d<i;++d)this.pushBack(e);for(let d=0;d<c.length;++d)this.pushBack(c[d])}return this.i}cut(n){if(n<0)return this.clear(),0;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(n);return this.R=e,this.N=i,this.i=n+1,this.i}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;if(n===0)this.popFront();else if(n===this.i-1)this.popBack();else{let e=[];for(let c=n+1;c<this.i;++c)e.push(this.getElementByPos(c));this.cut(n),this.popBack();let i=this;e.forEach(function(c){i.pushBack(c)})}return this.i}eraseElementByValue(n){if(this.i===0)return 0;let e=[];for(let c=0;c<this.i;++c){let d=this.getElementByPos(c);d!==n&&e.push(d)}let i=e.length;for(let c=0;c<i;++c)this.setElementByPos(c,e[c]);return this.cut(i-1)}eraseElementByIterator(n){let e=n.o;return this.eraseElementByPos(e),n=n.next(),n}find(n){for(let e=0;e<this.i;++e)if(this.getElementByPos(e)===n)return new f(e,this);return this.end()}reverse(){let n=0,e=this.i-1;for(;n<e;){let i=this.getElementByPos(n);this.setElementByPos(n,this.getElementByPos(e)),this.setElementByPos(e,i),n+=1,e-=1}}unique(){if(this.i<=1)return this.i;let n=1,e=this.getElementByPos(0);for(let i=1;i<this.i;++i){let c=this.getElementByPos(i);c!==e&&(e=c,this.setElementByPos(n++,c))}for(;this.i>n;)this.popBack();return this.i}sort(n){let e=[];for(let i=0;i<this.i;++i)e.push(this.getElementByPos(i));e.sort(n);for(let i=0;i<this.i;++i)this.setElementByPos(i,e[i])}shrinkToFit(){if(this.i===0)return;let n=[];this.forEach(function(e){n.push(e)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));for(let e=0;e<n.length;++e)this.pushBack(n[e])}forEach(n){for(let e=0;e<this.i;++e)n(this.getElementByPos(e),e,this)}[Symbol.iterator](){return(function*(){for(let n=0;n<this.i;++n)yield this.getElementByPos(n)}).bind(this)()}},t=r;s.default=t}),mu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.TreeNodeEnableIndex=s.TreeNode=void 0;var l=class{constructor(a,f){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=a,this.l=f}L(){let a=this;if(a.ee===1&&a.tt.tt===a)a=a.W;else if(a.U)for(a=a.U;a.W;)a=a.W;else{let f=a.tt;for(;f.U===a;)a=f,f=a.tt;a=f}return a}B(){let a=this;if(a.W){for(a=a.W;a.U;)a=a.U;return a}else{let f=a.tt;for(;f.W===a;)a=f,f=a.tt;return a.W!==f?f:a}}te(){let a=this.tt,f=this.W,r=f.U;return a.tt===this?a.tt=f:a.U===this?a.U=f:a.W=f,f.tt=a,f.U=this,this.tt=f,this.W=r,r&&(r.tt=this),f}se(){let a=this.tt,f=this.U,r=f.W;return a.tt===this?a.tt=f:a.U===this?a.U=f:a.W=f,f.tt=a,f.W=this,this.tt=f,this.U=r,r&&(r.tt=this),f}};s.TreeNode=l;var o=class extends l{constructor(){super(...arguments),this.rt=1}te(){let a=super.te();return this.ie(),a.ie(),a}se(){let a=super.se();return this.ie(),a.ie(),a}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};s.TreeNodeEnableIndex=o}),Pa=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=mu(),o=Ot(),a=Pt(),f=class extends o.Container{constructor(t=function(e,i){return e<i?-1:e>i?1:0},n=!1){super(),this.Y=void 0,this.v=t,n?(this.re=l.TreeNodeEnableIndex,this.M=function(e,i,c){let d=this.ne(e,i,c);if(d){let p=d.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let m=this.he(d);if(m){let{parentNode:b,grandParent:E,curNode:w}=m;b.ie(),E.ie(),w.ie()}}return this.i},this.V=function(e){let i=this.fe(e);for(;i!==this.h;)i.rt-=1,i=i.tt}):(this.re=l.TreeNode,this.M=function(e,i,c){let d=this.ne(e,i,c);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(t,n){let e=this.h;for(;t;){let i=this.v(t.u,n);if(i<0)t=t.W;else if(i>0)e=t,t=t.U;else return t}return e}Z(t,n){let e=this.h;for(;t;)this.v(t.u,n)<=0?t=t.W:(e=t,t=t.U);return e}$(t,n){let e=this.h;for(;t;){let i=this.v(t.u,n);if(i<0)e=t,t=t.W;else if(i>0)t=t.U;else return t}return e}rr(t,n){let e=this.h;for(;t;)this.v(t.u,n)<0?(e=t,t=t.W):t=t.U;return e}ue(t){for(;;){let n=t.tt;if(n===this.h)return;if(t.ee===1){t.ee=0;return}if(t===n.U){let e=n.W;if(e.ee===1)e.ee=0,n.ee=1,n===this.Y?this.Y=n.te():n.te();else if(e.W&&e.W.ee===1){e.ee=n.ee,n.ee=0,e.W.ee=0,n===this.Y?this.Y=n.te():n.te();return}else e.U&&e.U.ee===1?(e.ee=1,e.U.ee=0,e.se()):(e.ee=1,t=n)}else{let e=n.U;if(e.ee===1)e.ee=0,n.ee=1,n===this.Y?this.Y=n.se():n.se();else if(e.U&&e.U.ee===1){e.ee=n.ee,n.ee=0,e.U.ee=0,n===this.Y?this.Y=n.se():n.se();return}else e.W&&e.W.ee===1?(e.ee=1,e.W.ee=0,e.te()):(e.ee=1,t=n)}}}fe(t){if(this.i===1)return this.clear(),this.h;let n=t;for(;n.U||n.W;){if(n.W)for(n=n.W;n.U;)n=n.U;else n=n.U;[t.u,n.u]=[n.u,t.u],[t.l,n.l]=[n.l,t.l],t=n}this.h.U===n?this.h.U=n.tt:this.h.W===n&&(this.h.W=n.tt),this.ue(n);let e=n.tt;return n===e.U?e.U=void 0:e.W=void 0,this.i-=1,this.Y.ee=0,e}oe(t,n){return t===void 0?!1:this.oe(t.U,n)||n(t)?!0:this.oe(t.W,n)}he(t){for(;;){let n=t.tt;if(n.ee===0)return;let e=n.tt;if(n===e.U){let i=e.W;if(i&&i.ee===1){if(i.ee=n.ee=0,e===this.Y)return;e.ee=1,t=e;continue}else if(t===n.W){if(t.ee=0,t.U&&(t.U.tt=n),t.W&&(t.W.tt=e),n.W=t.U,e.U=t.W,t.U=n,t.W=e,e===this.Y)this.Y=t,this.h.tt=t;else{let c=e.tt;c.U===e?c.U=t:c.W=t}return t.tt=e.tt,n.tt=t,e.tt=t,e.ee=1,{parentNode:n,grandParent:e,curNode:t}}else n.ee=0,e===this.Y?this.Y=e.se():e.se(),e.ee=1}else{let i=e.U;if(i&&i.ee===1){if(i.ee=n.ee=0,e===this.Y)return;e.ee=1,t=e;continue}else if(t===n.U){if(t.ee=0,t.U&&(t.U.tt=e),t.W&&(t.W.tt=n),e.W=t.U,n.U=t.W,t.U=e,t.W=n,e===this.Y)this.Y=t,this.h.tt=t;else{let c=e.tt;c.U===e?c.U=t:c.W=t}return t.tt=e.tt,n.tt=t,e.tt=t,e.ee=1,{parentNode:n,grandParent:e,curNode:t}}else n.ee=0,e===this.Y?this.Y=e.te():e.te(),e.ee=1}return}}ne(t,n,e){if(this.Y===void 0){this.i+=1,this.Y=new this.re(t,n),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let i,c=this.h.U,d=this.v(c.u,t);if(d===0){c.l=n;return}else if(d>0)c.U=new this.re(t,n),c.U.tt=c,i=c.U,this.h.U=i;else{let p=this.h.W,m=this.v(p.u,t);if(m===0){p.l=n;return}else if(m<0)p.W=new this.re(t,n),p.W.tt=p,i=p.W,this.h.W=i;else{if(e!==void 0){let b=e.o;if(b!==this.h){let E=this.v(b.u,t);if(E===0){b.l=n;return}else if(E>0){let w=b.L(),A=this.v(w.u,t);if(A===0){w.l=n;return}else A<0&&(i=new this.re(t,n),w.W===void 0?(w.W=i,i.tt=w):(b.U=i,i.tt=b))}}}if(i===void 0)for(i=this.Y;;){let b=this.v(i.u,t);if(b>0){if(i.U===void 0){i.U=new this.re(t,n),i.U.tt=i,i=i.U;break}i=i.U}else if(b<0){if(i.W===void 0){i.W=new this.re(t,n),i.W.tt=i,i=i.W;break}i=i.W}else{i.l=n;return}}}}return this.i+=1,i}I(t,n){for(;t;){let e=this.v(t.u,n);if(e<0)t=t.W;else if(e>0)t=t.U;else return t}return t||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(t,n){let e=t.o;if(e===this.h&&(0,a.throwIteratorAccessError)(),this.i===1)return e.u=n,!0;if(e===this.h.U)return this.v(e.B().u,n)>0?(e.u=n,!0):!1;if(e===this.h.W)return this.v(e.L().u,n)<0?(e.u=n,!0):!1;let i=e.L().u;if(this.v(i,n)>=0)return!1;let c=e.B().u;return this.v(c,n)<=0?!1:(e.u=n,!0)}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=0,e=this;return this.oe(this.Y,function(i){return t===n?(e.V(i),!0):(n+=1,!1)}),this.i}eraseElementByKey(t){if(this.i===0)return!1;let n=this.I(this.Y,t);return n===this.h?!1:(this.V(n),!0)}eraseElementByIterator(t){let n=t.o;n===this.h&&(0,a.throwIteratorAccessError)();let e=n.W===void 0;return t.iteratorType===0?e&&t.next():(!e||n.U===void 0)&&t.next(),this.V(n),t}forEach(t){let n=0;for(let e of this)t(e,n++,this)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n,e=0;for(let i of this){if(e===t){n=i;break}e+=1}return n}getHeight(){if(this.i===0)return 0;let t=function(n){return n?Math.max(t(n.U),t(n.W))+1:0};return t(this.Y)}},r=f;s.default=r}),Ca=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=Ot(),o=Pt(),a=class extends l.ContainerIterator{constructor(r,t,n){super(n),this.o=r,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let r=this.o,t=this.h.tt;if(r===this.h)return t?t.rt-1:0;let n=0;for(r.U&&(n+=r.U.rt);r!==t;){let e=r.tt;r===e.W&&(n+=1,e.U&&(n+=e.U.rt)),r=e}return n}},f=a;s.default=f}),bu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=f(Pa()),o=f(Ca()),a=Pt();function f(e){return e&&e.t?e:{default:e}}var r=class Ra extends o.default{constructor(i,c,d,p){super(i,c,p),this.container=d}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.u}copy(){return new Ra(this.o,this.h,this.container,this.iteratorType)}},t=class extends l.default{constructor(e=[],i,c){super(i,c);let d=this;e.forEach(function(p){d.insert(p)})}*K(e){e!==void 0&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,i){return this.M(e,void 0,i)}find(e){let i=this.I(this.Y,e);return new r(i,this.h,this)}lowerBound(e){let i=this.X(this.Y,e);return new r(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new r(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new r(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new r(i,this.h,this)}union(e){let i=this;return e.forEach(function(c){i.insert(c)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=t;s.default=n}),vu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=f(Pa()),o=f(Ca()),a=Pt();function f(e){return e&&e.t?e:{default:e}}var r=class Ma extends o.default{constructor(i,c,d,p){super(i,c,p),this.container=d}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let i=this;return new Proxy([],{get(c,d){if(d==="0")return i.o.u;if(d==="1")return i.o.l},set(c,d,p){if(d!=="1")throw new TypeError("props must be 1");return i.o.l=p,!0}})}copy(){return new Ma(this.o,this.h,this.container,this.iteratorType)}},t=class extends l.default{constructor(e=[],i,c){super(i,c);let d=this;e.forEach(function(p){d.setElement(p[0],p[1])})}*K(e){e!==void 0&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i===0)return;let e=this.h.U;return[e.u,e.l]}back(){if(this.i===0)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let i=this.X(this.Y,e);return new r(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new r(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new r(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new r(i,this.h,this)}setElement(e,i,c){return this.M(e,i,c)}find(e){let i=this.I(this.Y,e);return new r(i,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let i=this;return e.forEach(function(c){i.setElement(c[0],c[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=t;s.default=n}),ja=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=l;function l(o){let a=typeof o;return a==="object"&&o!==null||a==="function"}}),Ba=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.HashContainerIterator=s.HashContainer=void 0;var l=Ot(),o=f(ja()),a=Pt();function f(n){return n&&n.t?n:{default:n}}var r=class extends l.ContainerIterator{constructor(n,e,i){super(i),this.o=n,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}};s.HashContainerIterator=r;var t=class extends l.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(n){let{L:e,B:i}=n;e.B=i,i.L=e,n===this.p&&(this.p=i),n===this._&&(this._=e),this.i-=1}M(n,e,i){i===void 0&&(i=(0,o.default)(n));let c;if(i){let d=n[this.HASH_TAG];if(d!==void 0)return this.H[d].l=e,this.i;Object.defineProperty(n,this.HASH_TAG,{value:this.H.length,configurable:!0}),c={u:n,l:e,L:this._,B:this.h},this.H.push(c)}else{let d=this.g[n];if(d)return d.l=e,this.i;c={u:n,l:e,L:this._,B:this.h},this.g[n]=c}return this.i===0?(this.p=c,this.h.B=c):this._.B=c,this._=c,this.h.L=c,++this.i}I(n,e){if(e===void 0&&(e=(0,o.default)(n)),e){let i=n[this.HASH_TAG];return i===void 0?this.h:this.H[i]}else return this.g[n]||this.h}clear(){let n=this.HASH_TAG;this.H.forEach(function(e){delete e.u[n]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(n,e){let i;if(e===void 0&&(e=(0,o.default)(n)),e){let c=n[this.HASH_TAG];if(c===void 0)return!1;delete n[this.HASH_TAG],i=this.H[c],delete this.H[c]}else{if(i=this.g[n],i===void 0)return!1;delete this.g[n]}return this.V(i),!0}eraseElementByIterator(n){let e=n.o;return e===this.h&&(0,a.throwIteratorAccessError)(),this.V(e),n.next()}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let e=this.p;for(;n--;)e=e.B;return this.V(e),this.i}};s.HashContainer=t}),wu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=Ba(),o=Pt(),a=class Na extends l.HashContainerIterator{constructor(n,e,i,c){super(n,e,c),this.container=i}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new Na(this.o,this.h,this.container,this.iteratorType)}},f=class extends l.HashContainer{constructor(t=[]){super();let n=this;t.forEach(function(e){n.insert(e)})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(t,n){return this.M(t,void 0,n)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return n.u}find(t,n){let e=this.I(t,n);return new a(e,this.h,this)}forEach(t){let n=0,e=this.p;for(;e!==this.h;)t(e.u,n++,this),e=e.B}[Symbol.iterator](){return(function*(){let t=this.p;for(;t!==this.h;)yield t.u,t=t.B}).bind(this)()}},r=f;s.default=r}),_u=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var l=Ba(),o=f(ja()),a=Pt();function f(e){return e&&e.t?e:{default:e}}var r=class La extends l.HashContainerIterator{constructor(i,c,d,p){super(i,c,p),this.container=d}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let i=this;return new Proxy([],{get(c,d){if(d==="0")return i.o.u;if(d==="1")return i.o.l},set(c,d,p){if(d!=="1")throw new TypeError("props must be 1");return i.o.l=p,!0}})}copy(){return new La(this.o,this.h,this.container,this.iteratorType)}},t=class extends l.HashContainer{constructor(e=[]){super();let i=this;e.forEach(function(c){i.setElement(c[0],c[1])})}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(e,i,c){return this.M(e,i,c)}getElementByKey(e,i){if(i===void 0&&(i=(0,o.default)(e)),i){let d=e[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let c=this.g[e];return c?c.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return[i.u,i.l]}find(e,i){let c=this.I(e,i);return new r(c,this.h,this)}forEach(e){let i=0,c=this.p;for(;c!==this.h;)e([c.u,c.l],i++,this),c=c.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}).bind(this)()}},n=t;s.default=n}),Eu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"t",{value:!0}),Object.defineProperty(s,"Deque",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(s,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(s,"HashSet",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(s,"LinkList",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(s,"OrderedMap",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(s,"OrderedSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(s,"PriorityQueue",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(s,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"Stack",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"Vector",{enumerable:!0,get:function(){return f.default}});var l=d(fu()),o=d(hu()),a=d(pu()),f=d(du()),r=d(gu()),t=d(yu()),n=d(bu()),e=d(vu()),i=d(wu()),c=d(_u());function d(p){return p&&p.t?p:{default:p}}}),Su=be((s,l)=>{he(),de(),pe();var o=Eu().OrderedSet,a=Tt()("number-allocator:trace"),f=Tt()("number-allocator:error");function r(n,e){this.low=n,this.high=e}r.prototype.equals=function(n){return this.low===n.low&&this.high===n.high},r.prototype.compare=function(n){return this.low<n.low&&this.high<n.low?-1:n.low<this.low&&n.high<this.low?1:0};function t(n,e){if(!(this instanceof t))return new t(n,e);this.min=n,this.max=e,this.ss=new o([],(i,c)=>i.compare(c)),a("Create"),this.clear()}t.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},t.prototype.alloc=function(){if(this.ss.size()===0)return a("alloc():empty"),null;let n=this.ss.begin(),e=n.pointer.low,i=n.pointer.high,c=e;return c+1<=i?this.ss.updateKeyByIterator(n,new r(e+1,i)):this.ss.eraseElementByPos(0),a("alloc():"+c),c},t.prototype.use=function(n){let e=new r(n,n),i=this.ss.lowerBound(e);if(!i.equals(this.ss.end())){let c=i.pointer.low,d=i.pointer.high;return i.pointer.equals(e)?(this.ss.eraseElementByIterator(i),a("use():"+n),!0):c>n?!1:c===n?(this.ss.updateKeyByIterator(i,new r(c+1,d)),a("use():"+n),!0):d===n?(this.ss.updateKeyByIterator(i,new r(c,d-1)),a("use():"+n),!0):(this.ss.updateKeyByIterator(i,new r(n+1,d)),this.ss.insert(new r(c,n-1)),a("use():"+n),!0)}return a("use():failed"),!1},t.prototype.free=function(n){if(n<this.min||n>this.max){f("free():"+n+" is out of range");return}let e=new r(n,n),i=this.ss.upperBound(e);if(i.equals(this.ss.end())){if(i.equals(this.ss.begin())){this.ss.insert(e);return}i.pre();let c=i.pointer.high;i.pointer.high+1===n?this.ss.updateKeyByIterator(i,new r(c,n)):this.ss.insert(e)}else if(i.equals(this.ss.begin()))if(n+1===i.pointer.low){let c=i.pointer.high;this.ss.updateKeyByIterator(i,new r(n,c))}else this.ss.insert(e);else{let c=i.pointer.low,d=i.pointer.high;i.pre();let p=i.pointer.low;i.pointer.high+1===n?n+1===c?(this.ss.eraseElementByIterator(i),this.ss.updateKeyByIterator(i,new r(p,d))):this.ss.updateKeyByIterator(i,new r(p,n)):n+1===c?(this.ss.eraseElementByIterator(i.next()),this.ss.insert(new r(n,d))):this.ss.insert(e)}a("free():"+n)},t.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new r(this.min,this.max))},t.prototype.intervalCount=function(){return this.ss.size()},t.prototype.dump=function(){console.log("length:"+this.ss.size());for(let n of this.ss)console.log(n)},l.exports=t}),Ua=be((s,l)=>{he(),de(),pe();var o=Su();l.exports.NumberAllocator=o}),Au=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=cu(),o=Ua(),a=class{constructor(f){Ie(this,"aliasToTopic");Ie(this,"topicToAlias");Ie(this,"max");Ie(this,"numberAllocator");Ie(this,"length");f>0&&(this.aliasToTopic=new l.LRUCache({max:f}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,f),this.max=f,this.length=0)}put(f,r){if(r===0||r>this.max)return!1;let t=this.aliasToTopic.get(r);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(r,f),this.topicToAlias[f]=r,this.numberAllocator.use(r),this.length=this.aliasToTopic.size,!0}getTopicByAlias(f){return this.aliasToTopic.get(f)}getAliasByTopic(f){let r=this.topicToAlias[f];return typeof r<"u"&&this.aliasToTopic.get(r),r}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};s.default=a}),Iu=be(s=>{he(),de(),pe();var l=s&&s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var o=fn(),a=l(Au()),f=sr(),r=(t,n)=>{t.log("_handleConnack");let{options:e}=t,i=e.protocolVersion===5?n.reasonCode:n.returnCode;if(clearTimeout(t.connackTimer),delete t.topicAliasSend,n.properties){if(n.properties.topicAliasMaximum){if(n.properties.topicAliasMaximum>65535){t.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}n.properties.topicAliasMaximum>0&&(t.topicAliasSend=new a.default(n.properties.topicAliasMaximum))}n.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=n.properties.serverKeepAlive),n.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=n.properties.maximumPacketSize)}if(i===0)t.reconnecting=!1,t._onConnect(n);else if(i>0){let c=new f.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[i]}`,i);t.emit("error",c),t.options.reconnectOnConnackError&&t._cleanUp(!0)}};s.default=r}),xu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=(o,a,f)=>{o.log("handling pubrel packet");let r=typeof f<"u"?f:o.noop,{messageId:t}=a,n={cmd:"pubcomp",messageId:t};o.incomingStore.get(a,(e,i)=>{e?o._sendPacket(n,r):(o.emit("message",i.topic,i.payload,i),o.handleMessage(i,c=>{if(c)return r(c);o.incomingStore.del(i,o.noop),o._sendPacket(n,r)}))})};s.default=l}),Tu=be(s=>{he(),de(),pe();var l=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});var o=l(au()),a=l(uu()),f=l(Iu()),r=l(fn()),t=l(xu()),n=(e,i,c)=>{let{options:d}=e;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<i.length)return e.emit("error",new Error(`exceeding packets size ${i.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",i),i.cmd){case"publish":(0,o.default)(e,i,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,r.default)(e,i),c();break;case"pubrel":e.reschedulePing(),(0,t.default)(e,i,c);break;case"connack":(0,f.default)(e,i),c();break;case"auth":e.reschedulePing(),(0,a.default)(e,i),c();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),c();break;case"disconnect":e.emit("disconnect",i),c();break;default:e.log("_handlePacket :: unknown command"),c();break}};s.default=n}),Da=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=class{constructor(){Ie(this,"nextId");this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};s.default=l}),ku=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=class{constructor(o){Ie(this,"aliasToTopic");Ie(this,"max");Ie(this,"length");this.aliasToTopic={},this.max=o}put(o,a){return a===0||a>this.max?!1:(this.aliasToTopic[a]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};s.default=l}),Ou=be(s=>{he(),de(),pe();var l=s&&s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(s,"__esModule",{value:!0}),s.TypedEventEmitter=void 0;var o=l((Jt(),qe(Dt))),a=sr(),f=class{};s.TypedEventEmitter=f,(0,a.applyMixin)(f,o.default)}),hn=be((s,l)=>{he(),de(),pe();function o(a){"@babel/helpers - typeof";return l.exports=o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l.exports.__esModule=!0,l.exports.default=l.exports,o(a)}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports}),Pu=be((s,l)=>{he(),de(),pe();var o=hn().default;function a(f,r){if(o(f)!="object"||!f)return f;var t=f[Symbol.toPrimitive];if(t!==void 0){var n=t.call(f,r||"default");if(o(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(f)}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports}),Cu=be((s,l)=>{he(),de(),pe();var o=hn().default,a=Pu();function f(r){var t=a(r,"string");return o(t)=="symbol"?t:t+""}l.exports=f,l.exports.__esModule=!0,l.exports.default=l.exports}),Ru=be((s,l)=>{he(),de(),pe();var o=Cu();function a(f,r,t){return(r=o(r))in f?Object.defineProperty(f,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):f[r]=t,f}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports}),Mu=be((s,l)=>{he(),de(),pe();function o(a){if(Array.isArray(a))return a}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports}),ju=be((s,l)=>{he(),de(),pe();function o(a,f){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var t,n,e,i,c=[],d=!0,p=!1;try{if(e=(r=r.call(a)).next,f===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(t=e.call(r)).done)&&(c.push(t.value),c.length!==f);d=!0);}catch(m){p=!0,n=m}finally{try{if(!d&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(p)throw n}}return c}}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports}),Bu=be((s,l)=>{he(),de(),pe();function o(a,f){(f==null||f>a.length)&&(f=a.length);for(var r=0,t=Array(f);r<f;r++)t[r]=a[r];return t}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports}),Nu=be((s,l)=>{he(),de(),pe();var o=Bu();function a(f,r){if(f){if(typeof f=="string")return o(f,r);var t={}.toString.call(f).slice(8,-1);return t==="Object"&&f.constructor&&(t=f.constructor.name),t==="Map"||t==="Set"?Array.from(f):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(f,r):void 0}}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports}),Lu=be((s,l)=>{he(),de(),pe();function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports}),Uu=be((s,l)=>{he(),de(),pe();var o=Mu(),a=ju(),f=Nu(),r=Lu();function t(n,e){return o(n)||a(n,e)||f(n,e)||r()}l.exports=t,l.exports.__esModule=!0,l.exports.default=l.exports}),Fa=be((s,l)=>{he(),de(),pe(),function(o,a){typeof s=="object"&&typeof l<"u"?a(s):typeof define=="function"&&define.amd?define(["exports"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.fastUniqueNumbers={}))}(s,function(o){var a=function(m){return function(b){var E=m(b);return b.add(E),E}},f=function(m){return function(b,E){return m.set(b,E),E}},r=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,t=536870912,n=t*2,e=function(m,b){return function(E){var w=b.get(E),A=w===void 0?E.size:w<n?w+1:0;if(!E.has(A))return m(E,A);if(E.size<t){for(;E.has(A);)A=Math.floor(Math.random()*n);return m(E,A)}if(E.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;E.has(A);)A=Math.floor(Math.random()*r);return m(E,A)}},i=new WeakMap,c=f(i),d=e(c,i),p=a(d);o.addUniqueNumber=p,o.generateUniqueNumber=d})}),Du=be((s,l)=>{he(),de(),pe();function o(f,r,t,n,e,i,c){try{var d=f[i](c),p=d.value}catch(m){return void t(m)}d.done?r(p):Promise.resolve(p).then(n,e)}function a(f){return function(){var r=this,t=arguments;return new Promise(function(n,e){var i=f.apply(r,t);function c(p){o(i,n,e,c,d,"next",p)}function d(p){o(i,n,e,c,d,"throw",p)}c(void 0)})}}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports}),Wa=be((s,l)=>{he(),de(),pe();function o(a,f){this.v=a,this.k=f}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports}),qa=be((s,l)=>{he(),de(),pe();function o(a,f,r,t){var n=Object.defineProperty;try{n({},"",{})}catch{n=0}l.exports=o=function(e,i,c,d){function p(m,b){o(e,m,function(E){return this._invoke(m,b,E)})}i?n?n(e,i,{value:c,enumerable:!d,configurable:!d,writable:!d}):e[i]=c:(p("next",0),p("throw",1),p("return",2))},l.exports.__esModule=!0,l.exports.default=l.exports,o(a,f,r,t)}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports}),$a=be((s,l)=>{he(),de(),pe();var o=qa();function a(){var f,r,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function i(A,g,_,S){var v=g&&g.prototype instanceof d?g:d,R=Object.create(v.prototype);return o(R,"_invoke",function(P,I,O){var T,F,x,q=0,H=O||[],U=!1,ae={p:0,n:0,v:f,a:te,f:te.bind(f,4),d:function(Z,le){return T=Z,F=0,x=f,ae.n=le,c}};function te(Z,le){for(F=Z,x=le,r=0;!U&&q&&!K&&r<H.length;r++){var K,ie=H[r],M=ae.p,G=ie[2];Z>3?(K=G===le)&&(x=ie[(F=ie[4])?5:(F=3,3)],ie[4]=ie[5]=f):ie[0]<=M&&((K=Z<2&&M<ie[1])?(F=0,ae.v=le,ae.n=ie[1]):M<G&&(K=Z<3||ie[0]>le||le>G)&&(ie[4]=Z,ie[5]=le,ae.n=G,F=0))}if(K||Z>1)return c;throw U=!0,le}return function(Z,le,K){if(q>1)throw TypeError("Generator is already running");for(U&&le===1&&te(le,K),F=le,x=K;(r=F<2?f:x)||!U;){T||(F?F<3?(F>1&&(ae.n=-1),te(F,x)):ae.n=x:ae.v=x);try{if(q=2,T){if(F||(Z="next"),r=T[Z]){if(!(r=r.call(T,x)))throw TypeError("iterator result is not an object");if(!r.done)return r;x=r.value,F<2&&(F=0)}else F===1&&(r=T.return)&&r.call(T),F<2&&(x=TypeError("The iterator does not provide a '"+Z+"' method"),F=1);T=f}else if((r=(U=ae.n<0)?x:P.call(I,ae))!==c)break}catch(ie){T=f,F=1,x=ie}finally{q=1}}return{value:r,done:U}}}(A,_,S),!0),R}var c={};function d(){}function p(){}function m(){}r=Object.getPrototypeOf;var b=[][n]?r(r([][n]())):(o(r={},n,function(){return this}),r),E=m.prototype=d.prototype=Object.create(b);function w(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,m):(A.__proto__=m,o(A,e,"GeneratorFunction")),A.prototype=Object.create(E),A}return p.prototype=m,o(E,"constructor",m),o(m,"constructor",p),p.displayName="GeneratorFunction",o(m,e,"GeneratorFunction"),o(E),o(E,e,"Generator"),o(E,n,function(){return this}),o(E,"toString",function(){return"[object Generator]"}),(l.exports=a=function(){return{w:i,m:w}},l.exports.__esModule=!0,l.exports.default=l.exports)()}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports}),za=be((s,l)=>{he(),de(),pe();var o=Wa(),a=qa();function f(r,t){function n(i,c,d,p){try{var m=r[i](c),b=m.value;return b instanceof o?t.resolve(b.v).then(function(E){n("next",E,d,p)},function(E){n("throw",E,d,p)}):t.resolve(b).then(function(E){m.value=E,d(m)},function(E){return n("throw",E,d,p)})}catch(E){p(E)}}var e;this.next||(a(f.prototype),a(f.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),a(this,"_invoke",function(i,c,d){function p(){return new t(function(m,b){n(i,d,m,b)})}return e=e?e.then(p,p):p()},!0)}l.exports=f,l.exports.__esModule=!0,l.exports.default=l.exports}),Ha=be((s,l)=>{he(),de(),pe();var o=$a(),a=za();function f(r,t,n,e,i){return new a(o().w(r,t,n,e),i||Promise)}l.exports=f,l.exports.__esModule=!0,l.exports.default=l.exports}),Fu=be((s,l)=>{he(),de(),pe();var o=Ha();function a(f,r,t,n,e){var i=o(f,r,t,n,e);return i.next().then(function(c){return c.done?c.value:i.next()})}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports}),Wu=be((s,l)=>{he(),de(),pe();function o(a){var f=Object(a),r=[];for(var t in f)r.unshift(t);return function n(){for(;r.length;)if((t=r.pop())in f)return n.value=t,n.done=!1,n;return n.done=!0,n}}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports}),qu=be((s,l)=>{he(),de(),pe();var o=hn().default;function a(f){if(f!=null){var r=f[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],t=0;if(r)return r.call(f);if(typeof f.next=="function")return f;if(!isNaN(f.length))return{next:function(){return f&&t>=f.length&&(f=void 0),{value:f&&f[t++],done:!f}}}}throw new TypeError(o(f)+" is not iterable")}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports}),$u=be((s,l)=>{he(),de(),pe();var o=Wa(),a=$a(),f=Fu(),r=Ha(),t=za(),n=Wu(),e=qu();function i(){var c=a(),d=c.m(i),p=(Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__).constructor;function m(w){var A=typeof w=="function"&&w.constructor;return!!A&&(A===p||(A.displayName||A.name)==="GeneratorFunction")}var b={throw:1,return:2,break:3,continue:3};function E(w){var A,g;return function(_){A||(A={stop:function(){return g(_.a,2)},catch:function(){return _.v},abrupt:function(S,v){return g(_.a,b[S],v)},delegateYield:function(S,v,R){return A.resultName=v,g(_.d,e(S),R)},finish:function(S){return g(_.f,S)}},g=function(S,v,R){_.p=A.prev,_.n=A.next;try{return S(v,R)}finally{A.next=_.n}}),A.resultName&&(A[A.resultName]=_.v,A.resultName=void 0),A.sent=_.v,A.next=_.n;try{return w.call(this,A)}finally{_.p=A.prev,_.n=A.next}}}return(l.exports=i=function(){return{wrap:function(w,A,g,_){return c.w(E(w),A,g,_&&_.reverse())},isGeneratorFunction:m,mark:c.m,awrap:function(w,A){return new o(w,A)},AsyncIterator:t,async:function(w,A,g,_,S){return(m(A)?r:f)(E(w),A,g,_,S)},keys:n,values:e}},l.exports.__esModule=!0,l.exports.default=l.exports)()}l.exports=i,l.exports.__esModule=!0,l.exports.default=l.exports}),zu=be((s,l)=>{he(),de(),pe();var o=$u()();l.exports=o;try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}),Hu=be((s,l)=>{he(),de(),pe(),function(o,a){typeof s=="object"&&typeof l<"u"?a(s,Ru(),Uu(),Fa(),Du(),zu()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.brokerFactory={},o._defineProperty,o._slicedToArray,o.fastUniqueNumbers,o._asyncToGenerator,o._regeneratorRuntime))}(s,function(o,a,f,r,t,n){var e=function(g){return typeof g.start=="function"},i=new WeakMap;function c(g,_){var S=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);_&&(v=v.filter(function(R){return Object.getOwnPropertyDescriptor(g,R).enumerable})),S.push.apply(S,v)}return S}function d(g){for(var _=1;_<arguments.length;_++){var S=arguments[_]!=null?arguments[_]:{};_%2?c(Object(S),!0).forEach(function(v){a(g,v,S[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(S)):c(Object(S)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(S,v))})}return g}var p=function(g){return d(d({},g),{},{connect:function(_){var S=_.call;return t(n.mark(function v(){var R,P,I,O;return n.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return R=new MessageChannel,P=R.port1,I=R.port2,T.next=1,S("connect",{port:P},[P]);case 1:return O=T.sent,i.set(I,O),T.abrupt("return",I);case 2:case"end":return T.stop()}},v)}))},disconnect:function(_){var S=_.call;return function(){var v=t(n.mark(function R(P){var I;return n.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(I=i.get(P),I!==void 0){O.next=1;break}throw new Error("The given port is not connected.");case 1:return O.next=2,S("disconnect",{portId:I});case 2:case"end":return O.stop()}},R)}));return function(R){return v.apply(this,arguments)}}()},isSupported:function(_){var S=_.call;return function(){return S("isSupported")}}})};function m(g,_){var S=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);_&&(v=v.filter(function(R){return Object.getOwnPropertyDescriptor(g,R).enumerable})),S.push.apply(S,v)}return S}function b(g){for(var _=1;_<arguments.length;_++){var S=arguments[_]!=null?arguments[_]:{};_%2?m(Object(S),!0).forEach(function(v){a(g,v,S[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(S)):m(Object(S)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(S,v))})}return g}var E=new WeakMap,w=function(g){if(E.has(g))return E.get(g);var _=new Map;return E.set(g,_),_},A=function(g){var _=p(g);return function(S){var v=w(S);S.addEventListener("message",function(H){var U=H.data,ae=U.id;if(ae!==null&&v.has(ae)){var te=v.get(ae),Z=te.reject,le=te.resolve;v.delete(ae),U.error===void 0?le(U.result):Z(new Error(U.error.message))}}),e(S)&&S.start();for(var R=function(H){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(te,Z){var le=r.generateUniqueNumber(v);v.set(le,{reject:Z,resolve:te}),U===null?S.postMessage({id:le,method:H},ae):S.postMessage({id:le,method:H,params:U},ae)})},P=function(H,U){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];S.postMessage({id:null,method:H,params:U},ae)},I={},O=0,T=Object.entries(_);O<T.length;O++){var F=f(T[O],2),x=F[0],q=F[1];I=b(b({},I),{},a({},x,q({call:R,notify:P})))}return b({},I)}};o.createBroker=A})}),Ku=be((s,l)=>{he(),de(),pe(),function(o,a){typeof s=="object"&&typeof l<"u"?a(s,hn(),Hu(),Fa()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.workerTimersBroker={},o._typeof,o.brokerFactory,o.fastUniqueNumbers))}(s,function(o,a,f,r){var t=new Map([[0,null]]),n=new Map([[0,null]]),e=f.createBroker({clearInterval:function(c){var d=c.call;return function(p){a(t.get(p))==="symbol"&&(t.set(p,null),d("clear",{timerId:p,timerType:"interval"}).then(function(){t.delete(p)}))}},clearTimeout:function(c){var d=c.call;return function(p){a(n.get(p))==="symbol"&&(n.set(p,null),d("clear",{timerId:p,timerType:"timeout"}).then(function(){n.delete(p)}))}},setInterval:function(c){var d=c.call;return function(p){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length,E=new Array(b>2?b-2:0),w=2;w<b;w++)E[w-2]=arguments[w];var A=Symbol(),g=r.generateUniqueNumber(t);t.set(g,A);var _=function(){return d("set",{delay:m,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"interval"}).then(function(){var S=t.get(g);if(S===void 0)throw new Error("The timer is in an undefined state.");S===A&&(p.apply(void 0,E),t.get(g)===A&&_())})};return _(),g}},setTimeout:function(c){var d=c.call;return function(p){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length,E=new Array(b>2?b-2:0),w=2;w<b;w++)E[w-2]=arguments[w];var A=Symbol(),g=r.generateUniqueNumber(n);return n.set(g,A),d("set",{delay:m,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"timeout"}).then(function(){var _=n.get(g);if(_===void 0)throw new Error("The timer is in an undefined state.");_===A&&(n.delete(g),p.apply(void 0,E))}),g}}}),i=function(c){var d=new Worker(c);return e(d)};o.load=i,o.wrap=e})}),Vu=be((s,l)=>{he(),de(),pe(),function(o,a){typeof s=="object"&&typeof l<"u"?a(s,Ku()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.workerTimers={},o.workerTimersBroker))}(s,function(o,a){var f=function(d,p){var m=null;return function(){if(m!==null)return m;var b=new Blob([p],{type:"application/javascript; charset=utf-8"}),E=URL.createObjectURL(b);return m=d(E),setTimeout(function(){return URL.revokeObjectURL(E)}),m}},r=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,t=f(a.load,r),n=function(d){return t().clearInterval(d)},e=function(d){return t().clearTimeout(d)},i=function(){var d;return(d=t()).setInterval.apply(d,arguments)},c=function(){var d;return(d=t()).setTimeout.apply(d,arguments)};o.clearInterval=n,o.clearTimeout=e,o.setInterval=i,o.setTimeout=c})}),pn=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0}),s.isReactNativeBrowser=s.isWebWorker=void 0;var l=()=>{var r;return typeof window<"u"?typeof navigator<"u"&&((r=navigator.userAgent)==null?void 0:r.toLowerCase().indexOf(" electron/"))>-1&&(Fe!=null&&Fe.versions)?!Object.prototype.hasOwnProperty.call(Fe.versions,"electron"):typeof window.document<"u":!1},o=()=>{var r,t;return!!(typeof self=="object"&&((t=(r=self==null?void 0:self.constructor)==null?void 0:r.name)!=null&&t.includes("WorkerGlobalScope"))&&typeof Deno>"u")},a=()=>typeof navigator<"u"&&navigator.product==="ReactNative",f=l()||o()||a();s.isWebWorker=o(),s.isReactNativeBrowser=a(),s.default=f}),Gu=be(s=>{he(),de(),pe();var l=s&&s.__createBinding||(Object.create?function(i,c,d,p){p===void 0&&(p=d);var m=Object.getOwnPropertyDescriptor(c,d);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[d]}}),Object.defineProperty(i,p,m)}:function(i,c,d,p){p===void 0&&(p=d),i[p]=c[d]}),o=s&&s.__setModuleDefault||(Object.create?function(i,c){Object.defineProperty(i,"default",{enumerable:!0,value:c})}:function(i,c){i.default=c}),a=s&&s.__importStar||function(){var i=function(c){return i=Object.getOwnPropertyNames||function(d){var p=[];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(p[p.length]=m);return p},i(c)};return function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var p=i(c),m=0;m<p.length;m++)p[m]!=="default"&&l(d,c,p[m]);return o(d,c),d}}();Object.defineProperty(s,"__esModule",{value:!0});var f=Vu(),r=a(pn()),t={set:f.setInterval,clear:f.clearInterval},n={set:(i,c)=>setInterval(i,c),clear:i=>clearInterval(i)},e=i=>{switch(i){case"native":return n;case"worker":return t;case"auto":default:return r.default&&!r.isWebWorker&&!r.isReactNativeBrowser?t:n}};s.default=e}),Ka=be(s=>{he(),de(),pe();var l=s&&s.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0});var o=l(Gu()),a=class{constructor(f,r){Ie(this,"_keepalive");Ie(this,"timerId");Ie(this,"timer");Ie(this,"destroyed",!1);Ie(this,"counter");Ie(this,"client");Ie(this,"_keepaliveTimeoutTimestamp");Ie(this,"_intervalEvery");this.client=f,this.timer=typeof r=="object"&&"set"in r&&"clear"in r?r:(0,o.default)(r),this.setKeepalive(f.options.keepalive)}get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(f){if(f*=1e3,isNaN(f)||f<=0||f>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${f}`);this._keepalive=f,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${f}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let f=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+f,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};s.default=a}),Ci=be(s=>{var v;he(),de(),pe();var l=s&&s.__createBinding||(Object.create?function(R,P,I,O){O===void 0&&(O=I);var T=Object.getOwnPropertyDescriptor(P,I);(!T||("get"in T?!P.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return P[I]}}),Object.defineProperty(R,O,T)}:function(R,P,I,O){O===void 0&&(O=I),R[O]=P[I]}),o=s&&s.__setModuleDefault||(Object.create?function(R,P){Object.defineProperty(R,"default",{enumerable:!0,value:P})}:function(R,P){R.default=P}),a=s&&s.__importStar||function(){var R=function(P){return R=Object.getOwnPropertyNames||function(I){var O=[];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(O[O.length]=T);return O},R(P)};return function(P){if(P&&P.__esModule)return P;var I={};if(P!=null)for(var O=R(P),T=0;T<O.length;T++)O[T]!=="default"&&l(I,P,O[T]);return o(I,P),I}}(),f=s&&s.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(s,"__esModule",{value:!0});var r=f(nu()),t=Zt(),n=f(ou()),e=f(Tt()),i=a(su()),c=f(Ea()),d=f(Tu()),p=f(Da()),m=f(ku()),b=sr(),E=Ou(),w=f(Ka()),A=a(pn()),g=globalThis.setImmediate||((...R)=>{let P=R.shift();(0,b.nextTick)(()=>{P(...R)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},S=(v=class extends E.TypedEventEmitter{constructor(I,O){super();Ie(this,"connected");Ie(this,"disconnecting");Ie(this,"disconnected");Ie(this,"reconnecting");Ie(this,"incomingStore");Ie(this,"outgoingStore");Ie(this,"options");Ie(this,"queueQoSZero");Ie(this,"_reconnectCount");Ie(this,"log");Ie(this,"messageIdProvider");Ie(this,"outgoing");Ie(this,"messageIdToTopic");Ie(this,"noop");Ie(this,"keepaliveManager");Ie(this,"stream");Ie(this,"queue");Ie(this,"streamBuilder");Ie(this,"_resubscribeTopics");Ie(this,"connackTimer");Ie(this,"reconnectTimer");Ie(this,"_storeProcessing");Ie(this,"_packetIdsDuringStoreProcessing");Ie(this,"_storeProcessingQueue");Ie(this,"_firstConnection");Ie(this,"topicAliasRecv");Ie(this,"topicAliasSend");Ie(this,"_deferredReconnect");Ie(this,"connackPacket");this.options=O||{};for(let T in _)typeof this.options[T]>"u"?this.options[T]=_[T]:this.options[T]=O[T];this.log=this.options.log||(0,e.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",v.VERSION),A.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",A.default?"browser":"node"),this.log("MqttClient :: options.protocol",O.protocol),this.log("MqttClient :: options.protocolVersion",O.protocolVersion),this.log("MqttClient :: options.username",O.username),this.log("MqttClient :: options.keepalive",O.keepalive),this.log("MqttClient :: options.reconnectPeriod",O.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",O.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",O.properties?O.properties.topicAliasMaximum:void 0),this.options.clientId=typeof O.clientId=="string"?O.clientId:v.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=O.protocolVersion===5&&O.customHandleAcks?O.customHandleAcks:(...T)=>{T[3](null,0)},this.options.writeCache||(r.default.writeToStream.cacheNumbers=!1),this.streamBuilder=I,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=O.outgoingStore||new c.default,this.incomingStore=O.incomingStore||new c.default,this.queueQoSZero=O.queueQoSZero===void 0?!0:O.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,O.properties&&O.properties.topicAliasMaximum>0&&(O.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new m.default(O.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:T}=this,F=()=>{let x=T.shift();this.log("deliver :: entry %o",x);let q=null;if(!x){this._resubscribe();return}q=x.packet,this.log("deliver :: call _sendPacket for %o",q);let H=!0;q.messageId&&q.messageId!==0&&(this.messageIdProvider.register(q.messageId)||(H=!1)),H?this._sendPacket(q,U=>{x.cb&&x.cb(U),F()}):(this.log("messageId: %d has already used. The message is skipped and removed.",q.messageId),F())};this.log("connect :: sending queued packets"),F()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}handleAuth(I,O){O()}handleMessage(I,O){O()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var ae;let I=new t.Writable,O=r.default.parser(this.options),T=null,F=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new c.default,this.outgoingStore=this.options.outgoingStore||new c.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),O.on("packet",te=>{this.log("parser :: on packet push to packets array."),F.push(te)});let x=()=>{this.log("work :: getting next packet in queue");let te=F.shift();if(te)this.log("work :: packet pulled from queue"),(0,d.default)(this,te,q);else{this.log("work :: no packets in queue");let Z=T;T=null,this.log("work :: done flag is %s",!!Z),Z&&Z()}},q=()=>{if(F.length)(0,b.nextTick)(x);else{let te=T;T=null,te()}};I._write=(te,Z,le)=>{T=le,this.log("writable stream :: parsing buffer"),O.parse(te),x()};let H=te=>{this.log("streamErrorHandler :: error",te.message),te.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",te)):this.noop(te)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",H),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let U={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(U.will={...this.options.will,payload:(ae=this.options.will)==null?void 0:ae.payload}),this.topicAliasRecv&&(U.properties||(U.properties={}),this.topicAliasRecv&&(U.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(U),O.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let te={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(te)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(I,O,T,F){this.log("publish :: message `%s` to topic `%s`",O,I);let{options:x}=this;typeof T=="function"&&(F=T,T=null),T=T||{},T={qos:0,retain:!1,dup:!1,...T};let{qos:q,retain:H,dup:U,properties:ae,cbStorePut:te}=T;if(this._checkDisconnecting(F))return this;let Z=()=>{let le=0;if((q===1||q===2)&&(le=this._nextId(),le===null))return this.log("No messageId left"),!1;let K={cmd:"publish",topic:I,payload:O,qos:q,retain:H,messageId:le,dup:U};switch(x.protocolVersion===5&&(K.properties=ae),this.log("publish :: qos",q),q){case 1:case 2:this.outgoing[K.messageId]={volatile:!1,cb:F||this.noop},this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,void 0,te);break;default:this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,F,te);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Z())&&this._storeProcessingQueue.push({invoke:Z,cbStorePut:T.cbStorePut,callback:F}),this}publishAsync(I,O,T){return new Promise((F,x)=>{this.publish(I,O,T,(q,H)=>{q?x(q):F(H)})})}subscribe(I,O,T){let F=this.options.protocolVersion;typeof O=="function"&&(T=O),T=T||this.noop;let x=!1,q=[];typeof I=="string"?(I=[I],q=I):Array.isArray(I)?q=I:typeof I=="object"&&(x=I.resubscribe,delete I.resubscribe,q=Object.keys(I));let H=i.validateTopics(q);if(H!==null)return g(T,new Error(`Invalid topic ${H}`)),this;if(this._checkDisconnecting(T))return this.log("subscribe: discconecting true"),this;let U={qos:0};F===5&&(U.nl=!1,U.rap=!1,U.rh=0),O={...U,...O};let{properties:ae}=O,te=[],Z=(ie,M)=>{if(M=M||O,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,ie)||this._resubscribeTopics[ie].qos<M.qos||x){let G={topic:ie,qos:M.qos};F===5&&(G.nl=M.nl,G.rap=M.rap,G.rh=M.rh,G.properties=ae),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",G.topic,G.qos),te.push(G)}};if(Array.isArray(I)?I.forEach(ie=>{this.log("subscribe: array topic %s",ie),Z(ie)}):Object.keys(I).forEach(ie=>{this.log("subscribe: object topic %s, %o",ie,I[ie]),Z(ie,I[ie])}),!te.length)return T(null,[]),this;let le=(ie,M)=>{let G={cmd:"subscribe",subscriptions:ie,messageId:M};if(ae&&(G.properties=ae),this.options.resubscribe){this.log("subscribe :: resubscribe true");let $=[];ie.forEach(_e=>{if(this.options.reconnectPeriod>0){let X={qos:_e.qos};F===5&&(X.nl=_e.nl||!1,X.rap=_e.rap||!1,X.rh=_e.rh||0,X.properties=_e.properties),this._resubscribeTopics[_e.topic]=X,$.push(_e.topic)}}),this.messageIdToTopic[G.messageId]=$}let fe=new Promise(($,_e)=>{this.outgoing[G.messageId]={volatile:!0,cb(X,D){if(!X){let{granted:se}=D;for(let V=0;V<se.length;V+=1)ie[V].qos=se[V]}X?_e(new b.ErrorWithSubackPacket(X.message,D)):$(D)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(G),fe},K=()=>{let ie=this.options.subscribeBatchSize??te.length,M=[];for(let G=0;G<te.length;G+=ie){let fe=te.slice(G,G+ie),$=this._nextId();if($===null)return this.log("No messageId left"),!1;M.push(le(fe,$))}return Promise.all(M).then(G=>{T(null,te,G.at(-1))}).catch(G=>{T(G,te,G.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:T}),this}subscribeAsync(I,O){return new Promise((T,F)=>{this.subscribe(I,O,(x,q)=>{x?F(x):T(q)})})}unsubscribe(I,O,T){typeof I=="string"&&(I=[I]),typeof O=="function"&&(T=O),T=T||this.noop;let F=i.validateTopics(I);if(F!==null)return g(T,new Error(`Invalid topic ${F}`)),this;if(this._checkDisconnecting(T))return this;let x=()=>{let q=this._nextId();if(q===null)return this.log("No messageId left"),!1;let H={cmd:"unsubscribe",messageId:q,unsubscriptions:[]};return typeof I=="string"?H.unsubscriptions=[I]:Array.isArray(I)&&(H.unsubscriptions=I),this.options.resubscribe&&H.unsubscriptions.forEach(U=>{delete this._resubscribeTopics[U]}),typeof O=="object"&&O.properties&&(H.properties=O.properties),this.outgoing[H.messageId]={volatile:!0,cb:T},this.log("unsubscribe: call _sendPacket"),this._sendPacket(H),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!x())&&this._storeProcessingQueue.push({invoke:x,callback:T}),this}unsubscribeAsync(I,O){return new Promise((T,F)=>{this.unsubscribe(I,O,(x,q)=>{x?F(x):T(q)})})}end(I,O,T){this.log("end :: (%s)",this.options.clientId),(I==null||typeof I!="boolean")&&(T=T||O,O=I,I=!1),typeof O!="object"&&(T=T||O,O=null),this.log("end :: cb? %s",!!T),(!T||typeof T!="function")&&(T=this.noop);let F=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(q=>{this.outgoingStore.close(H=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),T){let U=q||H;this.log("end :: closeStores: invoking callback with args"),T(U)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},x=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,I),this._cleanUp(I,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(F)},O)};return this.disconnecting?(T(),this):(this._clearReconnect(),this.disconnecting=!0,!I&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,x,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),x()),this)}endAsync(I,O){return new Promise((T,F)=>{this.end(I,O,x=>{x?F(x):T()})})}removeOutgoingMessage(I){if(this.outgoing[I]){let{cb:O}=this.outgoing[I];this._removeOutgoingAndStoreMessage(I,()=>{O(new Error("Message removed"))})}return this}reconnect(I){this.log("client reconnect");let O=()=>{I?(this.options.incomingStore=I.incomingStore,this.options.outgoingStore=I.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new c.default,this.outgoingStore=this.options.outgoingStore||new c.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=O:O(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(I=>{this.outgoing[I].volatile&&typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(I=>{typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_removeTopicAliasAndRecoverTopicName(I){let O;I.properties&&(O=I.properties.topicAlias);let T=I.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",O,T),T.length===0){if(typeof O>"u")return new Error("Unregistered Topic Alias");if(T=this.topicAliasSend.getTopicByAlias(O),typeof T>"u")return new Error("Unregistered Topic Alias");I.topic=T}O&&delete I.properties.topicAlias}_checkDisconnecting(I){return this.disconnecting&&(I&&I!==this.noop?I(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(I,O,T={}){if(O&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",O)),this.log("_cleanUp :: forced? %s",I),I)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let F={cmd:"disconnect",...T};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(F,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),g(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),O&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",O),O())}_storeAndSend(I,O,T){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let F=I,x;if(F.cmd==="publish"&&(F=(0,n.default)(I),x=this._removeTopicAliasAndRecoverTopicName(F),x))return O&&O(x);this.outgoingStore.put(F,q=>{if(q)return O&&O(q);T(),this._writePacket(I,O)})}_applyTopicAlias(I){if(this.options.protocolVersion===5&&I.cmd==="publish"){let O;I.properties&&(O=I.properties.topicAlias);let T=I.topic.toString();if(this.topicAliasSend)if(O){if(T.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",T,O),!this.topicAliasSend.put(T,O)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",T,O),new Error("Sending Topic Alias out of range")}else T.length!==0&&(this.options.autoAssignTopicAlias?(O=this.topicAliasSend.getAliasByTopic(T),O?(I.topic="",I.properties={...I.properties,topicAlias:O},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",T,O)):(O=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(T,O),I.properties={...I.properties,topicAlias:O},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",T,O))):this.options.autoUseTopicAlias&&(O=this.topicAliasSend.getAliasByTopic(T),O&&(I.topic="",I.properties={...I.properties,topicAlias:O},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",T,O))));else if(O)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",T,O),new Error("Sending Topic Alias out of range")}}_noop(I){this.log("noop ::",I)}_writePacket(I,O){this.log("_writePacket :: packet: %O",I),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",I),this.log("_writePacket :: writing to stream");let T=r.default.writeToStream(I,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",T),!T&&O&&O!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",O)):O&&(this.log("_writePacket :: invoking cb"),O())}_sendPacket(I,O,T,F){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),T=T||this.noop,O=O||this.noop;let x=this._applyTopicAlias(I);if(x){O(x);return}if(!this.connected){if(I.cmd==="auth"){this._writePacket(I,O);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(I,O,T);return}if(F){this._writePacket(I,O);return}switch(I.cmd){case"publish":break;case"pubrel":this._storeAndSend(I,O,T);return;default:this._writePacket(I,O);return}switch(I.qos){case 2:case 1:this._storeAndSend(I,O,T);break;case 0:default:this._writePacket(I,O);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(I,O,T){this.log("_storePacket :: packet: %o",I),this.log("_storePacket :: cb? %s",!!O),T=T||this.noop;let F=I;if(F.cmd==="publish"){F=(0,n.default)(I);let q=this._removeTopicAliasAndRecoverTopicName(F);if(q)return O&&O(q)}let x=F.qos||0;x===0&&this.queueQoSZero||F.cmd!=="publish"?this.queue.push({packet:F,cb:O}):x>0?(O=this.outgoing[F.messageId]?this.outgoing[F.messageId].cb:null,this.outgoingStore.put(F,q=>{if(q)return O&&O(q);T()})):O&&O(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new w.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(I=!1){this.keepaliveManager&&this.options.keepalive&&(I||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let I=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&I.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let O=0;O<I.length;O++){let T={};T[I[O]]=this._resubscribeTopics[I[O]],T.resubscribe=!0,this.subscribe(T,{properties:T[I[O]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(I){if(this.disconnected){this.emit("connect",I);return}this.connackPacket=I,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let O=()=>{let T=this.outgoingStore.createStream(),F=()=>{T.destroy(),T=null,this._flushStoreProcessingQueue(),x()},x=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",F),T.on("error",H=>{x(),this._flushStoreProcessingQueue(),this.removeListener("close",F),this.emit("error",H)});let q=()=>{if(!T)return;let H=T.read(1),U;if(!H){T.once("readable",q);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[H.messageId]){q();return}!this.disconnecting&&!this.reconnectTimer?(U=this.outgoing[H.messageId]?this.outgoing[H.messageId].cb:null,this.outgoing[H.messageId]={volatile:!1,cb(ae,te){U&&U(ae,te),q()}},this._packetIdsDuringStoreProcessing[H.messageId]=!0,this.messageIdProvider.register(H.messageId)?this._sendPacket(H,void 0,void 0,!0):this.log("messageId: %d has already used.",H.messageId)):T.destroy&&T.destroy()};T.on("end",()=>{let H=!0;for(let U in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[U]){H=!1;break}this.removeListener("close",F),H?(x(),this._invokeAllStoreProcessingQueue(),this.emit("connect",I)):O()}),q()};O()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let I=this._storeProcessingQueue[0];if(I&&I.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let I of this._storeProcessingQueue)I.cbStorePut&&I.cbStorePut(new Error("Connection closed")),I.callback&&I.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(I,O){delete this.outgoing[I],this.outgoingStore.del({messageId:I},(T,F)=>{O(T,F),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue()})}},Ie(v,"VERSION",b.MQTTJS_VERSION),v);s.default=S}),Qu=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=Ua(),o=class{constructor(){Ie(this,"numberAllocator");Ie(this,"lastId");this.numberAllocator=new l.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(a){return this.numberAllocator.use(a)}deallocate(a){this.numberAllocator.free(a)}clear(){this.numberAllocator.clear()}};s.default=o});function Yu(){if(Ri)return Mr;Ri=!0;let s=2147483647,l=36,o=1,a=26,f=38,r=700,t=72,n=128,e="-",i=/^xn--/,c=/[^\0-\x7F]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=l-o,b=Math.floor,E=String.fromCharCode;function w(T){throw new RangeError(p[T])}function A(T,F){let x=[],q=T.length;for(;q--;)x[q]=F(T[q]);return x}function g(T,F){let x=T.split("@"),q="";x.length>1&&(q=x[0]+"@",T=x[1]),T=T.replace(d,".");let H=T.split("."),U=A(H,F).join(".");return q+U}function _(T){let F=[],x=0,q=T.length;for(;x<q;){let H=T.charCodeAt(x++);if(H>=55296&&H<=56319&&x<q){let U=T.charCodeAt(x++);(U&64512)==56320?F.push(((H&1023)<<10)+(U&1023)+65536):(F.push(H),x--)}else F.push(H)}return F}let S=T=>String.fromCodePoint(...T),v=function(T){return T>=48&&T<58?26+(T-48):T>=65&&T<91?T-65:T>=97&&T<123?T-97:l},R=function(T,F){return T+22+75*(T<26)-((F!=0)<<5)},P=function(T,F,x){let q=0;for(T=x?b(T/r):T>>1,T+=b(T/F);T>m*a>>1;q+=l)T=b(T/m);return b(q+(m+1)*T/(T+f))},I=function(T){let F=[],x=T.length,q=0,H=n,U=t,ae=T.lastIndexOf(e);ae<0&&(ae=0);for(let te=0;te<ae;++te)T.charCodeAt(te)>=128&&w("not-basic"),F.push(T.charCodeAt(te));for(let te=ae>0?ae+1:0;te<x;){let Z=q;for(let K=1,ie=l;;ie+=l){te>=x&&w("invalid-input");let M=v(T.charCodeAt(te++));M>=l&&w("invalid-input"),M>b((s-q)/K)&&w("overflow"),q+=M*K;let G=ie<=U?o:ie>=U+a?a:ie-U;if(M<G)break;let fe=l-G;K>b(s/fe)&&w("overflow"),K*=fe}let le=F.length+1;U=P(q-Z,le,Z==0),b(q/le)>s-H&&w("overflow"),H+=b(q/le),q%=le,F.splice(q++,0,H)}return String.fromCodePoint(...F)},O=function(T){let F=[];T=_(T);let x=T.length,q=n,H=0,U=t;for(let Z of T)Z<128&&F.push(E(Z));let ae=F.length,te=ae;for(ae&&F.push(e);te<x;){let Z=s;for(let K of T)K>=q&&K<Z&&(Z=K);let le=te+1;Z-q>b((s-H)/le)&&w("overflow"),H+=(Z-q)*le,q=Z;for(let K of T)if(K<q&&++H>s&&w("overflow"),K===q){let ie=H;for(let M=l;;M+=l){let G=M<=U?o:M>=U+a?a:M-U;if(ie<G)break;let fe=ie-G,$=l-G;F.push(E(R(G+fe%$,0))),ie=b(fe/$)}F.push(E(R(ie,0))),U=P(H,le,te===ae),H=0,++te}++H,++q}return F.join("")};return Mr={version:"2.3.1",ucs2:{decode:_,encode:S},decode:I,encode:O,toASCII:function(T){return g(T,function(F){return c.test(F)?"xn--"+O(F):F})},toUnicode:function(T){return g(T,function(F){return i.test(F)?I(F.slice(4).toLowerCase()):F})}},Mr}var Mr,Ri,Lt,Ju=ft(()=>{he(),de(),pe(),Mr={},Ri=!1,Lt=Yu(),Lt.decode,Lt.encode,Lt.toASCII,Lt.toUnicode,Lt.ucs2,Lt.version});function Xu(){return ji||(ji=!0,Mi=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var s={},l=Symbol("test"),o=Object(l);if(typeof l=="string"||Object.prototype.toString.call(l)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var a=42;s[l]=a;for(l in s)return!1;if(typeof Object.keys=="function"&&Object.keys(s).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(s).length!==0)return!1;var f=Object.getOwnPropertySymbols(s);if(f.length!==1||f[0]!==l||!Object.prototype.propertyIsEnumerable.call(s,l))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var r=Object.getOwnPropertyDescriptor(s,l);if(r.value!==a||r.enumerable!==!0)return!1}return!0}),Mi}function Zu(){return Ni||(Ni=!0,Bi=Error),Bi}function ec(){return Ui||(Ui=!0,Li=EvalError),Li}function tc(){return Fi||(Fi=!0,Di=RangeError),Di}function rc(){return qi||(qi=!0,Wi=ReferenceError),Wi}function Va(){return zi||(zi=!0,$i=SyntaxError),$i}function Sr(){return Ki||(Ki=!0,Hi=TypeError),Hi}function nc(){return Gi||(Gi=!0,Vi=URIError),Vi}function ic(){if(Qi)return jr;Qi=!0;var s=typeof Symbol<"u"&&Symbol,l=Xu();return jr=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:l()},jr}function oc(){if(Yi)return Br;Yi=!0;var s={__proto__:null,foo:{}},l=Object;return Br=function(){return{__proto__:s}.foo===s.foo&&!(s instanceof l)},Br}function sc(){if(Ji)return Nr;Ji=!0;var s="Function.prototype.bind called on incompatible ",l=Object.prototype.toString,o=Math.max,a="[object Function]",f=function(n,e){for(var i=[],c=0;c<n.length;c+=1)i[c]=n[c];for(var d=0;d<e.length;d+=1)i[d+n.length]=e[d];return i},r=function(n,e){for(var i=[],c=e,d=0;c<n.length;c+=1,d+=1)i[d]=n[c];return i},t=function(n,e){for(var i="",c=0;c<n.length;c+=1)i+=n[c],c+1<n.length&&(i+=e);return i};return Nr=function(n){var e=this;if(typeof e!="function"||l.apply(e)!==a)throw new TypeError(s+e);for(var i=r(arguments,1),c,d=function(){if(this instanceof c){var w=e.apply(this,f(i,arguments));return Object(w)===w?w:this}return e.apply(n,f(i,arguments))},p=o(0,e.length-i.length),m=[],b=0;b<p;b++)m[b]="$"+b;if(c=Function("binder","return function ("+t(m,",")+"){ return binder.apply(this,arguments); }")(d),e.prototype){var E=function(){};E.prototype=e.prototype,c.prototype=new E,E.prototype=null}return c},Nr}function xo(){if(Xi)return Lr;Xi=!0;var s=sc();return Lr=Function.prototype.bind||s,Lr}function ac(){if(Zi)return Ur;Zi=!0;var s=Function.prototype.call,l=Object.prototype.hasOwnProperty,o=xo();return Ur=o.call(s,l),Ur}function ar(){if(eo)return Dr;eo=!0;var s,l=Zu(),o=ec(),a=tc(),f=rc(),r=Va(),t=Sr(),n=nc(),e=Function,i=function(te){try{return e('"use strict"; return ('+te+").constructor;")()}catch{}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch{c=null}var d=function(){throw new t},p=c?function(){try{return arguments.callee,d}catch{try{return c(arguments,"callee").get}catch{return d}}}():d,m=ic()(),b=oc()(),E=Object.getPrototypeOf||(b?function(te){return te.__proto__}:null),w={},A=typeof Uint8Array>"u"||!E?s:E(Uint8Array),g={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?s:ArrayBuffer,"%ArrayIteratorPrototype%":m&&E?E([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?s:Atomics,"%BigInt%":typeof BigInt>"u"?s:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?s:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":l,"%eval%":eval,"%EvalError%":o,"%Float32Array%":typeof Float32Array>"u"?s:Float32Array,"%Float64Array%":typeof Float64Array>"u"?s:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?s:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?s:Int8Array,"%Int16Array%":typeof Int16Array>"u"?s:Int16Array,"%Int32Array%":typeof Int32Array>"u"?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&E?E(E([][Symbol.iterator]())):s,"%JSON%":typeof JSON=="object"?JSON:s,"%Map%":typeof Map>"u"?s:Map,"%MapIteratorPrototype%":typeof Map>"u"||!m||!E?s:E(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?s:Promise,"%Proxy%":typeof Proxy>"u"?s:Proxy,"%RangeError%":a,"%ReferenceError%":f,"%Reflect%":typeof Reflect>"u"?s:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?s:Set,"%SetIteratorPrototype%":typeof Set>"u"||!m||!E?s:E(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&E?E(""[Symbol.iterator]()):s,"%Symbol%":m?Symbol:s,"%SyntaxError%":r,"%ThrowTypeError%":p,"%TypedArray%":A,"%TypeError%":t,"%Uint8Array%":typeof Uint8Array>"u"?s:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?s:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?s:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?s:Uint32Array,"%URIError%":n,"%WeakMap%":typeof WeakMap>"u"?s:WeakMap,"%WeakRef%":typeof WeakRef>"u"?s:WeakRef,"%WeakSet%":typeof WeakSet>"u"?s:WeakSet};if(E)try{null.error}catch(te){var _=E(E(te));g["%Error.prototype%"]=_}var S=function te(Z){var le;if(Z==="%AsyncFunction%")le=i("async function () {}");else if(Z==="%GeneratorFunction%")le=i("function* () {}");else if(Z==="%AsyncGeneratorFunction%")le=i("async function* () {}");else if(Z==="%AsyncGenerator%"){var K=te("%AsyncGeneratorFunction%");K&&(le=K.prototype)}else if(Z==="%AsyncIteratorPrototype%"){var ie=te("%AsyncGenerator%");ie&&E&&(le=E(ie.prototype))}return g[Z]=le,le},v={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},R=xo(),P=ac(),I=R.call(Function.call,Array.prototype.concat),O=R.call(Function.apply,Array.prototype.splice),T=R.call(Function.call,String.prototype.replace),F=R.call(Function.call,String.prototype.slice),x=R.call(Function.call,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,H=/\\(\\)?/g,U=function(te){var Z=F(te,0,1),le=F(te,-1);if(Z==="%"&&le!=="%")throw new r("invalid intrinsic syntax, expected closing `%`");if(le==="%"&&Z!=="%")throw new r("invalid intrinsic syntax, expected opening `%`");var K=[];return T(te,q,function(ie,M,G,fe){K[K.length]=G?T(fe,H,"$1"):M||ie}),K},ae=function(te,Z){var le=te,K;if(P(v,le)&&(K=v[le],le="%"+K[0]+"%"),P(g,le)){var ie=g[le];if(ie===w&&(ie=S(le)),typeof ie>"u"&&!Z)throw new t("intrinsic "+te+" exists, but is not available. Please file an issue!");return{alias:K,name:le,value:ie}}throw new r("intrinsic "+te+" does not exist!")};return Dr=function(te,Z){if(typeof te!="string"||te.length===0)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Z!="boolean")throw new t('"allowMissing" argument must be a boolean');if(x(/^%?[^%]*%?$/,te)===null)throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var le=U(te),K=le.length>0?le[0]:"",ie=ae("%"+K+"%",Z),M=ie.name,G=ie.value,fe=!1,$=ie.alias;$&&(K=$[0],O(le,I([0,1],$)));for(var _e=1,X=!0;_e<le.length;_e+=1){var D=le[_e],se=F(D,0,1),V=F(D,-1);if((se==='"'||se==="'"||se==="`"||V==='"'||V==="'"||V==="`")&&se!==V)throw new r("property names with quotes must have matching quotes");if((D==="constructor"||!X)&&(fe=!0),K+="."+D,M="%"+K+"%",P(g,M))G=g[M];else if(G!=null){if(!(D in G)){if(!Z)throw new t("base intrinsic for "+te+" exists, but the property is not available.");return}if(c&&_e+1>=le.length){var ee=c(G,D);X=!!ee,X&&"get"in ee&&!("originalValue"in ee.get)?G=ee.get:G=G[D]}else X=P(G,D),G=G[D];X&&!fe&&(g[M]=G)}}return G},Dr}function To(){if(to)return Fr;to=!0;var s=ar(),l=s("%Object.defineProperty%",!0)||!1;if(l)try{l({},"a",{value:1})}catch{l=!1}return Fr=l,Fr}function Ga(){if(ro)return Wr;ro=!0;var s=ar(),l=s("%Object.getOwnPropertyDescriptor%",!0);if(l)try{l([],"length")}catch{l=null}return Wr=l,Wr}function lc(){if(no)return qr;no=!0;var s=To(),l=Va(),o=Sr(),a=Ga();return qr=function(f,r,t){if(!f||typeof f!="object"&&typeof f!="function")throw new o("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new o("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,e=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,d=!!a&&a(f,r);if(s)s(f,r,{configurable:i===null&&d?d.configurable:!i,enumerable:n===null&&d?d.enumerable:!n,value:t,writable:e===null&&d?d.writable:!e});else if(c||!n&&!e&&!i)f[r]=t;else throw new l("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},qr}function uc(){if(io)return $r;io=!0;var s=To(),l=function(){return!!s};return l.hasArrayLengthDefineBug=function(){if(!s)return null;try{return s([],"length",{value:1}).length!==1}catch{return!0}},$r=l,$r}function cc(){if(oo)return zr;oo=!0;var s=ar(),l=lc(),o=uc()(),a=Ga(),f=Sr(),r=s("%Math.floor%");return zr=function(t,n){if(typeof t!="function")throw new f("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||r(n)!==n)throw new f("`length` must be a positive 32-bit integer");var e=arguments.length>2&&!!arguments[2],i=!0,c=!0;if("length"in t&&a){var d=a(t,"length");d&&!d.configurable&&(i=!1),d&&!d.writable&&(c=!1)}return(i||c||!e)&&(o?l(t,"length",n,!0,!0):l(t,"length",n)),t},zr}function fc(){if(so)return rr;so=!0;var s=xo(),l=ar(),o=cc(),a=Sr(),f=l("%Function.prototype.apply%"),r=l("%Function.prototype.call%"),t=l("%Reflect.apply%",!0)||s.call(r,f),n=To(),e=l("%Math.max%");rr=function(c){if(typeof c!="function")throw new a("a function is required");var d=t(s,r,arguments);return o(d,1+e(0,c.length-(arguments.length-1)),!0)};var i=function(){return t(s,f,arguments)};return n?n(rr,"apply",{value:i}):rr.apply=i,rr}function hc(){if(ao)return Hr;ao=!0;var s=ar(),l=fc(),o=l(s("String.prototype.indexOf"));return Hr=function(a,f){var r=s(a,!!f);return typeof r=="function"&&o(a,".prototype.")>-1?l(r):r},Hr}var Mi,ji,Bi,Ni,Li,Ui,Di,Fi,Wi,qi,$i,zi,Hi,Ki,Vi,Gi,jr,Qi,Br,Yi,Nr,Ji,Lr,Xi,Ur,Zi,Dr,eo,Fr,to,Wr,ro,qr,no,$r,io,zr,oo,rr,so,Hr,ao,pc=ft(()=>{he(),de(),pe(),Mi={},ji=!1,Bi={},Ni=!1,Li={},Ui=!1,Di={},Fi=!1,Wi={},qi=!1,$i={},zi=!1,Hi={},Ki=!1,Vi={},Gi=!1,jr={},Qi=!1,Br={},Yi=!1,Nr={},Ji=!1,Lr={},Xi=!1,Ur={},Zi=!1,Dr={},eo=!1,Fr={},to=!1,Wr={},ro=!1,qr={},no=!1,$r={},io=!1,zr={},oo=!1,rr={},so=!1,Hr={},ao=!1});function ko(s){throw new Error("Node.js process "+s+" is not supported by JSPM core outside of Node.js")}function dc(){!Kt||!zt||(Kt=!1,zt.length?mt=zt.concat(mt):mr=-1,mt.length&&Qa())}function Qa(){if(!Kt){var s=setTimeout(dc,0);Kt=!0;for(var l=mt.length;l;){for(zt=mt,mt=[];++mr<l;)zt&&zt[mr].run();mr=-1,l=mt.length}zt=null,Kt=!1,clearTimeout(s)}}function gc(s){var l=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)l[o-1]=arguments[o];mt.push(new Ya(s,l)),mt.length===1&&!Kt&&setTimeout(Qa,0)}function Ya(s,l){this.fun=s,this.array=l}function ot(){}function yc(s){ko("_linkedBinding")}function mc(s){ko("dlopen")}function bc(){return[]}function vc(){return[]}function wc(s,l){if(!s)throw new Error(l||"assertion error")}function _c(){return!1}function Ec(){return Et.now()/1e3}function yn(s){var l=Math.floor((Date.now()-Et.now())*.001),o=Et.now()*.001,a=Math.floor(o)+l,f=Math.floor(o%1*1e9);return s&&(a=a-s[0],f=f-s[1],f<0&&(a--,f+=Kr)),[a,f]}function Rt(){return Oo}function Sc(s){return[]}var mt,Kt,zt,mr,Uo,Do,Fo,Wo,qo,$o,zo,Ho,Ko,Vo,Go,Qo,Yo,Jo,Xo,Zo,es,ts,rs,ns,is,xr,os,ss,as,ls,us,cs,fs,hs,ps,ds,gs,ys,ms,bs,vs,ws,_s,Es,Ss,As,Is,xs,Ts,ks,Os,Et,mn,Kr,Ps,Cs,Rs,Ms,js,Bs,Ns,Ls,Us,Ds,Fs,Oo,Ja=ft(()=>{he(),de(),pe(),mt=[],Kt=!1,mr=-1,Ya.prototype.run=function(){this.fun.apply(null,this.array)},Uo="browser",Do="x64",Fo="browser",Wo={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},qo=["/usr/bin/node"],$o=[],zo="v16.8.0",Ho={},Ko=function(s,l){console.warn((l?l+": ":"")+s)},Vo=function(s){ko("binding")},Go=function(s){return 0},Qo=function(){return"/"},Yo=function(s){},Jo={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Xo=ot,Zo=[],es={},ts=!1,rs={},ns=ot,is=ot,xr=function(){return{}},os=xr,ss=xr,as=ot,ls=ot,us=ot,cs={},fs={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},hs=ot,ps=ot,ds=ot,gs=ot,ys=ot,ms=ot,bs=ot,vs=void 0,ws=void 0,_s=void 0,Es=ot,Ss=2,As=1,Is="/bin/usr/node",xs=9229,Ts="node",ks=[],Os=ot,Et={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Et.now===void 0&&(mn=Date.now(),Et.timing&&Et.timing.navigationStart&&(mn=Et.timing.navigationStart),Et.now=()=>Date.now()-mn),Kr=1e9,yn.bigint=function(s){var l=yn(s);return typeof BigInt>"u"?l[0]*Kr+l[1]:BigInt(l[0]*Kr)+BigInt(l[1])},Ps=10,Cs={},Rs=0,Ms=Rt,js=Rt,Bs=Rt,Ns=Rt,Ls=Rt,Us=ot,Ds=Rt,Fs=Rt,Oo={version:zo,versions:Ho,arch:Do,platform:Fo,release:Jo,_rawDebug:Xo,moduleLoadList:Zo,binding:Vo,_linkedBinding:yc,_events:Cs,_eventsCount:Rs,_maxListeners:Ps,on:Rt,addListener:Ms,once:js,off:Bs,removeListener:Ns,removeAllListeners:Ls,emit:Us,prependListener:Ds,prependOnceListener:Fs,listeners:Sc,domain:es,_exiting:ts,config:rs,dlopen:mc,uptime:Ec,_getActiveRequests:bc,_getActiveHandles:vc,reallyExit:ns,_kill:is,cpuUsage:xr,resourceUsage:os,memoryUsage:ss,kill:as,exit:ls,openStdin:us,allowedNodeEnvironmentFlags:cs,assert:wc,features:fs,_fatalExceptions:hs,setUncaughtExceptionCaptureCallback:ps,hasUncaughtExceptionCaptureCallback:_c,emitWarning:Ko,nextTick:gc,_tickCallback:ds,_debugProcess:gs,_debugEnd:ys,_startProfilerIdleNotifier:ms,_stopProfilerIdleNotifier:bs,stdout:vs,stdin:_s,stderr:ws,abort:Es,umask:Go,chdir:Yo,cwd:Qo,env:Wo,title:Uo,argv:qo,execArgv:$o,pid:Ss,ppid:As,execPath:Is,debugPort:xs,hrtime:yn,argv0:Ts,_preload_modules:ks,setSourceMapsEnabled:Os}});function Ac(){if(lo)return Vr;lo=!0;var s=Oo;function l(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function o(r,t){for(var n="",e=0,i=-1,c=0,d,p=0;p<=r.length;++p){if(p<r.length)d=r.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(i===p-1||c===1))if(i!==p-1&&c===2){if(n.length<2||e!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var m=n.lastIndexOf("/");if(m!==n.length-1){m===-1?(n="",e=0):(n=n.slice(0,m),e=n.length-1-n.lastIndexOf("/")),i=p,c=0;continue}}else if(n.length===2||n.length===1){n="",e=0,i=p,c=0;continue}}t&&(n.length>0?n+="/..":n="..",e=2)}else n.length>0?n+="/"+r.slice(i+1,p):n=r.slice(i+1,p),e=p-i-1;i=p,c=0}else d===46&&c!==-1?++c:c=-1}return n}function a(r,t){var n=t.dir||t.root,e=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+e:n+r+e:e}var f={resolve:function(){for(var r="",t=!1,n,e=arguments.length-1;e>=-1&&!t;e--){var i;e>=0?i=arguments[e]:(n===void 0&&(n=s.cwd()),i=n),l(i),i.length!==0&&(r=i+"/"+r,t=i.charCodeAt(0)===47)}return r=o(r,!t),t?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(l(r),r.length===0)return".";var t=r.charCodeAt(0)===47,n=r.charCodeAt(r.length-1)===47;return r=o(r,!t),r.length===0&&!t&&(r="."),r.length>0&&n&&(r+="/"),t?"/"+r:r},isAbsolute:function(r){return l(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,t=0;t<arguments.length;++t){var n=arguments[t];l(n),n.length>0&&(r===void 0?r=n:r+="/"+n)}return r===void 0?".":f.normalize(r)},relative:function(r,t){if(l(r),l(t),r===t||(r=f.resolve(r),t=f.resolve(t),r===t))return"";for(var n=1;n<r.length&&r.charCodeAt(n)===47;++n);for(var e=r.length,i=e-n,c=1;c<t.length&&t.charCodeAt(c)===47;++c);for(var d=t.length,p=d-c,m=i<p?i:p,b=-1,E=0;E<=m;++E){if(E===m){if(p>m){if(t.charCodeAt(c+E)===47)return t.slice(c+E+1);if(E===0)return t.slice(c+E)}else i>m&&(r.charCodeAt(n+E)===47?b=E:E===0&&(b=0));break}var w=r.charCodeAt(n+E),A=t.charCodeAt(c+E);if(w!==A)break;w===47&&(b=E)}var g="";for(E=n+b+1;E<=e;++E)(E===e||r.charCodeAt(E)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+t.slice(c+b):(c+=b,t.charCodeAt(c)===47&&++c,t.slice(c))},_makeLong:function(r){return r},dirname:function(r){if(l(r),r.length===0)return".";for(var t=r.charCodeAt(0),n=t===47,e=-1,i=!0,c=r.length-1;c>=1;--c)if(t=r.charCodeAt(c),t===47){if(!i){e=c;break}}else i=!1;return e===-1?n?"/":".":n&&e===1?"//":r.slice(0,e)},basename:function(r,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');l(r);var n=0,e=-1,i=!0,c;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";var d=t.length-1,p=-1;for(c=r.length-1;c>=0;--c){var m=r.charCodeAt(c);if(m===47){if(!i){n=c+1;break}}else p===-1&&(i=!1,p=c+1),d>=0&&(m===t.charCodeAt(d)?--d===-1&&(e=c):(d=-1,e=p))}return n===e?e=p:e===-1&&(e=r.length),r.slice(n,e)}else{for(c=r.length-1;c>=0;--c)if(r.charCodeAt(c)===47){if(!i){n=c+1;break}}else e===-1&&(i=!1,e=c+1);return e===-1?"":r.slice(n,e)}},extname:function(r){l(r);for(var t=-1,n=0,e=-1,i=!0,c=0,d=r.length-1;d>=0;--d){var p=r.charCodeAt(d);if(p===47){if(!i){n=d+1;break}continue}e===-1&&(i=!1,e=d+1),p===46?t===-1?t=d:c!==1&&(c=1):t!==-1&&(c=-1)}return t===-1||e===-1||c===0||c===1&&t===e-1&&t===n+1?"":r.slice(t,e)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return a("/",r)},parse:function(r){l(r);var t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;var n=r.charCodeAt(0),e=n===47,i;e?(t.root="/",i=1):i=0;for(var c=-1,d=0,p=-1,m=!0,b=r.length-1,E=0;b>=i;--b){if(n=r.charCodeAt(b),n===47){if(!m){d=b+1;break}continue}p===-1&&(m=!1,p=b+1),n===46?c===-1?c=b:E!==1&&(E=1):c!==-1&&(E=-1)}return c===-1||p===-1||E===0||E===1&&c===p-1&&c===d+1?p!==-1&&(d===0&&e?t.base=t.name=r.slice(1,p):t.base=t.name=r.slice(d,p)):(d===0&&e?(t.name=r.slice(1,c),t.base=r.slice(1,p)):(t.name=r.slice(d,c),t.base=r.slice(d,p)),t.ext=r.slice(c,p)),d>0?t.dir=r.slice(0,d-1):e&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};return f.posix=f,Vr=f,Vr}var Vr,lo,uo,Ic=ft(()=>{he(),de(),pe(),Ja(),Vr={},lo=!1,uo=Ac()}),Xa={};ir(Xa,{URL:()=>ll,Url:()=>nl,default:()=>st,fileURLToPath:()=>el,format:()=>il,parse:()=>al,pathToFileURL:()=>tl,resolve:()=>ol,resolveObject:()=>sl});function xc(){if(co)return Gr;co=!0;var s=typeof Map=="function"&&Map.prototype,l=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=s&&l&&typeof l.get=="function"?l.get:null,a=s&&Map.prototype.forEach,f=typeof Set=="function"&&Set.prototype,r=Object.getOwnPropertyDescriptor&&f?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,t=f&&r&&typeof r.get=="function"?r.get:null,n=f&&Set.prototype.forEach,e=typeof WeakMap=="function"&&WeakMap.prototype,i=e?WeakMap.prototype.has:null,c=typeof WeakSet=="function"&&WeakSet.prototype,d=c?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,m=p?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,E=Object.prototype.toString,w=Function.prototype.toString,A=String.prototype.match,g=String.prototype.slice,_=String.prototype.replace,S=String.prototype.toUpperCase,v=String.prototype.toLowerCase,R=RegExp.prototype.test,P=Array.prototype.concat,I=Array.prototype.join,O=Array.prototype.slice,T=Math.floor,F=typeof BigInt=="function"?BigInt.prototype.valueOf:null,x=Object.getOwnPropertySymbols,q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,H=typeof Symbol=="function"&&typeof Symbol.iterator=="object",U=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===H||!0)?Symbol.toStringTag:null,ae=Object.prototype.propertyIsEnumerable,te=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(W){return W.__proto__}:null);function Z(W,Y){if(W===1/0||W===-1/0||W!==W||W&&W>-1e3&&W<1e3||R.call(/e/,Y))return Y;var Ae=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof W=="number"){var Te=W<0?-T(-W):T(W);if(Te!==W){var ke=String(Te),Be=g.call(Y,ke.length+1);return _.call(ke,Ae,"$&_")+"."+_.call(_.call(Be,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(Y,Ae,"$&_")}var le=rl,K=le.custom,ie=ee(K)?K:null;Gr=function W(Y,Ae,Te,ke){var Be=Ae||{};if(ue(Be,"quoteStyle")&&Be.quoteStyle!=="single"&&Be.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ue(Be,"maxStringLength")&&(typeof Be.maxStringLength=="number"?Be.maxStringLength<0&&Be.maxStringLength!==1/0:Be.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ke=ue(Be,"customInspect")?Be.customInspect:!0;if(typeof Ke!="boolean"&&Ke!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ue(Be,"indent")&&Be.indent!==null&&Be.indent!=="	"&&!(parseInt(Be.indent,10)===Be.indent&&Be.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ue(Be,"numericSeparator")&&typeof Be.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Ye=Be.numericSeparator;if(typeof Y>"u")return"undefined";if(Y===null)return"null";if(typeof Y=="boolean")return Y?"true":"false";if(typeof Y=="string")return ce(Y,Be);if(typeof Y=="number"){if(Y===0)return 1/0/Y>0?"0":"-0";var Le=String(Y);return Ye?Z(Y,Le):Le}if(typeof Y=="bigint"){var $e=String(Y)+"n";return Ye?Z(Y,$e):$e}var Re=typeof Be.depth>"u"?5:Be.depth;if(typeof Te>"u"&&(Te=0),Te>=Re&&Re>0&&typeof Y=="object")return fe(Y)?"[Array]":"[Object]";var Ue=j(Be,Te);if(typeof ke>"u")ke=[];else if(oe(ke,Y)>=0)return"[Circular]";function We(dt,Ct,qt){if(Ct&&(ke=O.call(ke),ke.push(Ct)),qt){var gt={depth:Be.depth};return ue(Be,"quoteStyle")&&(gt.quoteStyle=Be.quoteStyle),W(dt,gt,Te+1,ke)}return W(dt,Be,Te+1,ke)}if(typeof Y=="function"&&!_e(Y)){var Qe=Q(Y),Xe=ne(Y,We);return"[Function"+(Qe?": "+Qe:" (anonymous)")+"]"+(Xe.length>0?" { "+I.call(Xe,", ")+" }":"")}if(ee(Y)){var ht=H?_.call(String(Y),/^(Symbol\(.*\))_[^)]*$/,"$1"):q.call(Y);return typeof Y=="object"&&!H?u(ht):ht}if(Se(Y)){for(var C="<"+v.call(String(Y.nodeName)),N=Y.attributes||[],Ee=0;Ee<N.length;Ee++)C+=" "+N[Ee].name+"="+M(G(N[Ee].value),"double",Be);return C+=">",Y.childNodes&&Y.childNodes.length&&(C+="..."),C+="</"+v.call(String(Y.nodeName))+">",C}if(fe(Y)){if(Y.length===0)return"[]";var xe=ne(Y,We);return Ue&&!k(xe)?"["+z(xe,Ue)+"]":"[ "+I.call(xe,", ")+" ]"}if(X(Y)){var Oe=ne(Y,We);return!("cause"in Error.prototype)&&"cause"in Y&&!ae.call(Y,"cause")?"{ ["+String(Y)+"] "+I.call(P.call("[cause]: "+We(Y.cause),Oe),", ")+" }":Oe.length===0?"["+String(Y)+"]":"{ ["+String(Y)+"] "+I.call(Oe,", ")+" }"}if(typeof Y=="object"&&Ke){if(ie&&typeof Y[ie]=="function"&&le)return le(Y,{depth:Re-Te});if(Ke!=="symbol"&&typeof Y.inspect=="function")return Y.inspect()}if(ye(Y)){var Je=[];return a&&a.call(Y,function(dt,Ct){Je.push(We(Ct,Y,!0)+" => "+We(dt,Y))}),y("Map",o.call(Y),Je,Ue)}if(J(Y)){var at=[];return n&&n.call(Y,function(dt){at.push(We(dt,Y))}),y("Set",t.call(Y),at,Ue)}if(ge(Y))return h("WeakMap");if(ve(Y))return h("WeakSet");if(we(Y))return h("WeakRef");if(se(Y))return u(We(Number(Y)));if(re(Y))return u(We(F.call(Y)));if(V(Y))return u(b.call(Y));if(D(Y))return u(We(String(Y)));if(typeof window<"u"&&Y===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Y===globalThis||typeof Qr<"u"&&Y===Qr)return"{ [object globalThis] }";if(!$(Y)&&!_e(Y)){var pt=ne(Y,We),lr=te?te(Y)===Object.prototype:Y instanceof Object||Y.constructor===Object,ur=Y instanceof Object?"":"null prototype",cr=!lr&&U&&Object(Y)===Y&&U in Y?g.call(B(Y),8,-1):ur?"Object":"",Ar=lr||typeof Y.constructor!="function"?"":Y.constructor.name?Y.constructor.name+" ":"",Wt=Ar+(cr||ur?"["+I.call(P.call([],cr||[],ur||[]),": ")+"] ":"");return pt.length===0?Wt+"{}":Ue?Wt+"{"+z(pt,Ue)+"}":Wt+"{ "+I.call(pt,", ")+" }"}return String(Y)};function M(W,Y,Ae){var Te=(Ae.quoteStyle||Y)==="double"?'"':"'";return Te+W+Te}function G(W){return _.call(String(W),/"/g,"&quot;")}function fe(W){return B(W)==="[object Array]"&&(!U||!(typeof W=="object"&&U in W))}function $(W){return B(W)==="[object Date]"&&(!U||!(typeof W=="object"&&U in W))}function _e(W){return B(W)==="[object RegExp]"&&(!U||!(typeof W=="object"&&U in W))}function X(W){return B(W)==="[object Error]"&&(!U||!(typeof W=="object"&&U in W))}function D(W){return B(W)==="[object String]"&&(!U||!(typeof W=="object"&&U in W))}function se(W){return B(W)==="[object Number]"&&(!U||!(typeof W=="object"&&U in W))}function V(W){return B(W)==="[object Boolean]"&&(!U||!(typeof W=="object"&&U in W))}function ee(W){if(H)return W&&typeof W=="object"&&W instanceof Symbol;if(typeof W=="symbol")return!0;if(!W||typeof W!="object"||!q)return!1;try{return q.call(W),!0}catch{}return!1}function re(W){if(!W||typeof W!="object"||!F)return!1;try{return F.call(W),!0}catch{}return!1}var me=Object.prototype.hasOwnProperty||function(W){return W in(this||Qr)};function ue(W,Y){return me.call(W,Y)}function B(W){return E.call(W)}function Q(W){if(W.name)return W.name;var Y=A.call(w.call(W),/^function\s*([\w$]+)/);return Y?Y[1]:null}function oe(W,Y){if(W.indexOf)return W.indexOf(Y);for(var Ae=0,Te=W.length;Ae<Te;Ae++)if(W[Ae]===Y)return Ae;return-1}function ye(W){if(!o||!W||typeof W!="object")return!1;try{o.call(W);try{t.call(W)}catch{return!0}return W instanceof Map}catch{}return!1}function ge(W){if(!i||!W||typeof W!="object")return!1;try{i.call(W,i);try{d.call(W,d)}catch{return!0}return W instanceof WeakMap}catch{}return!1}function we(W){if(!m||!W||typeof W!="object")return!1;try{return m.call(W),!0}catch{}return!1}function J(W){if(!t||!W||typeof W!="object")return!1;try{t.call(W);try{o.call(W)}catch{return!0}return W instanceof Set}catch{}return!1}function ve(W){if(!d||!W||typeof W!="object")return!1;try{d.call(W,d);try{i.call(W,i)}catch{return!0}return W instanceof WeakSet}catch{}return!1}function Se(W){return!W||typeof W!="object"?!1:typeof HTMLElement<"u"&&W instanceof HTMLElement?!0:typeof W.nodeName=="string"&&typeof W.getAttribute=="function"}function ce(W,Y){if(W.length>Y.maxStringLength){var Ae=W.length-Y.maxStringLength,Te="... "+Ae+" more character"+(Ae>1?"s":"");return ce(g.call(W,0,Y.maxStringLength),Y)+Te}var ke=_.call(_.call(W,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,je);return M(ke,"single",Y)}function je(W){var Y=W.charCodeAt(0),Ae={8:"b",9:"t",10:"n",12:"f",13:"r"}[Y];return Ae?"\\"+Ae:"\\x"+(Y<16?"0":"")+S.call(Y.toString(16))}function u(W){return"Object("+W+")"}function h(W){return W+" { ? }"}function y(W,Y,Ae,Te){var ke=Te?z(Ae,Te):I.call(Ae,", ");return W+" ("+Y+") {"+ke+"}"}function k(W){for(var Y=0;Y<W.length;Y++)if(oe(W[Y],`
`)>=0)return!1;return!0}function j(W,Y){var Ae;if(W.indent==="	")Ae="	";else if(typeof W.indent=="number"&&W.indent>0)Ae=I.call(Array(W.indent+1)," ");else return null;return{base:Ae,prev:I.call(Array(Y+1),Ae)}}function z(W,Y){if(W.length===0)return"";var Ae=`
`+Y.prev+Y.base;return Ae+I.call(W,","+Ae)+`
`+Y.prev}function ne(W,Y){var Ae=fe(W),Te=[];if(Ae){Te.length=W.length;for(var ke=0;ke<W.length;ke++)Te[ke]=ue(W,ke)?Y(W[ke],W):""}var Be=typeof x=="function"?x(W):[],Ke;if(H){Ke={};for(var Ye=0;Ye<Be.length;Ye++)Ke["$"+Be[Ye]]=Be[Ye]}for(var Le in W)ue(W,Le)&&(Ae&&String(Number(Le))===Le&&Le<W.length||H&&Ke["$"+Le]instanceof Symbol||(R.call(/[^\w$]/,Le)?Te.push(Y(Le,W)+": "+Y(W[Le],W)):Te.push(Le+": "+Y(W[Le],W))));if(typeof x=="function")for(var $e=0;$e<Be.length;$e++)ae.call(W,Be[$e])&&Te.push("["+Y(Be[$e])+"]: "+Y(W[Be[$e]],W));return Te}return Gr}function Tc(){if(fo)return Yr;fo=!0;var s=ar(),l=hc(),o=xc(),a=Sr(),f=s("%WeakMap%",!0),r=s("%Map%",!0),t=l("WeakMap.prototype.get",!0),n=l("WeakMap.prototype.set",!0),e=l("WeakMap.prototype.has",!0),i=l("Map.prototype.get",!0),c=l("Map.prototype.set",!0),d=l("Map.prototype.has",!0),p=function(w,A){for(var g=w,_;(_=g.next)!==null;g=_)if(_.key===A)return g.next=_.next,_.next=w.next,w.next=_,_},m=function(w,A){var g=p(w,A);return g&&g.value},b=function(w,A,g){var _=p(w,A);_?_.value=g:w.next={key:A,next:w.next,value:g}},E=function(w,A){return!!p(w,A)};return Yr=function(){var w,A,g,_={assert:function(S){if(!_.has(S))throw new a("Side channel does not contain "+o(S))},get:function(S){if(f&&S&&(typeof S=="object"||typeof S=="function")){if(w)return t(w,S)}else if(r){if(A)return i(A,S)}else if(g)return m(g,S)},has:function(S){if(f&&S&&(typeof S=="object"||typeof S=="function")){if(w)return e(w,S)}else if(r){if(A)return d(A,S)}else if(g)return E(g,S);return!1},set:function(S,v){f&&S&&(typeof S=="object"||typeof S=="function")?(w||(w=new f),n(w,S,v)):r?(A||(A=new r),c(A,S,v)):(g||(g={key:{},next:null}),b(g,S,v))}};return _},Yr}function Po(){if(ho)return Jr;ho=!0;var s=String.prototype.replace,l=/%20/g,o={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Jr={default:o.RFC3986,formatters:{RFC1738:function(a){return s.call(a,l,"+")},RFC3986:function(a){return String(a)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986},Jr}function Za(){if(po)return Xr;po=!0;var s=Po(),l=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var w=[],A=0;A<256;++A)w.push("%"+((A<16?"0":"")+A.toString(16)).toUpperCase());return w}(),f=function(w){for(;w.length>1;){var A=w.pop(),g=A.obj[A.prop];if(o(g)){for(var _=[],S=0;S<g.length;++S)typeof g[S]<"u"&&_.push(g[S]);A.obj[A.prop]=_}}},r=function(w,A){for(var g=A&&A.plainObjects?Object.create(null):{},_=0;_<w.length;++_)typeof w[_]<"u"&&(g[_]=w[_]);return g},t=function w(A,g,_){if(!g)return A;if(typeof g!="object"){if(o(A))A.push(g);else if(A&&typeof A=="object")(_&&(_.plainObjects||_.allowPrototypes)||!l.call(Object.prototype,g))&&(A[g]=!0);else return[A,g];return A}if(!A||typeof A!="object")return[A].concat(g);var S=A;return o(A)&&!o(g)&&(S=r(A,_)),o(A)&&o(g)?(g.forEach(function(v,R){if(l.call(A,R)){var P=A[R];P&&typeof P=="object"&&v&&typeof v=="object"?A[R]=w(P,v,_):A.push(v)}else A[R]=v}),A):Object.keys(g).reduce(function(v,R){var P=g[R];return l.call(v,R)?v[R]=w(v[R],P,_):v[R]=P,v},S)},n=function(w,A){return Object.keys(A).reduce(function(g,_){return g[_]=A[_],g},w)},e=function(w,A,g){var _=w.replace(/\+/g," ");if(g==="iso-8859-1")return _.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(_)}catch{return _}},i=1024,c=function(w,A,g,_,S){if(w.length===0)return w;var v=w;if(typeof w=="symbol"?v=Symbol.prototype.toString.call(w):typeof w!="string"&&(v=String(w)),g==="iso-8859-1")return escape(v).replace(/%u[0-9a-f]{4}/gi,function(x){return"%26%23"+parseInt(x.slice(2),16)+"%3B"});for(var R="",P=0;P<v.length;P+=i){for(var I=v.length>=i?v.slice(P,P+i):v,O=[],T=0;T<I.length;++T){var F=I.charCodeAt(T);if(F===45||F===46||F===95||F===126||F>=48&&F<=57||F>=65&&F<=90||F>=97&&F<=122||S===s.RFC1738&&(F===40||F===41)){O[O.length]=I.charAt(T);continue}if(F<128){O[O.length]=a[F];continue}if(F<2048){O[O.length]=a[192|F>>6]+a[128|F&63];continue}if(F<55296||F>=57344){O[O.length]=a[224|F>>12]+a[128|F>>6&63]+a[128|F&63];continue}T+=1,F=65536+((F&1023)<<10|I.charCodeAt(T)&1023),O[O.length]=a[240|F>>18]+a[128|F>>12&63]+a[128|F>>6&63]+a[128|F&63]}R+=O.join("")}return R},d=function(w){for(var A=[{obj:{o:w},prop:"o"}],g=[],_=0;_<A.length;++_)for(var S=A[_],v=S.obj[S.prop],R=Object.keys(v),P=0;P<R.length;++P){var I=R[P],O=v[I];typeof O=="object"&&O!==null&&g.indexOf(O)===-1&&(A.push({obj:v,prop:I}),g.push(O))}return f(A),w},p=function(w){return Object.prototype.toString.call(w)==="[object RegExp]"},m=function(w){return!w||typeof w!="object"?!1:!!(w.constructor&&w.constructor.isBuffer&&w.constructor.isBuffer(w))},b=function(w,A){return[].concat(w,A)},E=function(w,A){if(o(w)){for(var g=[],_=0;_<w.length;_+=1)g.push(A(w[_]));return g}return A(w)};return Xr={arrayToObject:r,assign:n,combine:b,compact:d,decode:e,encode:c,isBuffer:m,isRegExp:p,maybeMap:E,merge:t},Xr}function kc(){if(go)return Zr;go=!0;var s=Tc(),l=Za(),o=Po(),a=Object.prototype.hasOwnProperty,f={brackets:function(E){return E+"[]"},comma:"comma",indices:function(E,w){return E+"["+w+"]"},repeat:function(E){return E}},r=Array.isArray,t=Array.prototype.push,n=function(E,w){t.apply(E,r(w)?w:[w])},e=Date.prototype.toISOString,i=o.default,c={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:l.encode,encodeValuesOnly:!1,format:i,formatter:o.formatters[i],indices:!1,serializeDate:function(E){return e.call(E)},skipNulls:!1,strictNullHandling:!1},d=function(E){return typeof E=="string"||typeof E=="number"||typeof E=="boolean"||typeof E=="symbol"||typeof E=="bigint"},p={},m=function E(w,A,g,_,S,v,R,P,I,O,T,F,x,q,H,U,ae,te){for(var Z=w,le=te,K=0,ie=!1;(le=le.get(p))!==void 0&&!ie;){var M=le.get(w);if(K+=1,typeof M<"u"){if(M===K)throw new RangeError("Cyclic object value");ie=!0}typeof le.get(p)>"u"&&(K=0)}if(typeof O=="function"?Z=O(A,Z):Z instanceof Date?Z=x(Z):g==="comma"&&r(Z)&&(Z=l.maybeMap(Z,function(B){return B instanceof Date?x(B):B})),Z===null){if(v)return I&&!U?I(A,c.encoder,ae,"key",q):A;Z=""}if(d(Z)||l.isBuffer(Z)){if(I){var G=U?A:I(A,c.encoder,ae,"key",q);return[H(G)+"="+H(I(Z,c.encoder,ae,"value",q))]}return[H(A)+"="+H(String(Z))]}var fe=[];if(typeof Z>"u")return fe;var $;if(g==="comma"&&r(Z))U&&I&&(Z=l.maybeMap(Z,I)),$=[{value:Z.length>0?Z.join(",")||null:void 0}];else if(r(O))$=O;else{var _e=Object.keys(Z);$=T?_e.sort(T):_e}var X=P?A.replace(/\./g,"%2E"):A,D=_&&r(Z)&&Z.length===1?X+"[]":X;if(S&&r(Z)&&Z.length===0)return D+"[]";for(var se=0;se<$.length;++se){var V=$[se],ee=typeof V=="object"&&typeof V.value<"u"?V.value:Z[V];if(!(R&&ee===null)){var re=F&&P?V.replace(/\./g,"%2E"):V,me=r(Z)?typeof g=="function"?g(D,re):D:D+(F?"."+re:"["+re+"]");te.set(w,K);var ue=s();ue.set(p,te),n(fe,E(ee,me,g,_,S,v,R,P,g==="comma"&&U&&r(Z)?null:I,O,T,F,x,q,H,U,ae,ue))}}return fe},b=function(E){if(!E)return c;if(typeof E.allowEmptyArrays<"u"&&typeof E.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof E.encodeDotInKeys<"u"&&typeof E.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(E.encoder!==null&&typeof E.encoder<"u"&&typeof E.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=E.charset||c.charset;if(typeof E.charset<"u"&&E.charset!=="utf-8"&&E.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var A=o.default;if(typeof E.format<"u"){if(!a.call(o.formatters,E.format))throw new TypeError("Unknown format option provided.");A=E.format}var g=o.formatters[A],_=c.filter;(typeof E.filter=="function"||r(E.filter))&&(_=E.filter);var S;if(E.arrayFormat in f?S=E.arrayFormat:"indices"in E?S=E.indices?"indices":"repeat":S=c.arrayFormat,"commaRoundTrip"in E&&typeof E.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v=typeof E.allowDots>"u"?E.encodeDotInKeys===!0?!0:c.allowDots:!!E.allowDots;return{addQueryPrefix:typeof E.addQueryPrefix=="boolean"?E.addQueryPrefix:c.addQueryPrefix,allowDots:v,allowEmptyArrays:typeof E.allowEmptyArrays=="boolean"?!!E.allowEmptyArrays:c.allowEmptyArrays,arrayFormat:S,charset:w,charsetSentinel:typeof E.charsetSentinel=="boolean"?E.charsetSentinel:c.charsetSentinel,commaRoundTrip:E.commaRoundTrip,delimiter:typeof E.delimiter>"u"?c.delimiter:E.delimiter,encode:typeof E.encode=="boolean"?E.encode:c.encode,encodeDotInKeys:typeof E.encodeDotInKeys=="boolean"?E.encodeDotInKeys:c.encodeDotInKeys,encoder:typeof E.encoder=="function"?E.encoder:c.encoder,encodeValuesOnly:typeof E.encodeValuesOnly=="boolean"?E.encodeValuesOnly:c.encodeValuesOnly,filter:_,format:A,formatter:g,serializeDate:typeof E.serializeDate=="function"?E.serializeDate:c.serializeDate,skipNulls:typeof E.skipNulls=="boolean"?E.skipNulls:c.skipNulls,sort:typeof E.sort=="function"?E.sort:null,strictNullHandling:typeof E.strictNullHandling=="boolean"?E.strictNullHandling:c.strictNullHandling}};return Zr=function(E,w){var A=E,g=b(w),_,S;typeof g.filter=="function"?(S=g.filter,A=S("",A)):r(g.filter)&&(S=g.filter,_=S);var v=[];if(typeof A!="object"||A===null)return"";var R=f[g.arrayFormat],P=R==="comma"&&g.commaRoundTrip;_||(_=Object.keys(A)),g.sort&&_.sort(g.sort);for(var I=s(),O=0;O<_.length;++O){var T=_[O];g.skipNulls&&A[T]===null||n(v,m(A[T],T,R,P,g.allowEmptyArrays,g.strictNullHandling,g.skipNulls,g.encodeDotInKeys,g.encode?g.encoder:null,g.filter,g.sort,g.allowDots,g.serializeDate,g.format,g.formatter,g.encodeValuesOnly,g.charset,I))}var F=v.join(g.delimiter),x=g.addQueryPrefix===!0?"?":"";return g.charsetSentinel&&(g.charset==="iso-8859-1"?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),F.length>0?x+F:""},Zr}function Oc(){if(yo)return en;yo=!0;var s=Za(),l=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:s.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},f=function(p){return p.replace(/&#(\d+);/g,function(m,b){return String.fromCharCode(parseInt(b,10))})},r=function(p,m){return p&&typeof p=="string"&&m.comma&&p.indexOf(",")>-1?p.split(","):p},t="utf8=%26%2310003%3B",n="utf8=%E2%9C%93",e=function(p,m){var b={__proto__:null},E=m.ignoreQueryPrefix?p.replace(/^\?/,""):p;E=E.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var w=m.parameterLimit===1/0?void 0:m.parameterLimit,A=E.split(m.delimiter,w),g=-1,_,S=m.charset;if(m.charsetSentinel)for(_=0;_<A.length;++_)A[_].indexOf("utf8=")===0&&(A[_]===n?S="utf-8":A[_]===t&&(S="iso-8859-1"),g=_,_=A.length);for(_=0;_<A.length;++_)if(_!==g){var v=A[_],R=v.indexOf("]="),P=R===-1?v.indexOf("="):R+1,I,O;P===-1?(I=m.decoder(v,a.decoder,S,"key"),O=m.strictNullHandling?null:""):(I=m.decoder(v.slice(0,P),a.decoder,S,"key"),O=s.maybeMap(r(v.slice(P+1),m),function(F){return m.decoder(F,a.decoder,S,"value")})),O&&m.interpretNumericEntities&&S==="iso-8859-1"&&(O=f(O)),v.indexOf("[]=")>-1&&(O=o(O)?[O]:O);var T=l.call(b,I);T&&m.duplicates==="combine"?b[I]=s.combine(b[I],O):(!T||m.duplicates==="last")&&(b[I]=O)}return b},i=function(p,m,b,E){for(var w=E?m:r(m,b),A=p.length-1;A>=0;--A){var g,_=p[A];if(_==="[]"&&b.parseArrays)g=b.allowEmptyArrays&&(w===""||b.strictNullHandling&&w===null)?[]:[].concat(w);else{g=b.plainObjects?Object.create(null):{};var S=_.charAt(0)==="["&&_.charAt(_.length-1)==="]"?_.slice(1,-1):_,v=b.decodeDotInKeys?S.replace(/%2E/g,"."):S,R=parseInt(v,10);!b.parseArrays&&v===""?g={0:w}:!isNaN(R)&&_!==v&&String(R)===v&&R>=0&&b.parseArrays&&R<=b.arrayLimit?(g=[],g[R]=w):v!=="__proto__"&&(g[v]=w)}w=g}return w},c=function(p,m,b,E){if(p){var w=b.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,A=/(\[[^[\]]*])/,g=/(\[[^[\]]*])/g,_=b.depth>0&&A.exec(w),S=_?w.slice(0,_.index):w,v=[];if(S){if(!b.plainObjects&&l.call(Object.prototype,S)&&!b.allowPrototypes)return;v.push(S)}for(var R=0;b.depth>0&&(_=g.exec(w))!==null&&R<b.depth;){if(R+=1,!b.plainObjects&&l.call(Object.prototype,_[1].slice(1,-1))&&!b.allowPrototypes)return;v.push(_[1])}if(_){if(b.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+b.depth+" and strictDepth is true");v.push("["+w.slice(_.index)+"]")}return i(v,m,b,E)}},d=function(p){if(!p)return a;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var m=typeof p.charset>"u"?a.charset:p.charset,b=typeof p.duplicates>"u"?a.duplicates:p.duplicates;if(b!=="combine"&&b!=="first"&&b!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var E=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:a.allowDots:!!p.allowDots;return{allowDots:E,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:a.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:a.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:a.arrayLimit,charset:m,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:a.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:a.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:a.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:a.decoder,delimiter:typeof p.delimiter=="string"||s.isRegExp(p.delimiter)?p.delimiter:a.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:a.depth,duplicates:b,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:a.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:a.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:a.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:a.strictNullHandling}};return en=function(p,m){var b=d(m);if(p===""||p===null||typeof p>"u")return b.plainObjects?Object.create(null):{};for(var E=typeof p=="string"?e(p,b):p,w=b.plainObjects?Object.create(null):{},A=Object.keys(E),g=0;g<A.length;++g){var _=A[g],S=c(_,E[_],b,typeof p=="string");w=s.merge(w,S,b)}return b.allowSparse===!0?w:s.compact(w)},en}function Pc(){if(mo)return tn;mo=!0;var s=kc(),l=Oc(),o=Po();return tn={formats:o,parse:l,stringify:s},tn}function Cc(){if(bo)return Ut;bo=!0;var s=Lt;function l(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,r=["<",">",'"',"`"," ","\r",`
`,"	"],t=["{","}","|","\\","^","`"].concat(r),n=["'"].concat(t),e=["%","/","?",";","#"].concat(n),i=["/","?","#"],c=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=Pc();function A(v,R,P){if(v&&typeof v=="object"&&v instanceof l)return v;var I=new l;return I.parse(v,R,P),I}l.prototype.parse=function(v,R,P){if(typeof v!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof v);var I=v.indexOf("?"),O=I!==-1&&I<v.indexOf("#")?"?":"#",T=v.split(O),F=/\\/g;T[0]=T[0].replace(F,"/"),v=T.join(O);var x=v;if(x=x.trim(),!P&&v.split("#").length===1){var q=f.exec(x);if(q)return this.path=x,this.href=x,this.pathname=q[1],q[2]?(this.search=q[2],R?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):R&&(this.search="",this.query={}),this}var H=o.exec(x);if(H){H=H[0];var U=H.toLowerCase();this.protocol=U,x=x.substr(H.length)}if(P||H||x.match(/^\/\/[^@/]+@[^@/]+/)){var ae=x.substr(0,2)==="//";ae&&!(H&&b[H])&&(x=x.substr(2),this.slashes=!0)}if(!b[H]&&(ae||H&&!E[H])){for(var te=-1,Z=0;Z<i.length;Z++){var le=x.indexOf(i[Z]);le!==-1&&(te===-1||le<te)&&(te=le)}var K,ie;te===-1?ie=x.lastIndexOf("@"):ie=x.lastIndexOf("@",te),ie!==-1&&(K=x.slice(0,ie),x=x.slice(ie+1),this.auth=decodeURIComponent(K)),te=-1;for(var Z=0;Z<e.length;Z++){var le=x.indexOf(e[Z]);le!==-1&&(te===-1||le<te)&&(te=le)}te===-1&&(te=x.length),this.host=x.slice(0,te),x=x.slice(te),this.parseHost(),this.hostname=this.hostname||"";var M=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!M)for(var G=this.hostname.split(/\./),Z=0,fe=G.length;Z<fe;Z++){var $=G[Z];if($&&!$.match(d)){for(var _e="",X=0,D=$.length;X<D;X++)$.charCodeAt(X)>127?_e+="x":_e+=$[X];if(!_e.match(d)){var se=G.slice(0,Z),V=G.slice(Z+1),ee=$.match(p);ee&&(se.push(ee[1]),V.unshift(ee[2])),V.length&&(x="/"+V.join(".")+x),this.hostname=se.join(".");break}}}this.hostname.length>c?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=s.toASCII(this.hostname));var re=this.port?":"+this.port:"",me=this.hostname||"";this.host=me+re,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),x[0]!=="/"&&(x="/"+x))}if(!m[U])for(var Z=0,fe=n.length;Z<fe;Z++){var ue=n[Z];if(x.indexOf(ue)!==-1){var B=encodeURIComponent(ue);B===ue&&(B=escape(ue)),x=x.split(ue).join(B)}}var Q=x.indexOf("#");Q!==-1&&(this.hash=x.substr(Q),x=x.slice(0,Q));var oe=x.indexOf("?");if(oe!==-1?(this.search=x.substr(oe),this.query=x.substr(oe+1),R&&(this.query=w.parse(this.query)),x=x.slice(0,oe)):R&&(this.search="",this.query={}),x&&(this.pathname=x),E[U]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var re=this.pathname||"",ye=this.search||"";this.path=re+ye}return this.href=this.format(),this};function g(v){return typeof v=="string"&&(v=A(v)),v instanceof l?v.format():l.prototype.format.call(v)}l.prototype.format=function(){var v=this.auth||"";v&&(v=encodeURIComponent(v),v=v.replace(/%3A/i,":"),v+="@");var R=this.protocol||"",P=this.pathname||"",I=this.hash||"",O=!1,T="";this.host?O=v+this.host:this.hostname&&(O=v+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(O+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(T=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var F=this.search||T&&"?"+T||"";return R&&R.substr(-1)!==":"&&(R+=":"),this.slashes||(!R||E[R])&&O!==!1?(O="//"+(O||""),P&&P.charAt(0)!=="/"&&(P="/"+P)):O||(O=""),I&&I.charAt(0)!=="#"&&(I="#"+I),F&&F.charAt(0)!=="?"&&(F="?"+F),P=P.replace(/[?#]/g,function(x){return encodeURIComponent(x)}),F=F.replace("#","%23"),R+O+P+F+I};function _(v,R){return A(v,!1,!0).resolve(R)}l.prototype.resolve=function(v){return this.resolveObject(A(v,!1,!0)).format()};function S(v,R){return v?A(v,!1,!0).resolveObject(R):R}return l.prototype.resolveObject=function(v){if(typeof v=="string"){var R=new l;R.parse(v,!1,!0),v=R}for(var P=new l,I=Object.keys(this),O=0;O<I.length;O++){var T=I[O];P[T]=this[T]}if(P.hash=v.hash,v.href==="")return P.href=P.format(),P;if(v.slashes&&!v.protocol){for(var F=Object.keys(v),x=0;x<F.length;x++){var q=F[x];q!=="protocol"&&(P[q]=v[q])}return E[P.protocol]&&P.hostname&&!P.pathname&&(P.pathname="/",P.path=P.pathname),P.href=P.format(),P}if(v.protocol&&v.protocol!==P.protocol){if(!E[v.protocol]){for(var H=Object.keys(v),U=0;U<H.length;U++){var ae=H[U];P[ae]=v[ae]}return P.href=P.format(),P}if(P.protocol=v.protocol,!v.host&&!b[v.protocol]){for(var fe=(v.pathname||"").split("/");fe.length&&!(v.host=fe.shift()););v.host||(v.host=""),v.hostname||(v.hostname=""),fe[0]!==""&&fe.unshift(""),fe.length<2&&fe.unshift(""),P.pathname=fe.join("/")}else P.pathname=v.pathname;if(P.search=v.search,P.query=v.query,P.host=v.host||"",P.auth=v.auth,P.hostname=v.hostname||v.host,P.port=v.port,P.pathname||P.search){var te=P.pathname||"",Z=P.search||"";P.path=te+Z}return P.slashes=P.slashes||v.slashes,P.href=P.format(),P}var le=P.pathname&&P.pathname.charAt(0)==="/",K=v.host||v.pathname&&v.pathname.charAt(0)==="/",ie=K||le||P.host&&v.pathname,M=ie,G=P.pathname&&P.pathname.split("/")||[],fe=v.pathname&&v.pathname.split("/")||[],$=P.protocol&&!E[P.protocol];if($&&(P.hostname="",P.port=null,P.host&&(G[0]===""?G[0]=P.host:G.unshift(P.host)),P.host="",v.protocol&&(v.hostname=null,v.port=null,v.host&&(fe[0]===""?fe[0]=v.host:fe.unshift(v.host)),v.host=null),ie=ie&&(fe[0]===""||G[0]==="")),K)P.host=v.host||v.host===""?v.host:P.host,P.hostname=v.hostname||v.hostname===""?v.hostname:P.hostname,P.search=v.search,P.query=v.query,G=fe;else if(fe.length)G||(G=[]),G.pop(),G=G.concat(fe),P.search=v.search,P.query=v.query;else if(v.search!=null){if($){P.host=G.shift(),P.hostname=P.host;var _e=P.host&&P.host.indexOf("@")>0?P.host.split("@"):!1;_e&&(P.auth=_e.shift(),P.hostname=_e.shift(),P.host=P.hostname)}return P.search=v.search,P.query=v.query,(P.pathname!==null||P.search!==null)&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.href=P.format(),P}if(!G.length)return P.pathname=null,P.search?P.path="/"+P.search:P.path=null,P.href=P.format(),P;for(var X=G.slice(-1)[0],D=(P.host||v.host||G.length>1)&&(X==="."||X==="..")||X==="",se=0,V=G.length;V>=0;V--)X=G[V],X==="."?G.splice(V,1):X===".."?(G.splice(V,1),se++):se&&(G.splice(V,1),se--);if(!ie&&!M)for(;se--;se)G.unshift("..");ie&&G[0]!==""&&(!G[0]||G[0].charAt(0)!=="/")&&G.unshift(""),D&&G.join("/").substr(-1)!=="/"&&G.push("");var ee=G[0]===""||G[0]&&G[0].charAt(0)==="/";if($){P.hostname=ee?"":G.length?G.shift():"",P.host=P.hostname;var _e=P.host&&P.host.indexOf("@")>0?P.host.split("@"):!1;_e&&(P.auth=_e.shift(),P.hostname=_e.shift(),P.host=P.hostname)}return ie=ie||P.host&&G.length,ie&&!ee&&G.unshift(""),G.length>0?P.pathname=G.join("/"):(P.pathname=null,P.path=null),(P.pathname!==null||P.search!==null)&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.auth=v.auth||P.auth,P.slashes=P.slashes||v.slashes,P.href=P.format(),P},l.prototype.parseHost=function(){var v=this.host,R=a.exec(v);R&&(R=R[0],R!==":"&&(this.port=R.substr(1)),v=v.substr(0,v.length-R.length)),v&&(this.hostname=v)},Ut.parse=A,Ut.resolve=_,Ut.resolveObject=S,Ut.format=g,Ut.Url=l,Ut}function el(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return sn?Rc(s):Mc(s)}function Rc(s){let l=s.hostname,o=s.pathname;for(let a=0;a<o.length;a++)if(o[a]==="%"){let f=o.codePointAt(a+2)||32;if(o[a+1]==="2"&&f===102||o[a+1]==="5"&&f===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(pl,"\\"),o=decodeURIComponent(o),l!=="")return`\\\\${l}${o}`;{let a=o.codePointAt(1)|32,f=o[2];if(a<fl||a>hl||f!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Mc(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let l=s.pathname;for(let o=0;o<l.length;o++)if(l[o]==="%"){let a=l.codePointAt(o+2)||32;if(l[o+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(l)}function tl(s){let l=uo.resolve(s),o=s.charCodeAt(s.length-1);(o===cl||sn&&o===ul)&&l[l.length-1]!==uo.sep&&(l+="/");let a=new URL("file://");return l.includes("%")&&(l=l.replace(dl,"%25")),!sn&&l.includes("\\")&&(l=l.replace(gl,"%5C")),l.includes(`
`)&&(l=l.replace(yl,"%0A")),l.includes("\r")&&(l=l.replace(ml,"%0D")),l.includes("	")&&(l=l.replace(bl,"%09")),a.pathname=l,a}var rl,Gr,co,Qr,Yr,fo,Jr,ho,Xr,po,Zr,go,en,yo,tn,mo,Ut,bo,st,Ws,nl,il,ol,sl,al,ll,ul,cl,fl,hl,sn,pl,dl,gl,yl,ml,bl,jc=ft(()=>{he(),de(),pe(),Ju(),pc(),Ic(),Ja(),rl=Object.freeze(Object.create(null)),Gr={},co=!1,Qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:Pl,Yr={},fo=!1,Jr={},ho=!1,Xr={},po=!1,Zr={},go=!1,en={},yo=!1,tn={},mo=!1,Ut={},bo=!1,st=Cc(),st.parse,st.resolve,st.resolveObject,st.format,st.Url,Ws=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,st.URL=typeof URL<"u"?URL:null,st.pathToFileURL=tl,st.fileURLToPath=el,nl=st.Url,il=st.format,ol=st.resolve,sl=st.resolveObject,al=st.parse,ll=st.URL,ul=92,cl=47,fl=97,hl=122,sn=Ws==="win32",pl=/\//g,dl=/%/g,gl=/\\/g,yl=/\n/g,ml=/\r/g,bl=/\t/g}),Bc=be((s,l)=>{he(),de(),pe(),l.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Co=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0}),s.BufferedDuplex=void 0,s.writev=a;var l=Zt(),o=(tt(),qe(et));function a(r,t){let n=new Array(r.length);for(let e=0;e<r.length;e++)typeof r[e].chunk=="string"?n[e]=o.Buffer.from(r[e].chunk,"utf8"):n[e]=r[e].chunk;this._write(o.Buffer.concat(n),"binary",t)}var f=class extends l.Duplex{constructor(t,n,e){super({objectMode:!0});Ie(this,"socket");Ie(this,"proxy");Ie(this,"isSocketOpen");Ie(this,"writeQueue");this.proxy=n,this.socket=e,this.writeQueue=[],t.objectMode||(this._writev=a.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",i=>{!this.destroyed&&this.readable&&this.push(i)})}_read(t){this.proxy.read(t)}_write(t,n,e){this.isSocketOpen?this.writeToProxy(t,n,e):this.writeQueue.push({chunk:t,encoding:n,cb:e})}_final(t){this.writeQueue=[],this.proxy.end(t)}_destroy(t,n){this.writeQueue=[],this.proxy.destroy(),n(t)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(t,n,e){this.proxy.write(t,n)===!1?this.proxy.once("drain",e):e()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:t,encoding:n,cb:e}=this.writeQueue.shift();this.writeToProxy(t,n,e)}}};s.BufferedDuplex=f}),Tr=be(s=>{he(),de(),pe();var l=s&&s.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(s,"__esModule",{value:!0}),s.streamBuilder=s.browserStreamBuilder=void 0;var o=(tt(),qe(et)),a=l(Bc()),f=l(Tt()),r=Zt(),t=l(pn()),n=Co(),e=(0,f.default)("mqttjs:ws"),i=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(A,g){let _=`${A.protocol}://${A.hostname}:${A.port}${A.path}`;return typeof A.transformWsUrl=="function"&&(_=A.transformWsUrl(_,A,g)),_}function d(A){let g=A;return A.port||(A.protocol==="wss"?g.port=443:g.port=80),A.path||(g.path="/"),A.wsOptions||(g.wsOptions={}),!t.default&&!A.forceNativeWebSocket&&A.protocol==="wss"&&i.forEach(_=>{Object.prototype.hasOwnProperty.call(A,_)&&!Object.prototype.hasOwnProperty.call(A.wsOptions,_)&&(g.wsOptions[_]=A[_])}),g}function p(A){let g=d(A);if(g.hostname||(g.hostname=g.host),!g.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);g.hostname=_.hostname,g.port||(g.port=Number(_.port))}return g.objectMode===void 0&&(g.objectMode=!(g.binary===!0||g.binary===void 0)),g}function m(A,g,_){e("createWebSocket"),e(`protocol: ${_.protocolId} ${_.protocolVersion}`);let S=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";e(`creating new Websocket for url: ${g} and protocol: ${S}`);let v;return _.createWebsocket?v=_.createWebsocket(g,[S],_):v=new a.default(g,[S],_.wsOptions),v}function b(A,g){let _=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt",S=c(g,A),v;return g.createWebsocket?v=g.createWebsocket(S,[_],g):v=new WebSocket(S,[_]),v.binaryType="arraybuffer",v}var E=(A,g)=>{e("streamBuilder");let _=d(g);_.hostname=_.hostname||_.host||"localhost";let S=c(_,A),v=m(A,S,_),R=a.default.createWebSocketStream(v,_.wsOptions);return R.url=S,v.on("close",()=>{R.destroy()}),R};s.streamBuilder=E;var w=(A,g)=>{e("browserStreamBuilder");let _,S=p(g).browserBufferSize||1024*512,v=g.browserBufferTimeout||1e3,R=!g.objectMode,P=b(A,g),I=T(g,U,ae);g.objectMode||(I._writev=n.writev.bind(I)),I.on("close",()=>{P.close()});let O=typeof P.addEventListener<"u";P.readyState===P.OPEN?(_=I,_.socket=P):(_=new n.BufferedDuplex(g,I,P),O?P.addEventListener("open",F):P.onopen=F),O?(P.addEventListener("close",x),P.addEventListener("error",q),P.addEventListener("message",H)):(P.onclose=x,P.onerror=q,P.onmessage=H);function T(te,Z,le){let K=new r.Transform({objectMode:te.objectMode});return K._write=Z,K._flush=le,K}function F(){e("WebSocket onOpen"),_ instanceof n.BufferedDuplex&&_.socketReady()}function x(te){e("WebSocket onClose",te),_.end(),_.destroy()}function q(te){e("WebSocket onError",te);let Z=new Error("WebSocket error");Z.event=te,_.destroy(Z)}async function H(te){if(!I||!I.readable||!I.writable)return;let{data:Z}=te;Z instanceof ArrayBuffer?Z=o.Buffer.from(Z):Z instanceof Blob?Z=o.Buffer.from(await new Response(Z).arrayBuffer()):Z=o.Buffer.from(Z,"utf8"),I.push(Z)}function U(te,Z,le){if(P.bufferedAmount>S){setTimeout(U,v,te,Z,le);return}R&&typeof te=="string"&&(te=o.Buffer.from(te,"utf8"));try{P.send(te)}catch(K){return le(K)}le()}function ae(te){P.close(),te()}return _};s.browserStreamBuilder=w}),Ro={};ir(Ro,{Server:()=>He,Socket:()=>He,Stream:()=>He,_createServerHandle:()=>He,_normalizeArgs:()=>He,_setSimultaneousAccepts:()=>He,connect:()=>He,createConnection:()=>He,createServer:()=>He,default:()=>vl,isIP:()=>He,isIPv4:()=>He,isIPv6:()=>He});function He(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var vl,wl=ft(()=>{he(),de(),pe(),vl={_createServerHandle:He,_normalizeArgs:He,_setSimultaneousAccepts:He,connect:He,createConnection:He,createServer:He,isIP:He,isIPv4:He,isIPv6:He,Server:He,Socket:He,Stream:He}}),_l=be((s,l)=>{he(),de(),pe(),l.exports={}}),qs=be(s=>{he(),de(),pe();var l=s&&s.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(s,"__esModule",{value:!0});var o=l((wl(),qe(Ro))),a=l(Tt()),f=l(_l()),r=(0,a.default)("mqttjs:tcp"),t=(n,e)=>{if(e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",e.socksProxy)return(0,f.default)(e.hostname,e.port,e.socksProxy,{timeout:e.socksTimeout});let{port:i,path:c}=e,d=e.hostname;return r("port %d and host %s",i,d),o.default.createConnection({port:i,host:d,path:c})};s.default=t}),El={};ir(El,{default:()=>Sl});var Sl,Nc=ft(()=>{he(),de(),pe(),Sl={}}),$s=be(s=>{he(),de(),pe();var l=s&&s.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(s,"__esModule",{value:!0});var o=(Nc(),qe(El)),a=l((wl(),qe(Ro))),f=l(Tt()),r=l(_l()),t=(0,f.default)("mqttjs:tls");function n(i){let{host:c,port:d,socksProxy:p,...m}=i;if(p!==void 0){let b=(0,r.default)(c,d,p,{timeout:i.socksTimeout});return(0,o.connect)({...m,socket:b})}return(0,o.connect)(i)}var e=(i,c)=>{c.port=c.port||8883,c.host=c.hostname||c.host||"localhost",a.default.isIP(c.host)===0&&(c.servername=c.host),c.rejectUnauthorized=c.rejectUnauthorized!==!1,delete c.path,t("port %d host %s rejectUnauthorized %b",c.port,c.host,c.rejectUnauthorized);let d=n(c);d.on("secureConnect",()=>{c.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",p)});function p(m){c.rejectUnauthorized&&i.emit("error",m),d.end()}return d.on("error",p),d};s.default=e}),zs=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=(tt(),qe(et)),o=Zt(),a=Co(),f,r,t;function n(){let p=new o.Transform;return p._write=(m,b,E)=>{f.send({data:m.buffer,success(){E()},fail(w){E(new Error(w))}})},p._flush=m=>{f.close({success(){m()}})},p}function e(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function i(p,m){let b=p.protocol==="wxs"?"wss":"ws",E=`${b}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(E=`${b}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(E=p.transformWsUrl(E,p,m)),E}function c(){f.onOpen(()=>{t.socketReady()}),f.onMessage(p=>{let{data:m}=p;m instanceof ArrayBuffer?m=l.Buffer.from(m):m=l.Buffer.from(m,"utf8"),r.push(m)}),f.onClose(()=>{t.emit("close"),t.end(),t.destroy()}),f.onError(p=>{let m=new Error(p.errMsg);t.destroy(m)})}var d=(p,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let b=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";e(m);let E=i(m,p);f=wx.connectSocket({url:E,protocols:[b]}),r=n(),t=new a.BufferedDuplex(m,r,f),t._destroy=(A,g)=>{f.close({success(){g&&g(A)}})};let w=t.destroy;return t.destroy=(A,g)=>(t.destroy=w,setTimeout(()=>{f.close({fail(){t._destroy(A,g)}})},0),t),c(),t};s.default=d}),Hs=be(s=>{he(),de(),pe(),Object.defineProperty(s,"__esModule",{value:!0});var l=(tt(),qe(et)),o=Zt(),a=Co(),f,r,t,n=!1;function e(){let m=new o.Transform;return m._write=(b,E,w)=>{f.sendSocketMessage({data:b.buffer,success(){w()},fail(){w(new Error)}})},m._flush=b=>{f.closeSocket({success(){b()}})},m}function i(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function c(m,b){let E=m.protocol==="alis"?"wss":"ws",w=`${E}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(w=`${E}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(w=m.transformWsUrl(w,m,b)),w}function d(){n||(n=!0,f.onSocketOpen(()=>{t.socketReady()}),f.onSocketMessage(m=>{if(typeof m.data=="string"){let b=l.Buffer.from(m.data,"base64");r.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{if(b.result instanceof ArrayBuffer){r.push(l.Buffer.from(b.result));return}r.push(l.Buffer.from(b.result,"utf-8"))}),b.readAsArrayBuffer(m.data)}}),f.onSocketClose(()=>{t.end(),t.destroy()}),f.onSocketError(m=>{t.destroy(m)}))}var p=(m,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let E=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";i(b);let w=c(b,m);return f=b.my,f.connectSocket({url:w,protocols:E}),r=e(),t=new a.BufferedDuplex(b,r,f),d(),t};s.default=p}),Lc=be(s=>{he(),de(),pe();var l=s&&s.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0}),s.connectAsync=c;var o=l(Tt()),a=l((jc(),qe(Xa))),f=l(Ci()),r=l(pn());typeof(Fe==null?void 0:Fe.nextTick)!="function"&&(Fe.nextTick=setImmediate);var t=(0,o.default)("mqttjs"),n=null;function e(d){let p;if(d.auth)if(p=d.auth.match(/^(.+):(.+)$/),p){let[,m,b]=p;d.username=m,d.password=b}else d.username=d.auth}function i(d,p){var E,w,A;if(t("connecting to an MQTT broker..."),typeof d=="object"&&!p&&(p=d,d=""),p=p||{},d&&typeof d=="string"){let g=a.default.parse(d,!0),_={};if(g.port!=null&&(_.port=Number(g.port)),_.host=g.hostname,_.query=g.query,_.auth=g.auth,_.protocol=g.protocol,_.path=g.path,p={..._,...p},!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||((E=p.protocol)==null?void 0:E.includes("+unix")),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!((w=p.protocol)!=null&&w.startsWith("ws"))&&!((A=p.protocol)!=null&&A.startsWith("wx"))&&delete p.path,e(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),r.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Fe<"u"&&(p.socksProxy=Fe.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(n||(n={},!r.default&&!p.forceNativeWebSocket?(n.ws=Tr().streamBuilder,n.wss=Tr().streamBuilder,n.mqtt=qs().default,n.tcp=qs().default,n.ssl=$s().default,n.tls=n.ssl,n.mqtts=$s().default):(n.ws=Tr().browserStreamBuilder,n.wss=Tr().browserStreamBuilder,n.wx=zs().default,n.wxs=zs().default,n.ali=Hs().default,n.alis=Hs().default)),!n[p.protocol]){let g=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((_,S)=>g&&S%2===0?!1:typeof n[_]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function m(g){return p.servers&&((!g._reconnectCount||g._reconnectCount===p.servers.length)&&(g._reconnectCount=0),p.host=p.servers[g._reconnectCount].host,p.port=p.servers[g._reconnectCount].port,p.protocol=p.servers[g._reconnectCount].protocol?p.servers[g._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,g._reconnectCount++),t("calling streambuilder for",p.protocol),n[p.protocol](g,p)}let b=new f.default(m,p);return b.on("error",()=>{}),b}function c(d,p,m=!0){return new Promise((b,E)=>{let w=i(d,p),A={connect:_=>{g(),b(w)},end:()=>{g(),b(w)},error:_=>{g(),w.end(),E(_)}};m===!1&&(A.close=()=>{A.error(new Error("Couldn't connect to server"))});function g(){Object.keys(A).forEach(_=>{w.off(_,A[_])})}Object.keys(A).forEach(_=>{w.on(_,A[_])})})}s.default=i}),Ks=be(s=>{he(),de(),pe();var l=s&&s.__createBinding||(Object.create?function(m,b,E,w){w===void 0&&(w=E);var A=Object.getOwnPropertyDescriptor(b,E);(!A||("get"in A?!b.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return b[E]}}),Object.defineProperty(m,w,A)}:function(m,b,E,w){w===void 0&&(w=E),m[w]=b[E]}),o=s&&s.__setModuleDefault||(Object.create?function(m,b){Object.defineProperty(m,"default",{enumerable:!0,value:b})}:function(m,b){m.default=b}),a=s&&s.__importStar||function(){var m=function(b){return m=Object.getOwnPropertyNames||function(E){var w=[];for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(w[w.length]=A);return w},m(b)};return function(b){if(b&&b.__esModule)return b;var E={};if(b!=null)for(var w=m(b),A=0;A<w.length;A++)w[A]!=="default"&&l(E,b,w[A]);return o(E,b),E}}(),f=s&&s.__exportStar||function(m,b){for(var E in m)E!=="default"&&!Object.prototype.hasOwnProperty.call(b,E)&&l(b,m,E)},r=s&&s.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=s.KeepaliveManager=s.UniqueMessageIdProvider=s.DefaultMessageIdProvider=s.Store=s.MqttClient=s.connectAsync=s.connect=s.Client=void 0;var t=r(Ci());s.MqttClient=t.default;var n=r(Da());s.DefaultMessageIdProvider=n.default;var e=r(Qu());s.UniqueMessageIdProvider=e.default;var i=r(Ea());s.Store=i.default;var c=a(Lc());s.connect=c.default,Object.defineProperty(s,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var d=r(Ka());s.KeepaliveManager=d.default,s.Client=t.default,f(Ci(),s),f(sr(),s);var p=fn();Object.defineProperty(s,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),Uc=be(s=>{he(),de(),pe();var l=s&&s.__createBinding||(Object.create?function(t,n,e,i){i===void 0&&(i=e);var c=Object.getOwnPropertyDescriptor(n,e);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(t,i,c)}:function(t,n,e,i){i===void 0&&(i=e),t[i]=n[e]}),o=s&&s.__setModuleDefault||(Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n}),a=s&&s.__importStar||function(){var t=function(n){return t=Object.getOwnPropertyNames||function(e){var i=[];for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(i[i.length]=c);return i},t(n)};return function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var i=t(n),c=0;c<i.length;c++)i[c]!=="default"&&l(e,n,i[c]);return o(e,n),e}}(),f=s&&s.__exportStar||function(t,n){for(var e in t)e!=="default"&&!Object.prototype.hasOwnProperty.call(n,e)&&l(n,t,e)};Object.defineProperty(s,"__esModule",{value:!0});var r=a(Ks());s.default=r,f(Ks(),s)});const Dc=Uc();/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@babel/runtime/helpers/regenerator.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/const Ze={Connecting:"connecting",Connected:"connected",Disconnected:"disconnected"},rt={url:"ws:url",idleSeconds:"ws:idleSeconds",history:"ws:history",historySize:"ws:historySize",theme:"ws:theme",connConfig:"ws:connConfig"},Ne={urlInput:document.getElementById("urlInput"),idleInput:document.getElementById("idleInput"),historySizeInput:document.getElementById("historySizeInput"),connectBtn:document.getElementById("connectBtn"),clearBtn:document.getElementById("clearBtn"),scrollLockBtn:document.getElementById("scrollLockBtn"),themeBtn:document.getElementById("themeBtn"),logContainer:document.getElementById("logContainer"),messageInput:document.getElementById("messageInput"),sendBtn:document.getElementById("sendBtn"),historyChips:document.getElementById("historyChips"),statusDot:document.getElementById("statusDot")},Ce={panel:document.getElementById("settingsPanel"),toggleBtn:document.getElementById("settingsToggleBtn"),closeBtn:document.getElementById("closeSettingsBtn"),mode:document.getElementById("cfgMode"),clientId:document.getElementById("cfgClientId"),protocol:document.getElementById("cfgProtocol"),host:document.getElementById("cfgHost"),port:document.getElementById("cfgPort"),path:document.getElementById("cfgPath"),topic:document.getElementById("cfgTopic"),ssl:document.getElementById("cfgSsl"),username:document.getElementById("cfgUsername"),password:document.getElementById("cfgPassword"),pubTopic:document.getElementById("cfgPubTopic"),autoReconnect:document.getElementById("cfgAutoReconnect"),preview:document.getElementById("cfgPreview"),applyBtn:document.getElementById("applyConfigBtn")};let ut=null,nt=null,Qt="mqtt",Vt=Ze.Disconnected,an=[],rn=!1,Yt=[],It=5,nr=0,Al=Date.now(),nn=null,vr="light",wr=!1;const Il=()=>{if(!nt)return;const s=nt;nt=null,wr=!1;try{s.options&&(s.options.reconnectPeriod=0),s.reconnecting=!1,s._reconnectTimer&&(clearTimeout(s._reconnectTimer),s._reconnectTimer=null),s._connectedTimer&&(clearTimeout(s._connectedTimer),s._connectedTimer=null),s._pingTimer&&(clearInterval(s._pingTimer),s._pingTimer=null),s.removeAllListeners(),s.end(!0,{},()=>{})}catch{}},Fc=(s=new Date)=>`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}:${s.getSeconds().toString().padStart(2,"0")}`,Wc=s=>{if(typeof s!="string")return!1;try{const l=JSON.parse(s);return typeof l=="object"||Array.isArray(l)}catch{return!1}},qc=s=>{if(Wc(s))try{return JSON.stringify(JSON.parse(s),null,2)}catch{return s}return s},Gt=async()=>{await chrome.storage.local.set({[rt.url]:Ne.urlInput.value.trim(),[rt.idleSeconds]:nr,[rt.history]:Yt.slice(0,It),[rt.historySize]:It,[rt.theme]:vr})},kr=async()=>{await chrome.storage.local.set({[rt.connConfig]:{mode:Ce.mode.value,clientId:Ce.clientId.value.trim(),protocol:Ce.ssl.checked?"wss":Ce.protocol.value||"ws",host:Ce.host.value.trim()||"192.168.10.190",port:Ce.port.value.trim()||"8884",path:Ce.path.value.trim()||"/mqtt",topic:Ce.topic.value.trim(),pubTopic:Ce.pubTopic.value.trim(),ssl:Ce.ssl.checked,username:Ce.username.value.trim(),password:Ce.password.value,autoReconnect:Ce.autoReconnect.checked}})},$c=async()=>{const s=await chrome.storage.local.get(Object.values(rt));Ne.urlInput.value=s[rt.url]||"",nr=Number.isFinite(s[rt.idleSeconds])?s[rt.idleSeconds]:0,It=Number.isFinite(s[rt.historySize])?s[rt.historySize]:5,Yt=Array.isArray(s[rt.history])?s[rt.history]:[],vr=s[rt.theme]||"light",Ne.idleInput.value=nr,Ne.historySizeInput.value=It,Tl(vr),jo()},zc=async()=>{const l=(await chrome.storage.local.get(rt.connConfig))[rt.connConfig]||{};Ce.mode.value=l.mode||"mqtt",Ce.clientId.value=l.clientId||"",Ce.protocol.value=l.protocol||"ws",Ce.host.value=l.host||"192.168.10.190",Ce.port.value=l.port||"8884",Ce.path.value=l.path||"/mqtt",Ce.topic.value=l.topic||"",Ce.pubTopic.value=l.pubTopic||"",Ce.ssl.checked=l.ssl||!1,Ce.username.value=l.username||"sinoval",Ce.password.value=l.password||"",Ce.autoReconnect.checked=l.autoReconnect||!1,Qt=Ce.mode.value,gr()},At=s=>{Vt=s,Ne.statusDot.dataset.status=s===Ze.Connecting?"connecting":s===Ze.Connected?"connected":"disconnected",Ne.statusDot.title=s.charAt(0).toUpperCase()+s.slice(1),Vt===Ze.Connected?(Ne.connectBtn.innerHTML='<span class="btn-text"></span><i class="fa-solid fa-plug-circle-xmark"></i>',Ne.connectBtn.classList.replace("btn-primary","btn-danger"),Ne.connectBtn.style.backgroundColor="var(--status-disconnected)",Ne.connectBtn.style.color="white"):Vt===Ze.Connecting?(Ne.connectBtn.innerHTML='<span class="btn-text">...</span><i class="fa-solid fa-spinner fa-spin"></i>',Ne.connectBtn.style.backgroundColor="var(--status-connecting)"):(Ne.connectBtn.innerHTML='<span class="btn-text"></span><i class="fa-solid fa-plug"></i>',Ne.connectBtn.style.backgroundColor="",Ne.connectBtn.style.color="")},Mo=()=>{const s=Ce.ssl.checked?"wss":Ce.protocol.value||"ws",l=Ce.host.value.trim(),o=Ce.port.value.trim();let a=Ce.path.value.trim();a&&!a.startsWith("/")&&(a=`/${a}`);const f=Ce.topic.value.trim(),r=`${s}://${l}${o?`:${o}`:""}${a||""}`;return Qt==="ws"&&f?`${r}?${f}`:r},gr=()=>{Ce.preview.textContent=Mo()},Ve=(s,l)=>{const o={kind:s,message:qc(l),time:Fc()};an.push(o),xl()},xl=()=>{Ne.logContainer.innerHTML="";const s=document.createDocumentFragment();an.forEach(l=>{const o=document.createElement("div");o.className=`log-row ${l.kind}`;const a=document.createElement("div");a.className="log-bubble",a.textContent=l.message,document.createElement("div").appendChild(a);const r=document.createElement("div");if(r.style.display="flex",r.style.flexDirection="column",r.style.alignItems=l.kind==="tx"?"flex-end":l.kind==="sys"?"center":"flex-start",r.style.maxWidth="100%",r.appendChild(a),l.kind!=="sys"){const t=document.createElement("div");t.className="timestamp",t.textContent=l.time,r.appendChild(t)}o.appendChild(r),s.appendChild(o)}),an.length===0?Ne.logContainer.innerHTML=`
      <div class="empty-state">
          <i class="fa-solid fa-satellite-dish"></i>
          <p></p>
      </div>`:Ne.logContainer.appendChild(s),rn||(Ne.logContainer.scrollTop=Ne.logContainer.scrollHeight)},jo=()=>{Ne.historyChips.innerHTML="";const s=document.createDocumentFragment();Yt.slice(0,It).forEach(l=>{const o=document.createElement("button");o.className="chip",o.textContent=l,o.addEventListener("click",()=>{Ne.messageInput.value=l,Ne.messageInput.focus()}),s.appendChild(o)}),Ne.historyChips.appendChild(s)},_r=()=>{Al=Date.now()},Bo=()=>{No(),nn=setInterval(()=>{if(!nr||Vt!==Ze.Connected||!ut)return;Date.now()-Al>nr*1e3&&(ut&&ut.close(),Ve("sys",""))},1e3)},No=()=>{nn&&(clearInterval(nn),nn=null)},Hc=()=>{const s=Ne.urlInput.value.trim(),l=Mo(),o=s||l;if(!o){Ve("sys"," WebSocket URL");return}if(Vt===Ze.Connected||Vt===Ze.Connecting){Kc();return}if(At(Ze.Connecting),_r(),Qt==="mqtt"){Yc(o);return}try{ut=new WebSocket(o)}catch(a){At(Ze.Disconnected),Ve("sys",` URL: ${a.message}`);return}ut.onopen=()=>{At(Ze.Connected),Ve("sys",""),Gt(),Bo()},ut.onmessage=a=>{_r(),Ve("rx",typeof a.data=="string"?a.data:"[binary]")},ut.onerror=()=>{Ve("sys","")},ut.onclose=()=>{At(Ze.Disconnected),ut=null,Ve("sys",""),No()}},Kc=()=>{Qt==="mqtt"&&Il(),ut&&(ut.close(),ut=null),At(Ze.Disconnected)},Vs=()=>{const s=Ne.messageInput.value;if(s){if(Qt==="mqtt"){if(!nt||!wr){Ve("sys","MQTT ");return}const l=Ce.pubTopic.value.trim()||Ce.topic.value.trim();if(!l){Ve("sys","");return}nt.publish(l,s),_r(),Ve("tx",`[MQTT PUBLISH] ${l}
${s}`)}else{if(Vt!==Ze.Connected||!ut){Ve("sys","");return}ut.send(s),_r(),Ve("tx",s)}Yt=[s,...Yt.filter(l=>l!==s)].slice(0,It),jo(),Gt(),Ne.messageInput.value=""}},Vc=()=>{rn=!rn,Ne.scrollLockBtn.innerHTML=rn?'<i class="fa-solid fa-lock"></i>':'<i class="fa-solid fa-lock-open"></i>'},Tl=s=>{document.documentElement.setAttribute("data-theme",s),vr=s,s==="dark"?Ne.themeBtn.innerHTML='<i class="fa-solid fa-sun"></i>':Ne.themeBtn.innerHTML='<i class="fa-solid fa-moon"></i>'},Gc=()=>{Tl(vr==="dark"?"light":"dark"),Gt()},Qc=()=>{Ne.connectBtn.addEventListener("click",Hc),Ne.clearBtn.addEventListener("click",()=>{an=[],xl()}),Ne.scrollLockBtn.addEventListener("click",Vc),Ne.themeBtn.addEventListener("click",Gc),Ne.sendBtn.addEventListener("click",Vs),Ne.messageInput.addEventListener("keydown",s=>{s.key==="Enter"&&s.ctrlKey&&(s.preventDefault(),Vs())}),Ne.idleInput.addEventListener("change",s=>{const l=parseInt(s.target.value,10);nr=Number.isFinite(l)&&l>=0?l:0,Gt(),Bo()}),Ne.historySizeInput.addEventListener("change",s=>{const l=parseInt(s.target.value,10);It=Number.isFinite(l)&&l>0?Math.min(l,50):5,Ne.historySizeInput.value=It,Yt=Yt.slice(0,It),jo(),Gt()}),Ce.toggleBtn.addEventListener("click",()=>{Ce.panel.classList.add("open")}),Ce.closeBtn.addEventListener("click",()=>{Ce.panel.classList.remove("open")}),["protocol","host","port","path","ssl","username","password","pubTopic","autoReconnect"].forEach(s=>{const l=Ce[s];l&&l.addEventListener(s==="ssl"||s==="autoReconnect"?"change":"input",()=>{s==="ssl"&&Ce.ssl.checked&&(Ce.protocol.value="wss"),gr(),kr()})}),Ce.topic.addEventListener("input",()=>{gr(),kr()}),Ce.topic.addEventListener("change",()=>{const s=Ce.topic.value.trim();Qt==="mqtt"&&wr&&nt&&(St&&St!==s&&(nt.unsubscribe(St,l=>{l||Ve("sys",`: ${St}`)}),St=""),s&&nt.subscribe(s,{qos:0},l=>{l?Ve("sys",`: ${l.message}`):(Ve("sys",`: ${s}`),St=s)}))}),Ce.applyBtn.addEventListener("click",()=>{const s=Mo();Ne.urlInput.value=s,gr(),kr(),Gt(),Ve("sys",`URL : ${s}`),Ce.panel.classList.remove("open")}),Ce.mode.addEventListener("change",()=>{Qt=Ce.mode.value,gr(),kr()})};let St="";const Yc=s=>{const l=Ce.clientId.value.trim()||`mqttjs_${Math.random().toString(16).slice(2,8)}`;Il(),St="";const o={clientId:l,username:Ce.username.value.trim()||void 0,password:Ce.password.value||void 0,protocolId:"MQTT",protocolVersion:4,keepalive:60,clean:!0,reconnectPeriod:Ce.autoReconnect.checked?5e3:0,resubscribe:!1,connectTimeout:30*1e3};try{nt=Dc.connect(s,o)}catch(f){At(Ze.Disconnected),Ve("sys",`MQTT : ${f.message}`);return}const a=nt;a.on("connect",()=>{if(!a||a!==nt)return;wr=!0,At(Ze.Connected),Ve("sys",`MQTT  (ID: ${l})`),Gt(),Bo();const f=Ce.topic.value.trim();f&&nt&&nt.subscribe(f,{qos:0},r=>{nt&&(r?Ve("sys",`MQTT : ${r.message}`):(Ve("sys",`: ${f}`),St=f))})}),a.on("message",(f,r)=>{if(!nt)return;_r();const t=r?r.toString():"";Ve("rx",t)}),a.on("error",f=>{Ve("sys",`MQTT : ${(f==null?void 0:f.message)||f}`)}),a.on("close",()=>{a===nt&&(wr=!1,At(Ze.Disconnected),nt=null,St="",Ve("sys","MQTT "),No())})},Jc=async()=>{At(Ze.Disconnected),await $c(),await zc(),Qc()};Jc();
